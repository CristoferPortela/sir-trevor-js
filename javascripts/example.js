!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=h[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],e))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(u(r.parts[o],e));h[r.id]={id:r.id,refs:1,parts:s}}}}function i(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function o(t,e){var n=v(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=g[g.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=v(t.insertAt.before,n);n.insertBefore(e,i)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){return n.nc}();r&&(t.attrs.nonce=r)}return c(e,t.attrs),o(t,e),e}function c(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function u(t,e){var n,r,i,u;if(e.transform&&t.css){if(!(u="function"==typeof e.transform?e.transform(t.css):e.transform["default"](t.css)))return function(){};t.css=u}if(e.singleton){var f=m++;n=y||(y=a(e)),r=l.bind(null,n,f,!1),i=l.bind(null,n,f,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",c(e,t.attrs),o(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=b(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),r=function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){s(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function l(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var f,p,h={},d=(f=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===p&&(p=f.apply(this,arguments)),p}),v=function(){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),y=null,m=0,g=[],b=n(1);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=d()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return r(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s];(c=h[a.id]).refs--,o.push(c)}for(t&&r(i(t,e),e),s=0;s<o.length;s++){var c;if(0===(c=o[s]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete h[c.id]}}}};var _,w=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")})},function(t){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},,,,,function(t,e,n){var r=n(7);n(8),r.setDefaults({iconUrl:document.body.getAttribute("icon-url")}),new r.Editor({el:document.querySelector(".js-sir-trevor-instance"),blockTypes:["Text","List","Video","Quote","Iframe"],defaultType:["Text"]})},function(t){var e;window,e=function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=93)}([function(t,e,n){"use strict";e.isEmpty=n(119),e.isFunction=n(28),e.isObject=n(18),e.isString=n(129),e.isUndefined=n(130),e.result=n(131),e.template=n(132),e.uniqueId=n(139)},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(3),s=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,a={getInstance:function(t){return r.isUndefined(t)?i.instances[0]:r.isString(t)?i.instances.find(function(e){return e.ID===t}):i.instances[t]},getInstanceBySelection:function(){return a.getInstance(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").getAttribute("data-instance"))},getBlockBySelection:function(){var t=a.getInstanceBySelection();if(t)return t.findBlockById(o.getClosest(window.getSelection().anchorNode.parentNode,".st-block").id)},log:function(){!r.isUndefined(console)&&i.debug&&console.log.apply(console,arguments)},isURI:function(t){return s.test(t)},titleize:function(t){return null===t?"":(t=String(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},classify:function(t){return a.titleize(String(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},flatten:function(t){var e={};return(Array.isArray(t)?t:Object.keys(t)).forEach(function(t){e[t]=!0}),e},underscored:function(t){return t.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(t){return t.split("").reverse().join("")},toSlug:function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},leftTrim:function(t){return t.replace(/^\s+/,"")}};t.exports=a},function(t){"use strict";var e={html:['<div class="st-block__dropzone">','<svg role="img" class="st-icon"><use xlink:href="<%= config.defaults.iconUrl %>#<%= _.result(block, "icon_name") %>"/></svg>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},n={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},r={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};t.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:e,paste_options:n,upload_options:r},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",attachmentName:"attachment[name]",attachmentFile:"attachment[file]",attachmentUid:"attachment[uid]",baseImageUrl:"/sir-trevor-uploads/",iconUrl:"../src/icons/sir-trevor-icons.svg",errorsContainer:void 0,convertFromMarkdown:!0,joinListBlocksOnBlockRemove:!1,formatBar:{commands:[{name:"Bold",title:"bold",iconName:"fmt-bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",iconName:"fmt-italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"fmt-link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"fmt-unlink",cmd:"unlink",text:"link"},{name:"Heading",title:"heading",iconName:"fmt-heading",cmd:"heading",text:"heading"},{name:"Quote",title:"quote",iconName:"fmt-quote",cmd:"quote",text:"quote"}]},ajaxOptions:{headers:{}},focusOnInit:!0,selectionMouse:!0,selectionCopy:!0,selectionCut:!0,selectionPaste:!0,selectionLimitToEditor:!0}}},function(t,e,n){"use strict";var r,i,o=n(0),s=Object.create(null);s.setAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.html&&(t.innerHTML=o.result(e,"html"),delete e.html),e.text&&(t.textContent=e.text,delete e.text),Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])}),t},s.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement(t);return s.setAttributes(n,e),n},s.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},s.remove=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},s.replaceWith=function(t,e){s.remove(e),t.parentNode.replaceChild(e,t)},s.hide=function(t){t.style.display="none"},s.show=function(t){t.style.display=""},s.matches=(r=Element.prototype,i=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)n++;return!!e[n]},function(t,e){return i.call(t,e)}),s.getClosest=function(t,e){for(;t&&t!==document.body&&!s.matches(t,e);t=t.parentNode);return t},s.wrap=function(t,e){return e=e||document.createElement("div"),t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e.appendChild(t)},s.createDocumentFragmentFromString=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.childNodes[0];)e.appendChild(n.childNodes[0]);return e},t.exports=s},function(t,e,n){"use strict";t.exports=Object.assign({},n(9))},function(t){t.exports=function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:I(t)}function n(t){return s(t)?t:O(t)}function r(t){return a(t)?t:B(t)}function i(t){return o(t)&&!c(t)?t:j(t)}function o(t){return!(!t||!t[Fe])}function s(t){return!(!t||!t[qe])}function a(t){return!(!t||!t[ze])}function c(t){return s(t)||a(t)}function u(t){return!(!t||!t[He])}function l(t){return t.value=!1,t}function f(t){t&&(t.value=!0)}function p(){}function h(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function d(t){return void 0===t.size&&(t.size=t.__iterate(y)),t.size}function v(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?d(t)+e:e}function y(){return!0}function m(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function g(t,e){return _(t,e,0)}function b(t,e){return _(t,e,e)}function _(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function w(t){this.next=t}function k(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function x(){return{value:void 0,done:!0}}function E(t){return!!C(t)}function S(t){return t&&"function"==typeof t.next}function T(t){var e=C(t);return e&&e.call(t)}function C(t){var e=t&&(Ze&&t[Ze]||t[tn]);if("function"==typeof e)return e}function A(t){return t&&"number"==typeof t.length}function I(t){return null==t?U():o(t)?t.toSeq():function(t){var e=q(t)||"object"==typeof t&&new L(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function O(t){return null==t?U().toKeyedSeq():o(t)?s(t)?t.toSeq():t.fromEntrySeq():R(t)}function B(t){return null==t?U():o(t)?s(t)?t.entrySeq():t.toIndexedSeq():F(t)}function j(t){return(null==t?U():o(t)?s(t)?t.entrySeq():t:F(t)).toSetSeq()}function D(t){this._array=t,this.size=t.length}function L(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function M(t){this._iterable=t,this.size=t.length||t.size}function N(t){this._iterator=t,this._iteratorCache=[]}function P(t){return!(!t||!t[sn])}function U(){return nn||(nn=new D([]))}function R(t){var e=Array.isArray(t)?new D(t).fromEntrySeq():S(t)?new N(t).fromEntrySeq():E(t)?new M(t).fromEntrySeq():"object"==typeof t?new L(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function F(t){var e=q(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function q(t){return A(t)?new D(t):S(t)?new N(t):E(t)?new M(t):void 0}function z(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;s<=o;s++){var a=i[n?o-s:s];if(!1===e(a[1],r?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function H(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new w(function(){var t=i[n?o-s:s];return s++>o?{value:void 0,done:!0}:k(e,r?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function $(t,e){return e?function t(e,n,r,i){return Array.isArray(n)?e.call(i,r,B(n).map(function(r,i){return t(e,r,i,n)})):W(n)?e.call(i,r,O(n).map(function(r,i){return t(e,r,i,n)})):n}(e,t,"",{"":t}):K(t)}function K(t){return Array.isArray(t)?B(t).map(K).toList():W(t)?O(t).map(K).toMap():t}function W(t){return t&&(t.constructor===Object||void 0===t.constructor)}function V(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function G(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||s(t)!==s(e)||a(t)!==a(e)||u(t)!==u(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!c(t);if(u(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&V(i[1],t)&&(n||V(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var l=t;t=e,e=l}var f=!0,p=e.__iterate(function(e,r){if(n?!t.has(e):i?!V(e,t.get(r,Ve)):!V(t.get(r,Ve),e))return f=!1,!1});return f&&t.size===p}function J(t,e){if(!(this instanceof J))return new J(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(rn)return rn;rn=this}}function X(t,e){if(!t)throw new Error(e)}function Q(t,e,n){if(!(this instanceof Q))return new Q(t,e,n);if(X(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(on)return on;on=this}}function Y(){throw TypeError("Abstract")}function Z(){}function tt(){}function et(){}function nt(t){return t>>>1&1073741824|3221225471&t}function rt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e,n,r=typeof t;if("number"===r){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return nt(i)}if("string"===r)return t.length>dn?(void 0===(n=mn[e=t])&&(n=it(e),yn===vn&&(yn=0,mn={}),yn++,mn[e]=n),n):it(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===r)return function(t){var e;if(fn&&void 0!==(e=an.get(t)))return e;if(void 0!==(e=t[hn]))return e;if(!ln){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[hn]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++pn,1073741824&pn&&(pn=0),fn)an.set(t,e);else{if(void 0!==un&&!1===un(t))throw new Error("Non-extensible objects are not allowed as keys.");if(ln)Object.defineProperty(t,hn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[hn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[hn]=e}}return e}(t);if("function"==typeof t.toString)return it(t.toString());throw new Error("Value type "+r+" cannot be hashed.")}function it(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return nt(e)}function ot(t){X(t!==1/0,"Cannot perform this action with an infinite size.")}function st(t){return null==t?mt():at(t)&&!u(t)?t:mt().withMutations(function(e){var r=n(t);ot(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function at(t){return!(!t||!t[bn])}function ct(t,e){this.ownerID=t,this.entries=e}function ut(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function lt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function ft(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function pt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function ht(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&vt(t._root)}function dt(t,e){return k(t,e[0],e[1])}function vt(t,e){return{node:t,index:0,__prev:e}}function yt(t,e,n,r){var i=Object.create(_n);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function mt(){return gn||(gn=yt(0))}function gt(t,e,n){var r,i;if(t._root){var o=l(Ge),s=l(Je);if(r=bt(t._root,t.__ownerID,0,void 0,e,n,o,s),!s.value)return t;i=t.size+(o.value?n===Ve?-1:1:0)}else{if(n===Ve)return t;i=1,r=new ct(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?yt(i,r):mt()}function bt(t,e,n,r,i,o,s,a){return t?t.update(e,n,r,i,o,s,a):o===Ve?t:(f(a),f(s),new pt(e,r,[i,o]))}function _t(t){return t.constructor===pt||t.constructor===ft}function wt(t,e,n,r,i){if(t.keyHash===r)return new ft(e,r,[t.entry,i]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&We,a=(0===n?r:r>>>n)&We;return new ut(e,1<<s|1<<a,s===a?[wt(t,e,n+$e,r,i)]:(o=new pt(e,r,i),s<a?[t,o]:[o,t]))}function kt(t,e,r){for(var i=[],s=0;s<r.length;s++){var a=r[s],c=n(a);o(a)||(c=c.map(function(t){return $(t)})),i.push(c)}return St(t,e,i)}function xt(t,e){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):V(t,e)?t:e}function Et(t){return function(e,n,r){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return V(e,i)?e:i}}function St(t,e,n){return 0===(n=n.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,Ve,function(t){return t===Ve?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function Tt(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Ct(t,e,n,r){var i=r?t:h(t);return i[e]=n,i}function At(t){var e=Dt();if(null==t)return e;if(It(t))return t;var n=r(t),i=n.size;return 0===i?e:(ot(i),i>0&&i<Ke?jt(0,i,$e,null,new Ot(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function It(t){return!(!t||!t[En])}function Ot(t,e){this.array=t,this.ownerID=e}function Bt(t,e){function n(t,a,c){return 0===a?function(t,n){var a=n===o?s&&s.array:t&&t.array,c=n>r?0:r-n,u=i-n;return u>Ke&&(u=Ke),function(){if(c===u)return An;var t=e?--u:c++;return a&&a[t]}}(t,c):function(t,o,s){var a,c=t&&t.array,u=s>r?0:r-s>>o,l=1+(i-s>>o);return l>Ke&&(l=Ke),function(){for(;;){if(a){var t=a();if(t!==An)return t;a=null}if(u===l)return An;var r=e?--l:u++;a=n(c&&c[r],o-$e,s+(r<<o))}}}(t,a,c)}var r=t._origin,i=t._capacity,o=Rt(i),s=t._tail;return n(t._root,t._level,0)}function jt(t,e,n,r,i,o,s){var a=Object.create(Sn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function Dt(){return Tn||(Tn=jt(0,0,$e))}function Lt(t,e,n,r,i,o){var s,a=r>>>n&We,c=t&&a<t.array.length;if(!c&&void 0===i)return t;if(n>0){var u=t&&t.array[a],l=Lt(u,e,n-$e,r,i,o);return l===u?t:((s=Mt(t,e)).array[a]=l,s)}return c&&t.array[a]===i?t:(f(o),s=Mt(t,e),void 0===i&&a===s.array.length-1?s.array.pop():s.array[a]=i,s)}function Mt(t,e){return e&&t&&e===t.ownerID?t:new Ot(t?t.array.slice():[],e)}function Nt(t,e){if(e>=Rt(t._capacity))return t._tail;if(e<1<<t._level+$e){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&We],r-=$e;return n}}function Pt(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new p,i=t._origin,o=t._capacity,s=i+e,a=void 0===n?o:n<0?o+n:i+n;if(s===i&&a===o)return t;if(s>=a)return t.clear();for(var c=t._level,u=t._root,l=0;s+l<0;)u=new Ot(u&&u.array.length?[void 0,u]:[],r),l+=1<<(c+=$e);l&&(s+=l,i+=l,a+=l,o+=l);for(var f=Rt(o),h=Rt(a);h>=1<<c+$e;)u=new Ot(u&&u.array.length?[u]:[],r),c+=$e;var d=t._tail,v=h<f?Nt(t,a-1):h>f?new Ot([],r):d;if(d&&h>f&&s<o&&d.array.length){for(var y=u=Mt(u,r),m=c;m>$e;m-=$e){var g=f>>>m&We;y=y.array[g]=Mt(y.array[g],r)}y.array[f>>>$e&We]=d}if(a<o&&(v=v&&v.removeAfter(r,0,a)),s>=h)s-=h,a-=h,c=$e,u=null,v=v&&v.removeBefore(r,0,s);else if(s>i||h<f){for(l=0;u;){var b=s>>>c&We;if(b!==h>>>c&We)break;b&&(l+=(1<<c)*b),c-=$e,u=u.array[b]}u&&s>i&&(u=u.removeBefore(r,c,s-l)),u&&h<f&&(u=u.removeAfter(r,c,h-l)),l&&(s-=l,a-=l)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=c,t._root=u,t._tail=v,t.__hash=void 0,t.__altered=!0,t):jt(s,a,c,u,v)}function Ut(t,e,n){for(var i=[],s=0,a=0;a<n.length;a++){var c=n[a],u=r(c);u.size>s&&(s=u.size),o(c)||(u=u.map(function(t){return $(t)})),i.push(u)}return s>t.size&&(t=t.setSize(s)),St(t,e,i)}function Rt(t){return t<Ke?0:t-1>>>$e<<$e}function Ft(t){return null==t?Ht():qt(t)?t:Ht().withMutations(function(e){var r=n(t);ot(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function qt(t){return at(t)&&u(t)}function zt(t,e,n,r){var i=Object.create(Ft.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Ht(){return Cn||(Cn=zt(mt(),Dt()))}function $t(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),c=void 0!==a;if(n===Ve){if(!c)return t;s.size>=Ke&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(c){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):zt(r,i)}function Kt(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Wt(t){this._iter=t,this.size=t.size}function Vt(t){this._iter=t,this.size=t.size}function Gt(t){this._iter=t,this.size=t.size}function Jt(t){var e=le(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=fe,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===Ye){var r=t.__iterator(e,n);return new w(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===Qe?Xe:Qe,n)},e}function Xt(t,e,n){var r=le(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,Ve);return o===Ve?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,s){return!1!==r(e.call(n,t,i,s),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(Ye,i);return new w(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return k(r,a,e.call(n,s[1],a,t),i)})},r}function Qt(t,e){var n=le(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Jt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=fe,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function Yt(t,e,n,r){var i=le(t);return r&&(i.has=function(r){var i=t.get(r,Ve);return i!==Ve&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,Ve);return o!==Ve&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,c){if(e.call(n,t,o,c))return a++,i(t,r?o:a-1,s)},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(Ye,o),a=0;return new w(function(){for(;;){var o=s.next();if(o.done)return o;var c=o.value,u=c[0],l=c[1];if(e.call(n,l,u,t))return k(i,r?u:a++,l,o)}})},i}function Zt(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),m(e,n,i))return t;var o=g(e,i),s=b(n,i);if(o!=o||s!=s)return Zt(t.toSeq().cacheResult(),e,n,r);var a,c=s-o;c==c&&(a=c<0?0:c);var u=le(t);return u.size=0===a?a:t.size&&a||void 0,!r&&P(t)&&a>=0&&(u.get=function(e,n){return(e=v(this,e))>=0&&e<a?t.get(e+o,n):n}),u.__iterateUncached=function(e,n){var i=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,c=!0,u=0;return t.__iterate(function(t,n){if(!c||!(c=s++<o))return u++,!1!==e(t,r?n:u-1,i)&&u!==a}),u},u.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);var i=0!==a&&t.__iterator(e,n),s=0,c=0;return new w(function(){for(;s++<o;)i.next();if(++c>a)return{value:void 0,done:!0};var t=i.next();return r||e===Qe?t:k(e,c-1,e===Xe?void 0:t.value[1],t)})},u}function te(t,e,n,r){var i=le(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,c=0;return t.__iterate(function(t,o,u){if(!a||!(a=e.call(n,t,o,u)))return c++,i(t,r?o:c-1,s)}),c},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(Ye,o),c=!0,u=0;return new w(function(){var t,o,l;do{if((t=a.next()).done)return r||i===Qe?t:k(i,u++,i===Xe?void 0:t.value[1],t);var f=t.value;o=f[0],l=f[1],c&&(c=e.call(n,l,o,s))}while(c);return i===Ye?t:k(i,o,l,t)})},i}function ee(t,e,n){var r=le(t);return r.__iterateUncached=function(r,i){var s=0,a=!1;return function t(c,u){var l=this;c.__iterate(function(i,c){return(!e||u<e)&&o(i)?t(i,u+1):!1===r(i,n?c:s++,l)&&(a=!0),!a},i)}(t,0),s},r.__iteratorUncached=function(r,i){var s=t.__iterator(r,i),a=[],c=0;return new w(function(){for(;s;){var t=s.next();if(!1===t.done){var u=t.value;if(r===Ye&&(u=u[1]),e&&!(a.length<e)||!o(u))return n?t:k(r,c++,u,t);a.push(s),s=u.__iterator(r,i)}else s=a.pop()}return{value:void 0,done:!0}})},r}function ne(t,e,n){e||(e=pe);var r=s(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?O(o):a(t)?B(o):j(o)}function re(t,e,n){if(e||(e=pe),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return ie(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return ie(e,t,n)?n:t})}function ie(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function oe(t,n,r){var i=le(t);return i.size=new D(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(Qe,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=e(t),T(i?t.reverse():t)}),s=0,a=!1;return new w(function(){var e;return a||(e=o.map(function(t){return t.next()}),a=e.some(function(t){return t.done})),a?{value:void 0,done:!0}:k(t,s++,n.apply(null,e.map(function(t){return t.value})))})},i}function se(t,e){return P(t)?e:t.constructor(e)}function ae(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ce(t){return ot(t.size),d(t)}function ue(t){return s(t)?n:a(t)?r:i}function le(t){return Object.create((s(t)?O:a(t)?B:j).prototype)}function fe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):I.prototype.cacheResult.call(this)}function pe(t,e){return t>e?1:t<e?-1:0}function he(t){var n=T(t);if(!n){if(!A(t))throw new TypeError("Expected iterable or array-like: "+t);n=T(e(t))}return n}function de(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t);!function(t,e){try{e.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){X(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,t))}catch(t){}}(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=st(o)},i=r.prototype=Object.create(In);return i.constructor=r,r}function ve(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function ye(t){return t._name||t.constructor.name||"Record"}function me(t){return null==t?we():ge(t)&&!u(t)?t:we().withMutations(function(e){var n=i(t);ot(n.size),n.forEach(function(t){return e.add(t)})})}function ge(t){return!(!t||!t[Bn])}function be(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function _e(t,e){var n=Object.create(jn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function we(){return On||(On=_e(mt()))}function ke(t){return null==t?Se():xe(t)?t:Se().withMutations(function(e){var n=i(t);ot(n.size),n.forEach(function(t){return e.add(t)})})}function xe(t){return ge(t)&&u(t)}function Ee(t,e){var n=Object.create(Ln);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Se(){return Dn||(Dn=Ee(Ht()))}function Te(t){return null==t?Ie():Ce(t)?t:Ie().unshiftAll(t)}function Ce(t){return!(!t||!t[Nn])}function Ae(t,e,n,r){var i=Object.create(Pn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ie(){return Mn||(Mn=Ae(0))}function Oe(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Be(t,e){return e}function je(t,e){return[e,t]}function De(t){return function(){return!t.apply(this,arguments)}}function Le(t){return function(){return-t.apply(this,arguments)}}function Me(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Ne(){return h(arguments)}function Pe(t,e){return t<e?1:t>e?-1:0}function Ue(t,e){
return t^e+2654435769+(t<<6)+(t>>2)|0}var Re=Array.prototype.slice;t(n,e),t(r,e),t(i,e),e.isIterable=o,e.isKeyed=s,e.isIndexed=a,e.isAssociative=c,e.isOrdered=u,e.Keyed=n,e.Indexed=r,e.Set=i;var Fe="@@__IMMUTABLE_ITERABLE__@@",qe="@@__IMMUTABLE_KEYED__@@",ze="@@__IMMUTABLE_INDEXED__@@",He="@@__IMMUTABLE_ORDERED__@@",$e=5,Ke=1<<$e,We=Ke-1,Ve={},Ge={value:!1},Je={value:!1},Xe=0,Qe=1,Ye=2,Ze="function"==typeof Symbol&&Symbol.iterator,tn="@@iterator",en=Ze||tn;w.prototype.toString=function(){return"[Iterator]"},w.KEYS=Xe,w.VALUES=Qe,w.ENTRIES=Ye,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[en]=function(){return this},t(I,e),I.of=function(){return I(arguments)},I.prototype.toSeq=function(){return this},I.prototype.toString=function(){return this.__toString("Seq {","}")},I.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},I.prototype.__iterate=function(t,e){return z(this,t,e,!0)},I.prototype.__iterator=function(t,e){return H(this,t,e,!0)},t(O,I),O.prototype.toKeyedSeq=function(){return this},t(B,I),B.of=function(){return B(arguments)},B.prototype.toIndexedSeq=function(){return this},B.prototype.toString=function(){return this.__toString("Seq [","]")},B.prototype.__iterate=function(t,e){return z(this,t,e,!1)},B.prototype.__iterator=function(t,e){return H(this,t,e,!1)},t(j,I),j.of=function(){return j(arguments)},j.prototype.toSetSeq=function(){return this},I.isSeq=P,I.Keyed=O,I.Set=j,I.Indexed=B;var nn,rn,on,sn="@@__IMMUTABLE_SEQ__@@";I.prototype[sn]=!0,t(D,B),D.prototype.get=function(t,e){return this.has(t)?this._array[v(this,t)]:e},D.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},D.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new w(function(){return i>r?{value:void 0,done:!0}:k(t,i,n[e?r-i++:i++])})},t(L,O),L.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},L.prototype.has=function(t){return this._object.hasOwnProperty(t)},L.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var s=r[e?i-o:o];if(!1===t(n[s],s,this))return o+1}return o},L.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new w(function(){var s=r[e?i-o:o];return o++>i?{value:void 0,done:!0}:k(t,s,n[s])})},L.prototype[He]=!0,t(M,B),M.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=T(n),i=0;if(S(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},M.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=T(n);if(!S(r))return new w(x);var i=0;return new w(function(){var e=r.next();return e.done?e:k(t,i++,e.value)})},t(N,B),N.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(n=r.next()).done;){var s=n.value;if(i[o]=s,!1===t(s,o++,this))break}return o},N.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new w(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return k(t,i,r[i++])})},t(J,B),J.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},J.prototype.get=function(t,e){return this.has(t)?this._value:e},J.prototype.includes=function(t){return V(this._value,t)},J.prototype.slice=function(t,e){var n=this.size;return m(t,e,n)?this:new J(this._value,b(e,n)-g(t,n))},J.prototype.reverse=function(){return this},J.prototype.indexOf=function(t){return V(this._value,t)?0:-1},J.prototype.lastIndexOf=function(t){return V(this._value,t)?this.size:-1},J.prototype.__iterate=function(t){for(var e=0;e<this.size;e++)if(!1===t(this._value,e,this))return e+1;return e},J.prototype.__iterator=function(t){var e=this,n=0;return new w(function(){return n<e.size?k(t,n++,e._value):{value:void 0,done:!0}})},J.prototype.equals=function(t){return t instanceof J?V(this._value,t._value):G(t)},t(Q,B),Q.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Q.prototype.get=function(t,e){return this.has(t)?this._start+v(this,t)*this._step:e},Q.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Q.prototype.slice=function(t,e){return m(t,e,this.size)?this:(t=g(t,this.size),(e=b(e,this.size))<=t?new Q(0,0):new Q(this.get(t,this._end),this.get(e,this._end),this._step))},Q.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Q.prototype.lastIndexOf=function(t){return this.indexOf(t)},Q.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},Q.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new w(function(){var s=i;return i+=e?-r:r,o>n?{value:void 0,done:!0}:k(t,o++,s)})},Q.prototype.equals=function(t){return t instanceof Q?this._start===t._start&&this._end===t._end&&this._step===t._step:G(this,t)},t(Y,e),t(Z,Y),t(tt,Y),t(et,Y),Y.Keyed=Z,Y.Indexed=tt,Y.Set=et;var an,cn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},un=Object.isExtensible,ln=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),fn="function"==typeof WeakMap;fn&&(an=new WeakMap);var pn=0,hn="__immutablehash__";"function"==typeof Symbol&&(hn=Symbol(hn));var dn=16,vn=255,yn=0,mn={};t(st,Z),st.of=function(){var t=Re.call(arguments,0);return mt().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},st.prototype.toString=function(){return this.__toString("Map {","}")},st.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},st.prototype.set=function(t,e){return gt(this,t,e)},st.prototype.setIn=function(t,e){return this.updateIn(t,Ve,function(){return e})},st.prototype.remove=function(t){return gt(this,t,Ve)},st.prototype.deleteIn=function(t){return this.updateIn(t,function(){return Ve})},st.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},st.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=function t(e,n,r,i){var o=e===Ve,s=n.next();if(s.done){var a=o?r:e,c=i(a);return c===a?e:c}X(o||e&&e.set,"invalid keyPath");var u=s.value,l=o?Ve:e.get(u,Ve),f=t(l,n,r,i);return f===l?e:f===Ve?e.remove(u):(o?mt():e).set(u,f)}(this,he(t),e,n);return r===Ve?void 0:r},st.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):mt()},st.prototype.merge=function(){return kt(this,void 0,arguments)},st.prototype.mergeWith=function(t){return kt(this,t,Re.call(arguments,1))},st.prototype.mergeIn=function(t){var e=Re.call(arguments,1);return this.updateIn(t,mt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},st.prototype.mergeDeep=function(){return kt(this,xt,arguments)},st.prototype.mergeDeepWith=function(t){var e=Re.call(arguments,1);return kt(this,Et(t),e)},st.prototype.mergeDeepIn=function(t){var e=Re.call(arguments,1);return this.updateIn(t,mt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},st.prototype.sort=function(t){return Ft(ne(this,t))},st.prototype.sortBy=function(t,e){return Ft(ne(this,e,t))},st.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},st.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new p)},st.prototype.asImmutable=function(){return this.__ensureOwner()},st.prototype.wasAltered=function(){return this.__altered},st.prototype.__iterator=function(t,e){return new ht(this,t,e)},st.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},st.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?yt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},st.isMap=at;var gn,bn="@@__IMMUTABLE_MAP__@@",_n=st.prototype;_n[bn]=!0,_n["delete"]=_n.remove,_n.removeIn=_n.deleteIn,ct.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(V(n,i[o][0]))return i[o][1];return r},ct.prototype.update=function(t,e,n,r,i,o,s){for(var a=i===Ve,c=this.entries,u=0,l=c.length;u<l&&!V(r,c[u][0]);u++);var d=u<l;if(d?c[u][1]===i:a)return this;if(f(s),(a||!d)&&f(o),!a||1!==c.length){if(!d&&!a&&c.length>=wn)return function(t,e,n,r){t||(t=new p);for(var i=new pt(t,rt(n),[n,r]),o=0;o<e.length;o++){var s=e[o];i=i.update(t,0,void 0,s[0],s[1])}return i}(t,c,r,i);var v=t&&t===this.ownerID,y=v?c:h(c);return d?a?u===l-1?y.pop():y[u]=y.pop():y[u]=[r,i]:y.push([r,i]),v?(this.entries=y,this):new ct(t,y)}},ut.prototype.get=function(t,e,n,r){void 0===e&&(e=rt(n));var i=1<<((0===t?e:e>>>t)&We),o=this.bitmap;return 0==(o&i)?r:this.nodes[Tt(o&i-1)].get(t+$e,e,n,r)},ut.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=rt(r));var a=(0===e?n:n>>>e)&We,c=1<<a,u=this.bitmap,l=0!=(u&c);if(!l&&i===Ve)return this;var f=Tt(u&c-1),p=this.nodes,h=l?p[f]:void 0,d=bt(h,t,e+$e,n,r,i,o,s);if(d===h)return this;if(!l&&d&&p.length>=kn)return function(t,e,n,r,i){for(var o=0,s=new Array(Ke),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new lt(t,o+1,s)}(t,p,u,a,d);if(l&&!d&&2===p.length&&_t(p[1^f]))return p[1^f];if(l&&d&&1===p.length&&_t(d))return d;var v=t&&t===this.ownerID,y=l?d?u:u^c:u|c,m=l?d?Ct(p,f,d,v):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;s<r;s++)s===e&&(o=1),i[s]=t[s+o];return i}(p,f,v):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;a<i;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}(p,f,d,v);return v?(this.bitmap=y,this.nodes=m,this):new ut(t,y,m)},lt.prototype.get=function(t,e,n,r){void 0===e&&(e=rt(n));var i=(0===t?e:e>>>t)&We,o=this.nodes[i];return o?o.get(t+$e,e,n,r):r},lt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=rt(r));var a=(0===e?n:n>>>e)&We,c=i===Ve,u=this.nodes,l=u[a];if(c&&!l)return this;var f=bt(l,t,e+$e,n,r,i,o,s);if(f===l)return this;var p=this.count;if(l){if(!f&&--p<xn)return function(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,c=1,u=e.length;a<u;a++,c<<=1){var l=e[a];void 0!==l&&a!==r&&(i|=c,s[o++]=l)}return new ut(t,i,s)}(t,u,p,a)}else p++;var h=t&&t===this.ownerID,d=Ct(u,a,f,h);return h?(this.count=p,this.nodes=d,this):new lt(t,p,d)},ft.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;o<s;o++)if(V(n,i[o][0]))return i[o][1];return r},ft.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=rt(r));var a=i===Ve;if(n!==this.keyHash)return a?this:(f(s),f(o),wt(this,t,e,n,[r,i]));for(var c=this.entries,u=0,l=c.length;u<l&&!V(r,c[u][0]);u++);var p=u<l;if(p?c[u][1]===i:a)return this;if(f(s),(a||!p)&&f(o),a&&2===l)return new pt(t,this.keyHash,c[1^u]);var d=t&&t===this.ownerID,v=d?c:h(c);return p?a?u===l-1?v.pop():v[u]=v.pop():v[u]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new ft(t,this.keyHash,v)},pt.prototype.get=function(t,e,n,r){return V(n,this.entry[0])?this.entry[1]:r},pt.prototype.update=function(t,e,n,r,i,o,s){var a=i===Ve,c=V(r,this.entry[0]);return(c?i===this.entry[1]:a)?this:(f(s),a?void f(o):c?t&&t===this.ownerID?(this.entry[1]=i,this):new pt(t,this.keyHash,[r,i]):(f(o),wt(this,t,e,rt(r),[r,i])))},ct.prototype.iterate=ft.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},ut.prototype.iterate=lt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},pt.prototype.iterate=function(t){return t(this.entry)},t(ht,w),ht.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return dt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return dt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return dt(t,o.entry);e=this._stack=vt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var wn=Ke/4,kn=Ke/2,xn=Ke/4;t(At,tt),At.of=function(){return this(arguments)},At.prototype.toString=function(){return this.__toString("List [","]")},At.prototype.get=function(t,e){if((t=v(this,t))>=0&&t<this.size){var n=Nt(this,t+=this._origin);return n&&n.array[t&We]}return e},At.prototype.set=function(t,e){return function(t,e,n){if((e=v(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Pt(t,e).set(0,n):Pt(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=l(Je);return e>=Rt(t._capacity)?r=Lt(r,t.__ownerID,0,e,n,o):i=Lt(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):jt(t._origin,t._capacity,t._level,i,r):t}(this,t,e)},At.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},At.prototype.insert=function(t,e){return this.splice(t,0,e)},At.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=$e,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Dt()},At.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Pt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},At.prototype.pop=function(){return Pt(this,0,-1)},At.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Pt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},At.prototype.shift=function(){return Pt(this,1)},At.prototype.merge=function(){return Ut(this,void 0,arguments)},At.prototype.mergeWith=function(t){return Ut(this,t,Re.call(arguments,1))},At.prototype.mergeDeep=function(){return Ut(this,xt,arguments)},At.prototype.mergeDeepWith=function(t){var e=Re.call(arguments,1);return Ut(this,Et(t),e)},At.prototype.setSize=function(t){return Pt(this,0,t)},At.prototype.slice=function(t,e){var n=this.size;return m(t,e,n)?this:Pt(this,g(t,n),b(e,n))},At.prototype.__iterator=function(t,e){var n=0,r=Bt(this,e);return new w(function(){var e=r();return e===An?{value:void 0,done:!0}:k(t,n++,e)})},At.prototype.__iterate=function(t,e){for(var n,r=0,i=Bt(this,e);(n=i())!==An&&!1!==t(n,r++,this););return r},At.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?jt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},At.isList=It;var En="@@__IMMUTABLE_LIST__@@",Sn=At.prototype;Sn[En]=!0,Sn["delete"]=Sn.remove,Sn.setIn=_n.setIn,Sn.deleteIn=Sn.removeIn=_n.removeIn,Sn.update=_n.update,Sn.updateIn=_n.updateIn,Sn.mergeIn=_n.mergeIn,Sn.mergeDeepIn=_n.mergeDeepIn,Sn.withMutations=_n.withMutations,Sn.asMutable=_n.asMutable,Sn.asImmutable=_n.asImmutable,Sn.wasAltered=_n.wasAltered,Ot.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&We;if(r>=this.array.length)return new Ot([],t);var i,o=0===r;if(e>0){var s=this.array[r];if((i=s&&s.removeBefore(t,e-$e,n))===s&&o)return this}if(o&&!i)return this;var a=Mt(this,t);if(!o)for(var c=0;c<r;c++)a.array[c]=void 0;return i&&(a.array[r]=i),a},Ot.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&We;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-$e,n))===o&&i===this.array.length-1)return this}var s=Mt(this,t);return s.array.splice(i+1),r&&(s.array[i]=r),s};var Tn,Cn,An={};t(Ft,st),Ft.of=function(){return this(arguments)},Ft.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ft.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ht()},Ft.prototype.set=function(t,e){return $t(this,t,e)},Ft.prototype.remove=function(t){return $t(this,t,Ve)},Ft.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ft.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Ft.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Ft.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?zt(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Ft.isOrderedMap=qt,Ft.prototype[He]=!0,Ft.prototype["delete"]=Ft.prototype.remove,t(Kt,O),Kt.prototype.get=function(t,e){return this._iter.get(t,e)},Kt.prototype.has=function(t){return this._iter.has(t)},Kt.prototype.valueSeq=function(){return this._iter.valueSeq()},Kt.prototype.reverse=function(){var t=this,e=Qt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Kt.prototype.map=function(t,e){var n=this,r=Xt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},Kt.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?ce(this):0,function(i){return t(i,e?--n:n++,r)}),e)},Kt.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(Qe,e),r=e?ce(this):0;return new w(function(){var i=n.next();return i.done?i:k(t,e?--r:r++,i.value,i)})},Kt.prototype[He]=!0,t(Wt,B),Wt.prototype.includes=function(t){return this._iter.includes(t)},Wt.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},Wt.prototype.__iterator=function(t,e){var n=this._iter.__iterator(Qe,e),r=0;return new w(function(){var e=n.next();return e.done?e:k(t,r++,e.value,e)})},t(Vt,j),Vt.prototype.has=function(t){return this._iter.includes(t)},Vt.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},Vt.prototype.__iterator=function(t,e){var n=this._iter.__iterator(Qe,e);return new w(function(){var e=n.next();return e.done?e:k(t,e.value,e.value,e)})},t(Gt,O),Gt.prototype.entrySeq=function(){return this._iter.toSeq()},Gt.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){ae(e);var r=o(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},Gt.prototype.__iterator=function(t,e){var n=this._iter.__iterator(Qe,e);return new w(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){ae(r);var i=o(r);return k(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},Wt.prototype.cacheResult=Kt.prototype.cacheResult=Vt.prototype.cacheResult=Gt.prototype.cacheResult=fe,t(de,Z),de.prototype.toString=function(){return this.__toString(ye(this)+" {","}")},de.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},de.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},de.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=ve(this,mt()))},de.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+ye(this));if(this._map&&!this._map.has(t)){if(e===this._defaultValues[t])return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:ve(this,n)},de.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:ve(this,e)},de.prototype.wasAltered=function(){return this._map.wasAltered()},de.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},de.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},de.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?ve(this,e,t):(this.__ownerID=t,this._map=e,this)};var In=de.prototype;In["delete"]=In.remove,In.deleteIn=In.removeIn=_n.removeIn,In.merge=_n.merge,In.mergeWith=_n.mergeWith,In.mergeIn=_n.mergeIn,In.mergeDeep=_n.mergeDeep,In.mergeDeepWith=_n.mergeDeepWith,In.mergeDeepIn=_n.mergeDeepIn,In.setIn=_n.setIn,In.update=_n.update,In.updateIn=_n.updateIn,In.withMutations=_n.withMutations,In.asMutable=_n.asMutable,In.asImmutable=_n.asImmutable,t(me,et),me.of=function(){return this(arguments)},me.fromKeys=function(t){return this(n(t).keySeq())},me.prototype.toString=function(){return this.__toString("Set {","}")},me.prototype.has=function(t){return this._map.has(t)},me.prototype.add=function(t){return be(this,this._map.set(t,!0))},me.prototype.remove=function(t){return be(this,this._map.remove(t))},me.prototype.clear=function(){return be(this,this._map.clear())},me.prototype.union=function(){var t=Re.call(arguments,0);return 0===(t=t.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},me.prototype.intersect=function(){var t=Re.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},me.prototype.subtract=function(){var t=Re.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},me.prototype.merge=function(){return this.union.apply(this,arguments)},me.prototype.mergeWith=function(){var t=Re.call(arguments,1);return this.union.apply(this,t)},me.prototype.sort=function(t){return ke(ne(this,t))},me.prototype.sortBy=function(t,e){return ke(ne(this,e,t))},me.prototype.wasAltered=function(){return this._map.wasAltered()},me.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},me.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},me.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},me.isSet=ge;var On,Bn="@@__IMMUTABLE_SET__@@",jn=me.prototype;jn[Bn]=!0,jn["delete"]=jn.remove,jn.mergeDeep=jn.merge,jn.mergeDeepWith=jn.mergeWith,jn.withMutations=_n.withMutations,jn.asMutable=_n.asMutable,jn.asImmutable=_n.asImmutable,jn.__empty=we,jn.__make=_e,t(ke,me),ke.of=function(){return this(arguments)},ke.fromKeys=function(t){return this(n(t).keySeq())},ke.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ke.isOrderedSet=xe;var Dn,Ln=ke.prototype;Ln[He]=!0,Ln.__empty=Se,Ln.__make=Ee,t(Te,tt),Te.of=function(){return this(arguments)},Te.prototype.toString=function(){return this.__toString("Stack [","]")},Te.prototype.get=function(t,e){var n=this._head;for(t=v(this,t);n&&t--;)n=n.next;return n?n.value:e},Te.prototype.peek=function(){return this._head&&this._head.value},Te.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ae(t,e)},Te.prototype.pushAll=function(t){if(0===(t=r(t)).size)return this;ot(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ae(e,n)},Te.prototype.pop=function(){return this.slice(1)},Te.prototype.unshift=function(){return this.push.apply(this,arguments)},Te.prototype.unshiftAll=function(t){return this.pushAll(t)},Te.prototype.shift=function(){return this.pop.apply(this,arguments)},Te.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ie()},Te.prototype.slice=function(t,e){if(m(t,e,this.size))return this;var n=g(t,this.size);if(b(e,this.size)!==this.size)return tt.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Ae(r,i)},Te.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ae(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Te.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},Te.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new w(function(){if(r){var e=r.value;return r=r.next,k(t,n++,e)}return{value:void 0,done:!0}})},Te.isStack=Ce;var Mn,Nn="@@__IMMUTABLE_STACK__@@",Pn=Te.prototype;Pn[Nn]=!0,Pn.withMutations=_n.withMutations,Pn.asMutable=_n.asMutable,Pn.asImmutable=_n.asImmutable,Pn.wasAltered=_n.wasAltered,e.Iterator=w,Oe(e,{toArray:function(){ot(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new Wt(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Kt(this,!0)},toMap:function(){return st(this.toKeyedSeq())},toObject:function(){ot(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Ft(this.toKeyedSeq())},toOrderedSet:function(){return ke(s(this)?this.valueSeq():this)},toSet:function(){return me(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Vt(this)},toSeq:function(){return a(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Te(s(this)?this.valueSeq():this)},toList:function(){return At(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=Re.call(arguments,0);return se(this,function(t,e){var r=s(t),i=[t].concat(e).map(function(t){return o(t)?r&&(t=n(t)):t=r?R(t):F(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var c=i[0];if(c===t||r&&s(c)||a(t)&&a(c))return c}var u=new D(i);return r?u=u.toKeyedSeq():a(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),u}(this,t))},includes:function(t){return this.some(function(e){return V(e,t)})},entries:function(){return this.__iterator(Ye)},every:function(t,e){ot(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return se(this,Yt(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return ot(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ot(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""}),e},keys:function(){return this.__iterator(Xe)},map:function(t,e){return se(this,Xt(this,t,e))},reduce:function(t,e,n){var r,i;return ot(this.size),arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),r},reduceRight:function(){var t=this.toKeyedSeq().reverse();return t.reduce.apply(t,arguments)},reverse:function(){return se(this,Qt(this,!0))},slice:function(t,e){return se(this,Zt(this,t,e,!0))},some:function(t,e){return!this.every(De(t),e)},sort:function(t){return se(this,ne(this,t))},values:function(){return this.__iterator(Qe)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=st().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}(this,t,e)},equals:function(t){return G(this,t)},entrySeq:function(){var t=this;if(t._cache)return new D(t._cache);var e=t.toSeq().map(je).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(De(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(y)},flatMap:function(t,e){return se(this,function(t,e,n){var r=ue(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return se(this,ee(this,t,!0))},fromEntrySeq:function(){return new Gt(this)},get:function(t,e){return this.find(function(e,n){return V(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=he(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,Ve):Ve)===Ve)return e}return r},groupBy:function(t,e){return function(t,e,n){var r=s(t),i=(u(t)?Ft():st()).asMutable();t.__iterate(function(o,s){i.update(e.call(n,o,s,t),function(t){return(t=t||[]).push(r?[s,o]:o),t})});var o=ue(t);return i.map(function(e){return se(t,o(e))})}(this,t,e)},has:function(t){return this.get(t,Ve)!==Ve},hasIn:function(t){return this.getIn(t,Ve)!==Ve},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:e(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return V(e,t)})},keySeq:function(){return this.toSeq().map(Be).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return re(this,t)},maxBy:function(t,e){return re(this,e,t)},min:function(t){return re(this,t?Le(t):Pe)},minBy:function(t,e){return re(this,e?Le(e):Pe,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return se(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return se(this,te(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(De(t),e)},sortBy:function(t,e){return se(this,ne(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return se(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return se(this,function(t,e,n){var r=le(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate(function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(Ye,i),a=!0;return new w(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var i=t.value,c=i[0],u=i[1];return e.call(n,u,c,o)?r===Ye?t:k(r,c,u,t):(a=!1,{value:void 0,done:!0})})},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(De(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=u(t),n=s(t),r=e?1:0;return function(t,e){return e=cn(e,3432918353),e=cn(e<<15|e>>>-15,461845907),e=cn(e<<13|e>>>-13,5),e=cn((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=nt((e=cn(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Ue(rt(t),rt(e))|0}:function(t,e){r=r+Ue(rt(t),rt(e))|0
}:e?function(t){r=31*r+rt(t)|0}:function(t){r=r+rt(t)|0}),r)}(this))}});var Un=e.prototype;Un[Fe]=!0,Un[en]=Un.values,Un.__toJS=Un.toArray,Un.__toStringMapper=Me,Un.inspect=Un.toSource=function(){return this.toString()},Un.chain=Un.flatMap,Un.contains=Un.includes,Oe(n,{flip:function(){return se(this,Jt(this))},mapEntries:function(t,e){var n=this,r=0;return se(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return se(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Rn=n.prototype;return Rn[qe]=!0,Rn[en]=Un.entries,Rn.__toJS=Un.toObject,Rn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Me(t)},Oe(r,{toKeyedSeq:function(){return new Kt(this,!1)},filter:function(t,e){return se(this,Yt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return se(this,Qt(this,!1))},slice:function(t,e){return se(this,Zt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=g(t,t<0?this.count():this.size);var r=this.slice(0,t);return se(this,1===n?r:r.concat(h(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return se(this,ee(this,t,!1))},get:function(t,e){return(t=v(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=v(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return se(this,function(t,e){var n=le(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(Qe,r),s=0;return new w(function(){return(!i||s%2)&&(i=o.next()).done?i:s%2?k(n,s++,e):k(n,s++,i.value,i)})},n}(this,t))},interleave:function(){var t=[this].concat(h(arguments)),e=oe(this.toSeq(),B.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),se(this,n)},keySeq:function(){return Q(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return se(this,te(this,t,e,!1))},zip:function(){return se(this,oe(this,Ne,[this].concat(h(arguments))))},zipWith:function(t){var e=h(arguments);return e[0]=this,se(this,oe(this,t,e))}}),r.prototype[ze]=!0,r.prototype[He]=!0,Oe(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Un.includes,i.prototype.contains=i.prototype.includes,Oe(O,n.prototype),Oe(B,r.prototype),Oe(j,i.prototype),Oe(Z,n.prototype),Oe(tt,r.prototype),Oe(et,i.prototype),{Iterable:e,Seq:I,Collection:Y,Map:st,OrderedMap:Ft,List:At,Stack:Te,Set:me,OrderedSet:ke,Record:de,Range:Q,Repeat:J,is:V,fromJS:$}}()},function(t){"use strict";t.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(t){this[t]=this[t].bind(this)},this)}}},function(t,e){var n;void 0===(n=function(){var t=Math.pow(2,53)-1;return function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}}.apply(e,[]))||(t.exports=n)},function(t,e,n){"use strict";var r=n(0),i=n(68),o=n(2),s=n(1),a=n(3),c=n(10),u=n(65),l=n(87),f=n(39),p=n(83),h=n(81),d=n(4),v=n(226).Spinner,y=n(16).trimScribeContent,m=n(227),g=function(){l.apply(this,arguments)};(g.prototype=Object.create(l.prototype)).constructor=g,Object.assign(g.prototype,l.fn,n(84),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender","onDeleteConfirm","onPositionerClick"],className:"st-block",attributes:function(){return Object.assign(l.fn.attributes.call(this))},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:r.isFunction(this.title)?this.title():this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable","textable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,mergeable:!1,multi_editable:!1,textable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,supressKeyListeners:!1,_previousSelection:"",initialize:function(){},toMarkdown:function(t){return t},toHTML:function(t){return t},withMixin:function(t){if(r.isObject(t)){var e="initialize"+t.mixinName;r.isUndefined(this[e])&&(Object.assign(this,t),this[e]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.editor=this.inner.children[0],this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(t){if(this[t]){var e=u[s.classify(t)];!r.isUndefined(e.requireInputs)&&e.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var t=document.createElement("div");t.classList.add("st-block__inputs"),this.inner.appendChild(t),this.inputs=t}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(t){this[t]&&this.withMixin(u[s.classify(t)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),a.remove(this.el)},loading:function(){r.isUndefined(this.spinner)||this.ready(),this.spinner=new v(o.defaults.spinner),this.spinner.spin(this.el),this.el.classList.add("st--is-loading")},ready:function(){this.el.classList.remove("st--is-loading"),r.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){s.log("toData for "+this.blockID);var t={};this.hasTextBlock()&&(t.text=this.getTextBlockHTML(),t.format="html");var e=['input:not([class="st-paste-block"])','textarea:not([class="st-paste-block"])','select:not([class="st-paste-block"])','button:not([class="st-paste-block"])'].join(",");return this.$(e).length>0&&Array.prototype.forEach.call(this.$("input, textarea, select, button"),function(e){var n=e.getAttribute("data-name")||e.getAttribute("name");if(n)if("number"===e.getAttribute("type"))t[n]=parseInt(e.value);else if("checkbox"===e.getAttribute("type")){var r="";e.getAttribute("data-toggle")?(r="off",!0===e.checked&&(r="on")):!0===e.checked&&(r=e.value),t[n]=r}else"radio"===e.getAttribute("type")?!0===e.checked&&(t[n]=e.value):t[n]=e.value}),t},focus:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.focus()})},focusAtStart:function(){this.focus()},focusAtEnd:function(){this.focus()},blur:function(){Array.prototype.forEach.call(this.getTextBlock(),function(t){t.blur()})},onFocus:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("focus",t._onFocus)})},onBlur:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("blur",t._onBlur)})},_onFocus:function(){this.trigger("blockFocus",this.el)},_onBlur:function(){},onDrop:function(){},onDeleteConfirm:function(t){t.preventDefault(),this.mediator.trigger("block:remove",this.blockID,{focusOnPrevious:!0})},addDeleteControls:function(){var t=this;this.ui.insertAdjacentHTML("beforeend",m()),c.delegate(this.el,".js-st-block-confirm-delete","click",this.onDeleteConfirm),c.delegate(this.el,".js-st-block-deny-delete","click",function(e){e.preventDefault(),t.deleteEl.classList.remove("active")})},onDeleteClick:function(t){t.preventDefault(),t.stopPropagation(),this.isEmpty()?this.onDeleteConfirm.call(this,new CustomEvent("click")):(this.deleteEl=this.el.querySelector(".st-block__ui-delete-controls"),this.deleteEl.classList.toggle("active"))},onPositionerClick:function(t){t.preventDefault(),this.positioner.toggle()},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(a.show(this.editor),a.hide(this.inputs)),l.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(t){if(r.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return i.execTextBlockCommand(this._scribe,t)},queryTextBlockCommandState:function(t){if(r.isUndefined(this._scribe))throw"No Scribe instance found to query command";return i.queryTextBlockCommandState(this._scribe,t)},_handleContentPaste:function(t){setTimeout(this.onContentPasted.bind(this,t,t.currentTarget),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){this.addDeleteControls(),this.positioner=new h(this.el,this.mediator),this._withUIComponent(this.positioner,".st-block-ui-btn__reorder",this.onPositionerClick),this._withUIComponent(new f(this.el,this.mediator)),this._withUIComponent(new p,".st-block-ui-btn__delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var t=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(e){r.isUndefined(e.keyCode)||c.delegate(t.el,".st-text-block","keydown",function(n){(n.metaKey||n.ctrlKey)&&n.keyCode===e.keyCode&&(n.preventDefault(),t.execTextBlockCommand(e.cmd))})})},_initTextBlocks:function(){var t=this;Array.prototype.forEach.call(this.getTextBlock(),function(e){e.addEventListener("keyup",t.getSelectionForFormatter),e.addEventListener("mousedown",t.addMouseupListener.bind(t)),e.addEventListener("DOMNodeInserted",t.clearInsertedStyles)});var e=this.getTextBlock()[0];if(!r.isUndefined(e)&&r.isUndefined(this._scribe)){var n=r.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=i.initScribeInstance(e,this.scribeOptions,n)}},addMouseupListener:function(){var t=this;window.addEventListener("mouseup",function e(){t.getSelectionForFormatter(),window.removeEventListener("mouseup",e)})},getSelectionForFormatter:function(){var t=this;setTimeout(function(){var e="formatter:"+(""===window.getSelection().toString().trim()?"hide":"position");t.mediator.trigger(e,t),d.trigger(e,t)},1)},clearInsertedStyles:function(t){var e=t.target;r.isUndefined(e.tagName)&&(e=e.parentNode),e.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return r.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(t){var e=this._scribe.setContent(t);return y(this._scribe),e},isEmpty:function(){return r.isEmpty(this.getBlockData())},select:function(t){this.el.classList.toggle("st-block--is-selected",t)},split:function(){},asClipboardHTML:function(){}}),g.extend=n(89),t.exports=g},function(t,e,n){"use strict";t.exports=n(141)},function(t,e,n){"use strict";var r=n(3),i=function(t,e){for(var n,r={},i={shared:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),mouseEvent:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),keyEvent:"char charCode key keyCode".split(" ")},o=/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(t.type)?i.shared.concat(i.mouseEvent):/^key/.test(t.type)?i.shared.concat(i.keyEvent):i.shared,s=0;s<o.length;s++)r[n=o[s]]=t[n];return r.currentTarget=e,r.originalEvent=t,r.preventDefault=function(){this.originalEvent&&this.originalEvent.preventDefault()},r.stopPropagation=function(){this.originalEvent&&this.originalEvent.stopPropagation()},r};t.exports.delegate=function(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.addEventListener(n,function(n){for(var s=n.target;s&&s!==t;s=s.parentNode)if(r.matches(s,e)){o.call(s,i(n,s));break}s=null},s)}},function(t,e,n){"use strict";var r=n(0),i=n(3);t.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(t){return this.el.querySelectorAll(t)},render:function(){return this},destroy:function(){r.isUndefined(this.stopListening)||this.stopListening(),i.remove(this.el)},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var t=Object.assign({},r.result(this,"attributes"));this.id&&(t.id=this.id),this.className&&(t["class"]=this.className);var e=i.createElement(this.tagName,t);this._setElement(e)}},_setElement:function(t){return this.el=t,this}}},function(t,e,n){var r=n(25),i=n(18),o=n(128),s=r(s=Object.keys)&&s,a=s?function(t){return i(t)?s(t):[]}:o;t.exports=a},function(t,e,n){function r(t,e){t.focus(),o.removeAllRanges(),o.addRange(e)}var i=n(151),o=window.getSelection();t.exports=function(t,e){if(1==arguments.length){if(!o.rangeCount)return;var n={},s=o.getRangeAt(0),a=s.cloneRange();return a.selectNodeContents(t),a.setEnd(s.endContainer,s.endOffset),n.end=a.toString().length,a.setStart(s.startContainer,s.startOffset),n.start=n.end-a.toString().length,n.atStart=0===a.startOffset,n}for(var c,u,l=e.end&&e.end!==e.start,f=0,s=document.createRange(),p=i(t).select(Node.TEXT_NODE).revisit(!1),h=e.start>t.textContent.length?t.textContent.length:e.start,d=e.end>t.textContent.length?t.textContent.length:e.end,v=e.atStart;c=p.next();){var y=f;f+=c.textContent.length;var m=v?f>h:f>=h;if(!u&&m&&(u=!0,s.setStart(c,h-y),!l)){s.collapse(!0),r(t,s);break}if(l&&f>=d){s.setEnd(c,d-y),r(t,s);break}}}},function(t,e){var n;void 0===(n=function(){return function(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}}.apply(e,[]))||(t.exports=n)},function(t,e){var n;void 0===(n=function(){return function(t){return t&&"object"==typeof t||!1}}.apply(e,[]))||(t.exports=n)},function(t,e,n){"use strict";n.r(e),n.d(e,"createBlocksFromParagraphs",function(){return f}),n.d(e,"getTotalLength",function(){return a}),n.d(e,"isAtStart",function(){return s}),n.d(e,"isAtEnd",function(){return c}),n.d(e,"selectToEnd",function(){return o}),n.d(e,"isSelectedFromStart",function(){return l}),n.d(e,"isSelectedToEnd",function(){return u}),n.d(e,"rangeToHTML",function(){return p}),n.d(e,"trimScribeContent",function(){return h});var r=n(13),i=n(1),o=function(t){var e=(new t.api.Selection).range.cloneRange();return e.setEndAfter(t.el.lastChild,0),e},s=function(t){var e=r(t.el);return 0===e.start&&0===e.end&&e.atStart},a=function(t){var e=(new t.api.Selection).range.cloneRange();return e.selectNodeContents(t.el),e.toString().length},c=function(t){var e=r(t.el);return a(t)===e.end&&e.start===e.end},u=function(t){var e=r(t.el);return a(t)===e.end},l=function(t){var e=r(t.el);return e.atStart&&0===e.start},f=function(t,e){var n,r=document.createElement("div");if(r.appendChild(o(e).extractContents()),function(t){if(null!==t.firstChild){var e=t.firstChild.childNodes[0];e&&"#text"!==e.nodeName&&""===e.innerText&&t.firstChild.removeChild(e)}}(r),!e.allowsBlockElements()){var i=document.createElement("div");i.appendChild(r),r=i}r.childNodes.length>=1&&[].slice.call(r.childNodes).reverse().forEach(function(e){""!==e.innerText&&(n={format:"html",text:e.innerHTML.trim()},t.mediator.trigger("block:create",t.type,n,t.el,{autoFocus:!0}))})},p=function(t){var e=document.createElement("div");return e.appendChild(t.extractContents()),e.innerHTML},h=function(t){var e=t.node.firstDeepestChild(t.el);for("#text"===e.nodeName&&(e.textContent=i.leftTrim(e.textContent));t.el.firstChild&&""===t.el.firstChild.textContent&&-1!=document.createElement(t.el.firstChild.tagName).outerHTML.indexOf("/");)t.el.removeChild(t.el.firstChild);for(;t.el.lastChild&&""===t.el.lastChild.textContent&&-1!=document.createElement(t.el.lastChild.tagName).outerHTML.indexOf("/");)t.el.removeChild(t.el.lastChild);for(;t.el.lastChild&&"BR"===t.el.lastChild.nodeName;)t.el.removeChild(t.el.lastChild)}},function(t){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,e,n){var r=n(26);t.exports=function(t){return!(!t||!r[typeof t])}},function(t,e,n){var r,i;r=[n(202),n(15)],void 0===(i=function(t,e){var n=/^\[object .+?Constructor\]$/,r=Object.prototype,i=Function.prototype.toString,o=r.toString,s=RegExp("^"+t(o).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return function(t){return null!=t&&("[object Function]"==o.call(t)?s.test(i.call(t)):e(t)&&n.test(t)||!1)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(7),n(19),n(15)],void 0===(i=function(t,e,n){var r=Object.prototype.toString,i=e(i=Array.isArray)&&i;return i||function(e){return n(e)&&t(e.length)&&"[object Array]"==r.call(e)||!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";t.exports={Text:n(222),Quote:n(229),Image:n(230),Heading:n(231),List:n(232),Tweet:n(234),Video:n(235)}},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports=function(t,e){var o,s=n(21),a=t,c="Text"===(e=i.classify(e));return r.isUndefined(c)&&(c=!1),c&&(a="<p>"+a),a=a.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(t,e,n){return"<a href='"+n+"'>"+e.replace(/\n/g,"")+"</a>"}),a=(a=i.reverse(i.reverse(a).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(t,e){return">i/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(t,e){return">b/<"+e.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"}))).replace(/^\> (.+)$/gm,"$1"),s.hasOwnProperty(e)&&(o=s[e],!r.isUndefined(o.prototype.toHTML)&&r.isFunction(o.prototype.toHTML)&&(a=o.prototype.toHTML(a))),c&&(a=(a=a.replace(/\n\s*\n/gm,"</p><p>")).replace(/\n/gm,"<br>")),a=(a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,"")).replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),c&&(a+="</p>"),a}},function(t,e,n){"use strict";var r=n(42),i=n(98),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,r){var i;e in t&&("function"!=typeof(i=r)||"[object Function]"!==s.call(i)||!r())||(a?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},u=function(t,e){var n=arguments.length>2?arguments[2]:{},s=r(e);o&&(s=s.concat(Object.getOwnPropertySymbols(e))),i(s,function(r){c(t,r,e[r],n[r])})};u.supportsDescriptors=!!a,t.exports=u},function(t,e,n){"use strict";var r=n(99);t.exports=Function.prototype.bind||r},function(t){var e=Object.prototype.toString,n=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=function(t){return"function"==typeof t&&n.test(t)}},function(t){t.exports={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1}},function(t){t.exports=function(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}},function(t){t.exports=function(t){return"function"==typeof t}},function(t,e,n){var r,i;r=[n(157),n(158),n(5)],void 0===(i=function(t,e,n){"use strict";function r(t){return t.nodeType===Node.TEXT_NODE}function i(t,e){return function(n){return n.nodeType===t.ELEMENT_NODE&&n.className===e}}function o(t,e){return!(e.nodeType!==t.TEXT_NODE||!/^\s*$/.test(e.nodeValue))}function s(t,e){for(;e.childNodes.length>0;)t.insertBefore(e.childNodes[0],e);t.removeChild(e)}return{isInlineElement:function(e){return t.includes(e.nodeName)},isBlockElement:function(t){return e.includes(t.nodeName)},isEmptyInlineElement:function t(e){return!(e.children.length>1)&&(1!==e.children.length||""===e.textContent.trim())&&(0===e.children.length?""===e.textContent.trim():t(e.children[0]))},isText:r,isEmptyTextNode:function(t){var e=!1;try{e=r(t)&&""===t.data}catch(t){e=!0}return e},isWhitespaceOnlyTextNode:o,isTextNodeWithContent:function(t,e){return e.nodeType===t.TEXT_NODE&&!o(t,e)},isFragment:function(t){return t.nodeType===Node.DOCUMENT_FRAGMENT_NODE},isBefore:function(t,e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING},isSelectionMarkerNode:function(t){return i(Node,"scribe-marker")(t)},isCaretPositionNode:function(t){return i(Node,"caret-position")(t)},firstDeepestChild:function t(e){var n=e.firstChild;return n&&"BR"!==n.nodeName?t(n):e},insertAfter:function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)},removeNode:function(t){return t.parentNode.removeChild(t)},getAncestor:function(t,e,n){function r(t){return e===t}if(!r(t))for(var i=t.parentNode;i&&!r(i);){if(n(i))return i;i=i.parentNode}},nextSiblings:function(t){for(var e=n.List();t=t.nextSibling;)e=e.push(t);return e},wrap:function(t,e){return t[0].parentNode.insertBefore(e,t[0]),t.forEach(function(t){e.appendChild(t)}),e},unwrap:s,removeChromeArtifacts:function(e){var r=n.List(e.querySelectorAll(t.map(function(t){return t+'[style*="line-height"]'}).join(",")));r=r.filter(function(t,e){return window.getComputedStyle(e).lineHeight===t.lineHeight}.bind(null,window.getComputedStyle(e)));var i=n.List();r.forEach(function(t){t.style.lineHeight=null,""===t.getAttribute("style")&&t.removeAttribute("style"),"SPAN"===t.nodeName&&0===t.attributes.length&&(i=i.push(t))}),i.forEach(function(t){s(t.parentNode,t)})},elementHasClass:i,hasContent:function(t){return!!(t&&t.children&&t.children.length>0)||!(!t||"BR"!==t.nodeName)}}}.apply(e,r))||(t.exports=i)},function(t){"use strict";t.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(t){var e=this.mediatedEvents[t];t=this.eventNamespace?this.eventNamespace+":"+t:t,this.mediator.on(t,this[e].bind(this))},this)}}},function(t,e,n){"use strict";var r=n(24);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t){"use strict";var e=Function.prototype.toString,n=/^\s*class\b/,r=function(t){try{var r=e.call(t);return n.test(r)}catch(t){return!1}},i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(o)return function(t){try{return!r(t)&&(e.call(t),!0)}catch(t){return!1}}(t);if(r(t))return!1;var n=i.call(t);return"[object Function]"===n||"[object GeneratorFunction]"===n}},function(t,e,n){var r=n(25),i=n(57),o={configurable:!1,enumerable:!1,value:null,writable:!1},s=function(){try{var t={},e=r(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(t){}return n}(),a=s?function(t,e){o.value=e,s(t,"__bindData__",o)}:i;t.exports=a},function(t,e,n){"use strict";var r=n(1);t.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(t,e){r.log("Adding queued item for "+this.blockID+" called "+t),this._queued.push({name:t,deferred:e})},removeQueuedItem:function(t){r.log("Removing queued item for "+this.blockID+" called "+t),this._queued=this._queued.filter(function(e){return e.name!==t})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(t){r.log("Aborting queued request: "+t.name),t.deferred.cancel()},this)}}},function(t){"use strict";function e(t){t.preventDefault(),t.stopPropagation()}function n(t){t.dataTransfer.dropEffect="copy",t.currentTarget.classList.add("st-drag-over"),t.preventDefault(),t.stopPropagation()}function r(t){t.currentTarget.classList.remove("st-drag-over"),t.preventDefault(),t.stopPropagation()}t.exports={dropArea:function(t){return t.addEventListener("dragenter",e),t.addEventListener("dragover",n),t.addEventListener("dragleave",r),t},noDropArea:function(t){return t.removeEventListener("dragenter"),t.removeEventListener("dragover"),t.removeEventListener("dragleave"),t}}},function(t,e,n){var r,i;r=[n(7),n(15)],void 0===(i=function(t,e){var n,r=Object.prototype.toString;return function(i){var o=e(i)?i.length:n;return t(o)&&"[object Arguments]"==r.call(i)||!1}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){var t=Math.pow(2,53)-1;return function(e,n){return n=null==n?t:n,(e=+e)>-1&&e%1==0&&e<n}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(36),n(20),n(37),n(7),n(14),n(75)],void 0===(i=function(t,e,n,r,i,o){var s=Object.prototype.hasOwnProperty;return function(a){if(null==a)return[];i(a)||(a=Object(a));var c=a.length;c=c&&r(c)&&(e(a)||o.nonEnumArgs&&t(a))&&c||0;for(var u=a.constructor,l=-1,f="function"==typeof u&&u.prototype===a,p=Array(c),h=c>0;++l<c;)p[l]=l+"";for(var d in a)h&&n(d,c)||"constructor"==d&&(f||!s.call(a,d))||p.push(d);return p}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(3),s=n(2),a=function(t,e){this.block=t,this.blockID=this.block.getAttribute("id"),this.mediator=e,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(a.prototype,n(6),n(11),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn__reorder",tagName:"a",attributes:function(){return{html:'<svg role="img" class="st-icon">\n                 <use xlink:href="'.concat(s.defaults.iconUrl,'#move"/>\n               </svg>'),draggable:"true","data-icon":"move"}},initialize:function(){this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("dragstart",this.onDragStart),this.el.addEventListener("dragend",this.onDragEnd),r.dropArea(this.block),this.block.addEventListener("drop",this.onDrop)},blockId:function(){return this.block.getAttribute("id")},onMouseDown:function(){i.trigger("block:reorder:down")},onDrop:function(t){t.preventDefault();var e=this.block,n=t.dataTransfer.getData("text/plain"),r=document.querySelector("#"+n);e.id!==n&&o.insertAfter(r,e),this.mediator.trigger("block:rerender",n),i.trigger("block:reorder:dropped",n)},onDragStart:function(t){var e=this.block;this.dragEl=e.cloneNode(!0),this.dragEl.classList.add("st-drag-element"),this.dragEl.style.top="".concat(e.offsetTop,"px"),this.dragEl.style.left="".concat(e.offsetLeft,"px"),e.parentNode.appendChild(this.dragEl),t.dataTransfer.setDragImage(this.dragEl,0,0),t.dataTransfer.setData("text/plain",this.blockId()),this.mediator.trigger("block-controls:hide"),i.trigger("block:reorder:dragstart"),e.classList.add("st-block--dragging")},onDragEnd:function(){i.trigger("block:reorder:dragend"),this.block.classList.remove("st-block--dragging"),this.dragEl.parentNode.removeChild(this.dragEl)},render:function(){return this}}),t.exports=a},function(t){"use strict";t.exports=function(t){return function(e){var n=new e.api.Command("heading");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"heading"===t.type},n.execute=function(){var e={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,n.queryState()?"Text":"Heading",e)},e.commands.heading=n}}},function(t){"use strict";t.exports=function(t){return function(e){var n=new e.api.Command("quote");n.queryEnabled=function(){return t.inline_editable},n.queryState=function(){return"quote"===t.type},n.execute=function(){var e={format:"html",text:t.getScribeInnerContent()};t.mediator.trigger("block:replace",t.el,n.queryState()?"Text":"Quote",e)},e.commands.quote=n}}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,s=n(97),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),d=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===i.call(t),o=s(t),a=e&&"[object String]"===i.call(t),p=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var d=u&&n;if(a&&t.length>0&&!r.call(t,0))for(var v=0;v<t.length;++v)p.push(String(v));if(o&&t.length>0)for(var y=0;y<t.length;++y)p.push(String(y));else for(var m in t)d&&"prototype"===m||!r.call(t,m)||p.push(String(m));if(c)for(var g=function(t){if("undefined"==typeof window||!h)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)g&&"constructor"===l[b]||!r.call(t,l[b])||p.push(l[b]);return p};d.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(s(e)?o.call(e):e)}}}else Object.keys=d;return Object.keys||d},t.exports=d},function(t,e,n){"use strict";var r=n(42),i=n(24),o=n(44)(),s=Object,a=i.call(Function.call,Array.prototype.push),c=i.call(Function.call,Object.prototype.propertyIsEnumerable),u=o?Object.getOwnPropertySymbols:null;t.exports=function(t){if(null==t)throw new TypeError("target must be an object");var e,n,i,l,f,p,h,d=s(t);for(e=1;e<arguments.length;++e){n=s(arguments[e]),l=r(n);var v=o&&(Object.getOwnPropertySymbols||u);if(v)for(f=v(n),i=0;i<f.length;++i)h=f[i],c(n,h)&&a(l,h);for(i=0;i<l.length;++i)p=n[h=l[i]],c(n,h)&&(d[h]=p)}return d}},function(t){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=n(43);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;r<e.length;++r)n[e[r]]=e[r];var i=Object.assign({},n),o="";for(var s in i)o+=s;return t!==o}()?r:function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},function(t,e,n){"use strict";t.exports=n(102)},function(t){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t){"use strict";var e=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,r=Object.getPrototypeOf||function(t){return t.__proto__},i=void 0,o="undefined"==typeof Uint8Array?void 0:r(Uint8Array),s={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":n?r([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":i&&n&&Symbol.asyncIterator?i[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,
"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":n?r(r([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&n?r((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&n?r((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":n?r(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":n?Symbol:void 0,"$ %SymbolPrototype%":n?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":e,"$ %TypedArray%":o,"$ %TypedArrayPrototype%":o?o.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};t.exports=function(t,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+t;if(!(n in s))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===s[n]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return s[n]}},function(t){t.exports=Number.isNaN||function(t){return t!=t}},function(t){var e=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!e(t)&&t!==1/0&&t!==-1/0}},function(t){t.exports=function(t){return t>=0?1:-1}},function(t){t.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},function(t,e,n){"use strict";var r=n(46);t.exports=function(t){var e=r.ToObject(this),n=r.ToInteger(r.ToLength(e.length));if(!r.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");if(0!==n)for(var i,o=arguments[1],s=0;s<n;s++)if(i=e[s],r.Call(t,o,[i,s,e]))return i}},function(t,e,n){"use strict";t.exports=function(){return Array.prototype.find&&1!==[,1].find(function(){return!0})?Array.prototype.find:n(53)}},function(t){function e(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===e||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function i(){h&&f&&(h=!1,f.length?p=f.concat(p):d=-1,p.length&&o())}function o(){if(!h){var t=r(i);h=!0;for(var e=p.length;e;){for(f=p,p=[];++d<e;)f&&f[d].run();d=-1,e=p.length}f=null,h=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function a(){}var c,u,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:e}catch(t){c=e}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(t){u=n}}();var f,p=[],h=!1,d=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new s(t,e)),1!==p.length||h||r(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.prependListener=a,l.prependOnceListener=a,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){(function(e){function r(t){return o(t)?s(t):{}}var i=n(25),o=n(18),s=(n(57),i(s=Object.create)&&s);s||(r=function(){function t(){}return function(n){if(o(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}()),t.exports=r}).call(this,n(17))},function(t){t.exports=function(){}},function(t,e,n){var r=n(134),i=(n(12),n(135));t.exports=function(t){return null==t?"":String(t).replace(i,r)}},function(t){t.exports={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}},function(t){t.exports=/<%=([\s\S]+?)%>/g},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){this.mediator=e,this.initialize(t?t.trim():"")};Object.assign(o.prototype,{initialize:function(t){this.store=this._parseData(t)||{data:[]}},retrieve:function(){return this.store},toString:function(t){return JSON.stringify(this.store,void 0,t)},reset:function(){i.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(t){return this.store.data.push(t),this.store},_parseData:function(t){var e;if(0===t.length)return e;try{var n=JSON.parse(t);r.isUndefined(n.data)||(e=n)}catch(t){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(t)}return e}}),t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(4),o=function(t){this.form=t,this.initialize()};Object.assign(o.prototype,{initialize:function(){this.submitBtns=this.form.querySelectorAll("input[type='submit']");var t=[];Array.prototype.forEach.call(this.submitBtns,function(e){t.push(e.getAttribute("value"))}),this.submitBtnTitles=t,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(t,e){Array.prototype.forEach.call(this.submitBtns,function(t){t.setAttribute("value",e)})},resetSubmitButton:function(){var t=this.submitBtnTitles;Array.prototype.forEach.call(this.submitBtns,function(e,n){e.setAttribute("value",t[n])})},onUploadStart:function(){this.globalUploadCount++,r.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,r.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(){r.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(t){this.setSubmitButton(null,t||i18n.t("general:wait")),Array.prototype.forEach.call(this.submitBtns,function(t){t.setAttribute("disabled","disabled"),t.classList.add("disabled")})},_enableSubmitButton:function(){this.resetSubmitButton(),Array.prototype.forEach.call(this.submitBtns,function(t){t.removeAttribute("disabled"),t.classList.remove("disabled")})},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(t){i.on(t,this[this._events[t]],this)},this)}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(64),a=n(4);t.exports=function(t,e,n,c){var u=[t.blockID,(new Date).getTime(),"raw"].join("-"),l=new FormData,f=t.attachmentName||i.defaults.attachmentName,p=t.attachmentFile||i.defaults.attachmentFile,h=t.attachmentUid||i.defaults.attachmentUid;l.append(f,e.name),l.append(p,e),l.append(h,u),a.trigger("onUploadStart",l),t.resetMessages();var d=t.uploadUrl||i.defaults.uploadUrl,v=s.fetch(d,{body:l,method:"POST",dataType:"json"});return t.addQueuedItem(u,v),v.then(function(e){o.log("Upload callback called"),a.trigger("onUploadStop",e),!r.isUndefined(n)&&r.isFunction(n)&&n.apply(t,arguments,e),t.removeQueuedItem(u)})["catch"](function(e,n,i){o.log("Upload callback error called"),a.trigger("onUploadStop",void 0,i,n,e),!r.isUndefined(c)&&r.isFunction(c)&&c.call(t,n),t.removeQueuedItem(u)}),v}},function(t,e,n){"use strict";n(142);var r=n(143),i=n(144),o=n(2),s=Object.create(null);s.fetch=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(n=Object.assign({},o.defaults.ajaxOptions,n)).jsonp?r(t).promise:fetch(t,n).then(function(t){return"json"===n.dataType?t.json():t.text()}),i(e)},t.exports=s},function(t,e,n){"use strict";t.exports={Ajaxable:n(34),Controllable:n(145),Droppable:n(146),Fetchable:n(147),Pastable:n(148),Uploadable:n(149),MultiEditable:n(150),Textable:n(221)}},function(t){t.exports=function(t,e){return!t!=!e}},function(t){var e=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,n){var r=function(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}(function(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(e,"").match(/[a-zA-Z_]\w*/g)||[]}(t));return n&&"string"==typeof n&&(n=function(t){return function(e){return t+e}}(n)),n?function(t,e,n){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}(t,r,n):r}},function(t,e,n){"use strict";var r=n(0),i=n(152),o=n(2),s=n(191),a=n(192),c=n(197),u={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};t.exports={initScribeInstance:function(t,e,n){e=e||{};var l={debug:o.scribeDebug},f=u;r.isObject(e)&&(l=Object.assign(l,e));var p=new i(t,l);return e.hasOwnProperty("tags")&&(f=Object.assign(u,e.tags)),p.use(s()),p.use(a()),p.use(c({tags:f})),r.isFunction(n)&&n.call(this,p),p},execTextBlockCommand:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return t.el.focus(),n.execute()},queryTextBlockCommandState:function(t,e){if(r.isUndefined(t))throw"No Scribe instance found to query command";var n=t.getCommand(e);return(new t.api.Selection).range&&n.queryState()}}},function(t,e,n){var r;void 0===(r=function(){"use strict";return{isUndoKeyCombination:function(t){return!t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode},isRedoKeyCombination:function(t){return t.shiftKey&&(t.metaKey||t.ctrlKey&&!t.altKey)&&90===t.keyCode}}}.call(e,n,e,t))||(t.exports=r)},function(t,e){var n;void 0===(n=function(){"use strict";return{contentChanged:"scribe:content-changed",legacyContentChanged:"content-changed",destroy:"scribe:destroy"}}.apply(e,[]))||(t.exports=n)},function(t,e){var n;void 0===(n=function(){return function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(73),n(74)],void 0===(i=function(t,e){return function(n,r){return t(n,r,e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(201)],void 0===(i=function(t){return function(e,n,r){for(var i=-1,o=t(e),s=r(e),a=s.length;++i<a;){var c=s[i];if(!1===n(o[c],c,o))break}return e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(7),n(19),n(14),n(204)],void 0===(i=function(t,e,n,r){var i=e(i=Object.keys)&&i;return i?function(e){if(e)var o=e.constructor,s=e.length;return"function"==typeof o&&o.prototype===e||"function"!=typeof e&&s&&t(s)?r(e):n(e)?i(e):[]}:r}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(19),n(76)],void 0===(i=function(t,e){var n=/\bthis\b/,r=Object.prototype,i=(i=e.window)&&i.document,o=r.propertyIsEnumerable,s={};return function(){s.funcDecomp=!t(e.WinRTError)&&n.test(function(){return this}),s.funcNames="string"==typeof Function.name;try{s.dom=11===i.createDocumentFragment().nodeType}catch(t){s.dom=!1}try{s.nonEnumArgs=!o.call(arguments,1)}catch(t){s.nonEnumArgs=!0}}(0,0),s}.apply(e,r))||(t.exports=i)},function(t,e,n){(function(t,n){var r;void 0===(r=function(){var r={"function":!0,object:!0},i=r[typeof e]&&e&&!e.nodeType&&e,o=r[typeof t]&&t&&!t.nodeType&&t,s=r[typeof window]&&window;return i&&o&&"object"==typeof n&&n||s!==(this&&this.window)&&s||this}.apply(e,[]))||(t.exports=r)}).call(this,n(205)(t),n(17))},function(t,e){var n;void 0===(n=function(){return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(7),n(15)],void 0===(i=function(t,e){var n={};n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1;var r=Object.prototype.toString;return function(i){return e(i)&&t(i.length)&&n[r.call(i)]||!1}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){return function(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(212)],void 0===(i=function(t){return function(e,n,r){if("function"!=typeof e)return t;if(void 0===n)return e;switch(r){case 1:return function(t){return e.call(n,t)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,o){return e.call(n,t,r,i,o)};case 5:return function(t,r,i,o,s){return e.call(n,t,r,i,o,s)}}return function(){return e.apply(n,arguments)}}}.apply(e,r))||(t.exports=i)},function(t,e,n){"use strict";var r=function(t,e){this.mediator=e,this.block=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(r.prototype,n(6),n(11),{bound:["toggle","show","hide"],className:"st-block-positioner",visibleClass:"active",initialize:function(){},toggle:function(){this.mediator.trigger("block-positioner-select:render",this),this.el.classList.toggle(this.visibleClass)},show:function(){this.el.classList.add(this.visibleClass)},hide:function(){this.el.classList.remove(this.visibleClass)}}),t.exports=r},function(t,e,n){"use strict";var r=n(3),i=["<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>"].join("\n"),o=function(t){this.mediator=t,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(o.prototype,n(6),n(11),{total_blocks:0,bound:["onBlockCountChange","onSelectChange"],className:"st-block-positioner__inner",initialize:function(){this.el.insertAdjacentHTML("beforeend",i),this.select=this.el.querySelector(".st-block-positioner__select"),this.positioner=null,this.select.addEventListener("change",this.onSelectChange)},onBlockCountChange:function(t){t!==this.total_blocks&&(this.total_blocks=t,this.renderPositionList())},onSelectChange:function(){var t=this.select.value;0!==t&&(this.mediator.trigger("block:changePosition",this.positioner.block,t,1===t?"before":"after"),this.positioner.toggle())},renderPositionList:function(){for(var t="<option value='0'>"+i18n.t("general:position")+"</option>",e=1;e<=this.total_blocks;e++)t+="<option value="+e+">"+e+"</option>";this.select.innerHTML=t},renderInBlock:function(t){this.positioner&&this.positioner!==t&&this.positioner.hide(),this.positioner=t,this.select.value=0,r.remove(this.el),t.el.appendChild(this.el)}}),t.exports=o},function(t,e,n){"use strict";var r=n(2),i=function(){this._ensureElement(),this._bindFunctions()};Object.assign(i.prototype,n(6),n(11),{tagName:"a",className:"st-block-ui-btn__delete",attributes:{html:function(){return'<svg role="img" class="st-icon">\n                   <use xlink:href="'.concat(r.defaults.iconUrl,'#cross"/>\n                 </svg>')},"data-icon":"close"}}),t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){var e=t.getAttribute("data-st-name")||t.getAttribute("name");return e||(e="Field"),i.capitalize(e)};t.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var t=this.$(".st-required");Array.prototype.forEach.call(t,function(t){this.validateField(t)}.bind(this)),this.validations.forEach(this.runValidator,this),this.el.classList.toggle("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){0===(t.getAttribute("contenteditable")?t.textContent:t.value).length&&this.setError(t,i18n.t("errors:block_empty",{name:o(t)}))},runValidator:function(t){r.isUndefined(this[t])||this[t].call(this)},setError:function(t,e){var n=this.addMessage(e,"st-msg--error");t.classList.add("st-error"),this.errors.push({field:t,reason:e,msg:n})},resetErrors:function(){this.errors.forEach(function(t){t.field.classList.remove("st-error"),t.msg.remove()}),this.messages.classList.remove("st-block__messages--is-visible"),this.errors=[]}}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(4);t.exports={blockStorage:{},createStore:function(t){this.blockStorage={type:i.underscored(this.type),data:t||{}}},save:function(){var t=this._serializeData();r.isEmpty(t)||this.setData(t)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(t){i.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,t||{})},setAndLoadData:function(t){this.setData(t),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){i.log("loadData for "+this.blockID),o.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){i.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){r.isEmpty(this._getData())||this.beforeLoadingData()}}},function(t,e,n){"use strict";var r=n(13),i=n(0),o=n(1),s=n(2),a=n(4),c=n(21),u=n(3),l=["convertToMarkdown","convertFromMarkdown","formatBar"],f=function(t){this.options=t.options,this.blockOptions=l.reduce(function(e,n){return e[n]=t.options[n],e},{}),this.instance_scope=t.ID,this.mediator=t.mediator,this.editor=t,this.wrapper=t.wrapper,this.blocks=[],this.blockCounts={},this.blockTypes=[],this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,n(6),n(30),n(9),{eventNamespace:"block",mediatedEvents:{create:"createBlock",createBefore:"createBlockBefore",remove:"removeBlock",rerender:"rerenderBlock",replace:"replaceBlock",focusPrevious:"focusPreviousBlock",focusNext:"focusNextBlock",paste:"paste"},initialize:function(){},createBlock:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=Object.assign({autoFocus:!1,focusAtEnd:!1},r),t=o.classify(t),this.canCreateBlock(t)){var i=new c[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t),this.renderBlock(i,n),r.autoFocus?i.focus():r.focusAtEnd&&i.focusAtEnd(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},createBlockBefore:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r=Object.assign({autoFocus:!1,focusAtEnd:!1},r),t=o.classify(t),this.canCreateBlock(t)){var i=new c[t](e,this.instance_scope,this.mediator,this.blockOptions,this.options);this.blocks.push(i),this._incrementBlockTypeCount(t);var s=this.getPreviousBlock(n);s?this.renderBlock(i,s.el):this.renderBlock(i,this.wrapper.querySelector(".st-top-controls")),r.autoFocus?i.focus():r.focusAtEnd&&i.focusAtEnd(),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),this.mediator.trigger("block:created",i),a.trigger(e?"block:create:existing":"block:create:new",i),o.log("Block created of type "+t)}},removeBlock:function(t,e){e=Object.assign({transposeContent:!1,focusOnPrevious:!1,focusOnNext:!1,createNextBlock:!1},e);var n=this.findBlockById(t),i=o.classify(n.type),s=this.getPreviousBlock(n),c=this.getNextBlock(n);if(e.transposeContent&&n.mergeable){if(!s&&1===this.blocks.length)return;if(s&&"list"===s.type)s.focusAtEnd(),s.appendToCurrentItem(n.getScribeInnerContent());else if(s&&s.mergeable)s.appendContent(n.getScribeInnerContent(),{keepCaretPosition:!0});else{if(""!==n.getScribeInnerContent())return;s?s.focusAtEnd():c&&c.focus()}}if(this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(t){return t.blockID!==n.blockID}),n.remove(),s&&c&&this.options.joinListBlocksOnBlockRemove&&"list"===s.type&&"list"===c.type){var u=c._serializeData().listItems;c.remove();var l=s.getCurrentTextEditor(),f=r(l.scribe.el);u.forEach(function(t){s.addListItem(t.content)}),s.focusOn(l,{caretPosition:f.start})}e.focusOnPrevious&&s&&s.focusAtEnd(),e.focusOnNext&&(c?c.focus():e.createNextBlock&&this.createBlock("text",null,null,{autoFocus:!0})),this._decrementBlockTypeCount(i),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),a.trigger("block:remove",t)},replaceBlock:function(t,e,n){var r=this.findBlockById(t.id);this.createBlock(e,n||null,t),this.removeBlock(t.id),r.remove()},renderBlock:function(t,e){var n=this,r=t.render().el;e?u.insertAfter(r,e):this.wrapper.appendChild(r),t.trigger("onRender"),this.options.selectionMouse&&(r.addEventListener("mouseenter",function(){if(n.editor.mouseDown){var e=n.getBlockPosition(t.el);n.mediator.trigger("selection:update",e)}}),r.addEventListener("mousedown",function(e){var r=n.getBlockPosition(t.el),i={mouseEnabled:!0,expand:e.shiftKey||e.metaKey};n.mediator.trigger("selection:start",r,i)}))},rerenderBlock:function(t){var e=this.findBlockById(t);i.isUndefined(e)||e.isEmpty()||!e.drop_options.re_render_on_reorder||e.beforeLoadingData()},getPreviousBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<1)){var n=this.wrapper.querySelectorAll(".st-block")[e-1];return this.findBlockById(n.getAttribute("id"))}},getNextBlock:function(t){var e=this.getBlockPosition(t.el);if(!(e<0||e>=this.blocks.length-1))return this.findBlockById(this.wrapper.querySelectorAll(".st-block")[e+1].getAttribute("id"))},getBlockPosition:function(t){return Array.prototype.indexOf.call(this.wrapper.querySelectorAll(".st-block"),t)},focusPreviousBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({force:!1},e);var n=this.findBlockById(t);if(n&&(n.mergeable||e.force)){var r=this.getPreviousBlock(n);r&&r.mergeable?r.focusAtEnd():e.force&&n.focus()}},focusNextBlock:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({force:!1},e);var n=this.findBlockById(t);if(n&&(n.mergeable||e.force)){var r=this.getNextBlock(n);r&&r.mergeable?r.focusAtStart():e.force&&n.focusAtEnd()}},paste:function(t){var e=this,n=o.getBlockBySelection();if(n){n.split();var r=this.getNextBlock(n);if(n.isEmpty()&&this.removeBlock(n.blockID),r)return void t.forEach(function(t){e.createBlockBefore(t.type,t.data,r,{focusAtEnd:!0})})}t.forEach(function(t){e.createBlock(t.type,t.data,void 0,{focusAtEnd:!0})})},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(t){return this.blockLimitReached()?(o.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(t)?!!this.canAddBlockType(t)||(o.log("Block Limit reached for type "+t),!1):(o.log("Block type not available "+t),!1)},validateBlockTypesExist:function(t){if(s.skipValidation||!t)return!1;(this.required||[]).forEach(function(t){if(this.isBlockTypeAvailable(t))if(0===this._getBlockTypeCount(t))o.log("Failed validation on required block type "+t),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:t})});else{if(this.getBlocksByType(t).filter(function(t){return!t.isEmpty()}).length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:t})}),o.log("A required block type "+t+" is empty")}},this)},findBlockById:function(t){return this.blocks.find(function(e){return e.blockID===t})},getBlocksByType:function(t){return this.blocks.filter(function(e){return o.classify(e.type)===t})},getBlocksByIDs:function(t){return this.blocks.filter(function(e){return t.includes(e.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(t){return this.blockTypes.includes(t)},canAddBlockType:function(t){var e=this._getBlockTypeLimit(t);return!(0!==e&&this._getBlockTypeCount(t)>=e)},_setBlocksTypes:function(){this.blockTypes=this.options.blockTypes||Object.keys(c)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!i.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]+1},_decrementBlockTypeCount:function(t){this.blockCounts[t]=i.isUndefined(this.blockCounts[t])?1:this.blockCounts[t]-1},_getBlockTypeCount:function(t){return i.isUndefined(this.blockCounts[t])?0:this.blockCounts[t]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(t){return this.isBlockTypeAvailable(t)?parseInt(i.isUndefined(this.options.blockTypeLimits[t])?0:this.options.blockTypeLimits[t],10):0}}),t.exports=f},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(10),a=n(39),c=n(223),u=function(t,e,n,i,o){this.createStore(t),this.blockID=r.uniqueId("st-block-"),this.instanceID=e,this.mediator=n,this.options=i||{},this.editorOptions=o||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(u.prototype,n(6),n(9),n(11),n(85),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:c,attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return i18n.t("blocks:".concat(this.type,":title"))||i.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=i.toSlug(this.type),this.blockCSSClass},type:"","class":function(){return i.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var t=r.result(this,"editorHTML");this.el.insertAdjacentHTML("beforeend",this.block_template(t)),this.inner=this.el.querySelector(".st-block__inner")},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.el.classList.add("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(t,e,n){this.ui.appendChild(t.render().el),e&&n&&s.delegate(this.ui,e,"click",n)},_initUI:function(){var t=o.createElement("div",{"class":"st-block__ui"});this.el.appendChild(t),this.ui=t,this._initUIComponents()},_initMessages:function(){var t=o.createElement("div",{"class":"st-block__messages"});this.inner.insertBefore(t,this.inner.firstChild),this.messages=t},addMessage:function(t,e){return t=o.createElement("span",{html:t,"class":"st-msg "+e}),this.messages.appendChild(t),this.messages.classList.add("st-block__messages--is-visible"),t},resetMessages:function(){this.messages.innerHTML="",this.messages.classList.remove("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new a(this.el))}}),u.fn=u.prototype,u.extend=n(89),t.exports=u},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <button class="st-block-addition" type="button">\n      <span class="st-block-addition__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#plus"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t){"use strict";t.exports=function(t,e){var n,r=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},Object.assign(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&Object.assign(n.prototype,t),n.__super__=r.prototype,n}},function(t,e,n){"use strict";var r=n(16),i=r.createBlocksFromParagraphs,o=r.isAtStart,s=r.isAtEnd,a=r.isSelectedFromStart,c=r.isSelectedToEnd,u=r.selectToEnd;t.exports=function(t){return function(e){var n=!1;e.el.addEventListener("keydown",function(r){t.supressKeyListeners||("Enter"!==r.key||r.shiftKey?["Left","ArrowLeft","Up","ArrowUp"].indexOf(r.key)>-1?r.shiftKey&&a(e)?(r.preventDefault(),r.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t)):o(e)&&(r.preventDefault(),r.stopPropagation(),t.mediator.trigger("block:focusPrevious",t.blockID)):8===r.keyCode&&o(e)?(r.preventDefault(),n=!0):["Right","ArrowRight","Down","ArrowDown"].indexOf(r.key)>-1&&(r.shiftKey&&c(e)?(r.preventDefault(),r.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t)):s(e)&&(r.preventDefault(),t.mediator.trigger("block:focusNext",t.blockID))):(r.preventDefault(),s(e)?(u(e).extractContents(),t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0})):i(t,e),e.allowsBlockElements()&&""===e.getTextContent()&&e.setContent("<p><br></p>")))}),e.el.addEventListener("keyup",function(e){t.supressKeyListeners||"Backspace"===e.key&&n&&(e.preventDefault(),t.mediator.trigger("block:remove",t.blockID,{transposeContent:!0}),n=!1)})}}},function(t,e,n){"use strict"
;var r=n(0),i=n(2),o=n(3),s=n(10),a=n(236),c=function(t,e,n){this.editor=n,this.options=Object.assign({},i.defaults.formatBar,t||{}),this.commands=this.options.commands,this.mediator=e,this.isShown=!1,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(c.prototype,n(6),n(30),n(9),n(11),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){var t=this.commands.reduce(function(t,e){return t+a(e)},"");this.el.insertAdjacentHTML("beforeend",t),s.delegate(this.el,".st-format-btn","mousedown",this.onFormatButtonClick)},hide:function(){this.block=void 0,this.isShown=!1,this.el.classList.remove("st-format-bar--is-ready"),o.remove(this.el)},show:function(){this.isShown||(this.isShown=!0,this.editor.outer.appendChild(this.el),this.el.classList.add("st-format-bar--is-ready"))},remove:function(){o.remove(this.el)},renderBySelection:function(t){this.block=t,this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var t=window.getSelection().getRangeAt(0).getBoundingClientRect(),e={},n=this.editor.outer.getBoundingClientRect();e.top=t.top-n.top+"px",e.left=(t.left+t.right)/2-this.el.offsetWidth/2-n.left+"px",this.el.style.top=e.top,this.el.style.left=e.left},highlightSelectedButtons:function(){var t=this;[].forEach.call(this.el.querySelectorAll(".st-format-btn"),function(e){var n=e.getAttribute("data-cmd");e.classList.toggle("st-format-btn--is-active",t.block.queryTextBlockCommandState(n)),e=null})},onFormatButtonClick:function(t){if(t.preventDefault(),t.stopPropagation(),r.isUndefined(this.block))throw"Associated block not found";var e=t.currentTarget.getAttribute("data-cmd");return!r.isUndefined(e)&&(this.block.execTextBlockCommand(e),this.highlightSelectedButtons(),document.activeElement.focus(),!1)}}),t.exports=c},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(4),s=n(62),a=!1,c={bindFormSubmit:function(t){a||(new s(t),t.addEventListener("submit",this.onFormSubmit),a=!0)},onBeforeSubmit:function(t){var e=0;return r.instances.forEach(function(n){e+=n.onFormSubmit(t)}),i.log("Total errors: "+e),e},onFormSubmit:function(t){c.onBeforeSubmit()>0&&(o.trigger("onError"),t.preventDefault())}};t.exports=c},function(t,e,n){t.exports=n(94),n(246)},function(t,e,n){"use strict";n(95),n(96).shim(),n(101).shim(),n(114),n(115).polyfill(),n(116),n(117),n(118);var r=n(1),i={config:n(2),log:r.log,Locales:n(140),Events:n(9),EventBus:n(4),EditorStore:n(61),Submittable:n(62),FileUploader:n(63),BlockMixins:n(65),BlockPositioner:n(81),BlockPositionerSelect:n(82),BlockReorder:n(39),BlockDeletion:n(83),BlockValidations:n(84),BlockStore:n(85),BlockManager:n(86),SimpleBlock:n(87),Block:n(8),Blocks:n(21),FormatBar:n(91),Editor:n(237),toMarkdown:n(245),toHTML:n(22),setDefaults:function(t){Object.assign(i.config.defaults,t||{})},getInstance:r.getInstance,setBlockOptions:function(t,e){var n=i.Blocks[t];void 0!==n&&Object.assign(n.prototype,e||{})},runOnAllInstances:function(t){if(i.Editor.prototype.hasOwnProperty(t)){var e=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(i.config.instances,function(n){n[t].apply(null,e)})}else i.log("method doesn't exist")}};Object.assign(i,n(92)),t.exports=i},function(t,e,n){t.exports=n.p+"178289a66e4bc63fe9a24fba4c8acf36.svg"},function(t,e,n){"use strict";var r=n(23),i=n(43),o=n(45),s=n(100),a=o();r(a,{getPolyfill:o,implementation:i,shim:s}),t.exports=a},function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},function(t){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,r,i){if("[object Function]"!==n.call(r))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var s=0;s<o;s++)r.call(i,t[s],s,t);else for(var a in t)e.call(t,a)&&r.call(i,t[a],a,t)}},function(t){"use strict";var e=Array.prototype.slice,n=Object.prototype.toString;t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=e.call(arguments,1),s=Math.max(0,r.length-o.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var n=r.apply(this,o.concat(e.call(arguments)));return Object(n)===n?n:this}return r.apply(t,o.concat(e.call(arguments)))}),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}},function(t,e,n){"use strict";var r=n(23),i=n(45);t.exports=function(){var t=i();return r(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},function(t,e,n){"use strict";var r=n(23),i=n(46),o=n(53),s=n(54),a=n(113),c=Array.prototype.slice,u=s(),l=function(t){i.RequireObjectCoercible(t);var e=c.call(arguments,1);return u.apply(t,e)};r(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},function(t,e,n){"use strict";var r=n(31),i=n(103),o=n(48),s=o("%TypeError%"),a=o("%SyntaxError%"),c=o("%Array%"),u=o("%String%"),l=o("%Object%"),f=o("%Number%"),p=o("%Symbol%",!0),h=o("%RegExp%"),d=!!p,v=n(49),y=n(50),m=f.MAX_SAFE_INTEGER||Math.pow(2,53)-1,g=n(108),b=n(51),_=n(52),w=n(109),k=parseInt,x=n(24),E=x.call(Function.call,c.prototype.slice),S=x.call(Function.call,u.prototype.slice),T=x.call(Function.call,h.prototype.test,/^0b[01]+$/i),C=x.call(Function.call,h.prototype.test,/^0o[0-7]+$/i),A=x.call(Function.call,h.prototype.exec),I=new h("["+["\x85","\u200b","\ufffe"].join("")+"]","g"),O=x.call(Function.call,h.prototype.test,I),B=x.call(Function.call,h.prototype.test,/^[-+]0x[0-9a-f]+$/i),j=x.call(Function.call,u.prototype.charCodeAt),D=x.call(Function.call,Object.prototype.toString),L=Math.floor,M=Math.abs,N=Object.create,P=l.getOwnPropertyDescriptor,U=l.isExtensible,R=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),F=new RegExp("(^["+R+"]+)|(["+R+"]+$)","g"),q=x.call(Function.call,u.prototype.replace),z=n(110),H=n(112),$=g(g({},z),{Call:function(t,e){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(t))throw new s(t+" is not a function");return t.apply(e,n)},ToPrimitive:i,ToNumber:function(t){var e=w(t)?t:i(t,f);if("symbol"==typeof e)throw new s("Cannot convert a Symbol value to a number");if("string"==typeof e){if(T(e))return this.ToNumber(k(S(e,2),2));if(C(e))return this.ToNumber(k(S(e,2),8));if(O(e)||B(e))return NaN;var n=function(t){return q(t,F,"")}(e);if(n!==e)return this.ToNumber(n)}return f(e)},ToInt16:function(t){var e=this.ToUint16(t);return e>=32768?e-65536:e},ToInt8:function(t){var e=this.ToUint8(t);return e>=128?e-256:e},ToUint8:function(t){var e=this.ToNumber(t);if(v(e)||0===e||!y(e))return 0;var n=b(e)*L(M(e));return _(n,256)},ToUint8Clamp:function(t){var e=this.ToNumber(t);if(v(e)||e<=0)return 0;if(e>=255)return 255;var n=L(t);return n+.5<e?n+1:e<n+.5?n:n%2!=0?n+1:n},ToString:function(t){if("symbol"==typeof t)throw new s("Cannot convert a Symbol value to a string");return u(t)},ToObject:function(t){return this.RequireObjectCoercible(t),l(t)},ToPropertyKey:function(t){var e=this.ToPrimitive(t,u);return"symbol"==typeof e?e:this.ToString(e)},ToLength:function(t){var e=this.ToInteger(t);return e<=0?0:e>m?m:e},CanonicalNumericIndexString:function(t){if("[object String]"!==D(t))throw new s("must be a string");if("-0"===t)return-0;var e=this.ToNumber(t);return this.SameValue(this.ToString(e),t)?e:void 0},RequireObjectCoercible:z.CheckObjectCoercible,IsArray:c.isArray||function(t){return"[object Array]"===D(t)},IsConstructor:function(t){return"function"==typeof t&&!!t.prototype},IsExtensible:Object.preventExtensions?function(t){return!w(t)&&U(t)}:function(){return!0},IsInteger:function(t){if("number"!=typeof t||v(t)||!y(t))return!1;var e=M(t);return L(e)===e},IsPropertyKey:function(t){return"string"==typeof t||"symbol"==typeof t},IsRegExp:function(t){if(!t||"object"!=typeof t)return!1;if(d){var e=t[p.match];if(void 0!==e)return z.ToBoolean(e)}return H(t)},SameValueZero:function(t,e){return t===e||v(t)&&v(e)},GetV:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return this.ToObject(t)[e]},GetMethod:function(t,e){if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var n=this.GetV(t,e);if(null!=n){if(!this.IsCallable(n))throw new s(e+"is not a function");return n}},Get:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");return t[e]},Type:function(t){return"symbol"==typeof t?"Symbol":z.Type(t)},SpeciesConstructor:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");var n=t.constructor;if(void 0===n)return e;if("Object"!==this.Type(n))throw new s("O.constructor is not an Object");var r=d&&p.species?n[p.species]:void 0;if(null==r)return e;if(this.IsConstructor(r))return r;throw new s("no constructor found")},CompletePropertyDescriptor:function(t){if(!this.IsPropertyDescriptor(t))throw new s("Desc must be a Property Descriptor");return this.IsGenericDescriptor(t)||this.IsDataDescriptor(t)?(r(t,"[[Value]]")||(t["[[Value]]"]=void 0),r(t,"[[Writable]]")||(t["[[Writable]]"]=!1)):(r(t,"[[Get]]")||(t["[[Get]]"]=void 0),r(t,"[[Set]]")||(t["[[Set]]"]=void 0)),r(t,"[[Enumerable]]")||(t["[[Enumerable]]"]=!1),r(t,"[[Configurable]]")||(t["[[Configurable]]"]=!1),t},Set:function(t,e,n,r){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");if("Boolean"!==this.Type(r))throw new s("Throw must be a Boolean");if(r)return t[e]=n,!0;try{t[e]=n}catch(t){return!1}},HasOwnProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return r(t,e)},HasProperty:function(t,e){if("Object"!==this.Type(t))throw new s("O must be an Object");if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");return e in t},IsConcatSpreadable:function(t){if("Object"!==this.Type(t))return!1;if(d&&"symbol"==typeof p.isConcatSpreadable){var e=this.Get(t,Symbol.isConcatSpreadable);if(void 0!==e)return this.ToBoolean(e)}return this.IsArray(t)},Invoke:function(t,e){if(!this.IsPropertyKey(e))throw new s("P must be a Property Key");var n=E(arguments,2),r=this.GetV(t,e);return this.Call(r,t,n)},GetIterator:function(t,e){if(!d)throw new SyntaxError("ES.GetIterator depends on native iterator support.");var n=e;arguments.length<2&&(n=this.GetMethod(t,p.iterator));var r=this.Call(n,t);if("Object"!==this.Type(r))throw new s("iterator must return an object");return r},IteratorNext:function(t,e){var n=this.Invoke(t,"next",arguments.length<2?[]:[e]);if("Object"!==this.Type(n))throw new s("iterator next must return an object");return n},IteratorComplete:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.ToBoolean(this.Get(t,"done"))},IteratorValue:function(t){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterResult) is not Object");return this.Get(t,"value")},IteratorStep:function(t){var e=this.IteratorNext(t);return!0!==this.IteratorComplete(e)&&e},IteratorClose:function(t,e){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(iterator) is not Object");if(!this.IsCallable(e))throw new s("Assertion failed: completion is not a thunk for a Completion Record");var n,r=e,i=this.GetMethod(t,"return");if(void 0===i)return r();try{var o=this.Call(i,t,[])}catch(t){throw n=r(),r=null,t}if(n=r(),r=null,"Object"!==this.Type(o))throw new s("iterator .return must return an object");return n},CreateIterResultObject:function(t,e){if("Boolean"!==this.Type(e))throw new s("Assertion failed: Type(done) is not Boolean");return{value:t,done:e}},RegExpExec:function(t,e){if("Object"!==this.Type(t))throw new s("R must be an Object");if("String"!==this.Type(e))throw new s("S must be a String");var n=this.Get(t,"exec");if(this.IsCallable(n)){var r=this.Call(n,t,[e]);if(null===r||"Object"===this.Type(r))return r;throw new s('"exec" method must return `null` or an Object')}return A(t,e)},ArraySpeciesCreate:function(t,e){if(!this.IsInteger(e)||e<0)throw new s("Assertion failed: length must be an integer >= 0");var n,r=0===e?0:e;if(this.IsArray(t)&&(n=this.Get(t,"constructor"),"Object"===this.Type(n)&&d&&p.species&&null===(n=this.Get(n,p.species))&&(n=void 0)),void 0===n)return c(r);if(!this.IsConstructor(n))throw new s("C must be a constructor");return new n(r)},CreateDataProperty:function(t,e,n){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=P(t,e),i=r||"function"!=typeof U||U(t);if(r&&(!r.writable||!r.configurable)||!i)return!1;var o={configurable:!0,enumerable:!0,value:n,writable:!0};return Object.defineProperty(t,e,o),!0},CreateDataPropertyOrThrow:function(t,e,n){if("Object"!==this.Type(t))throw new s("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(e))throw new s("Assertion failed: IsPropertyKey(P) is not true");var r=this.CreateDataProperty(t,e,n);if(!r)throw new s("unable to create data property");return r},ObjectCreate:function(t,e){if(null!==t&&"Object"!==this.Type(t))throw new s("Assertion failed: proto must be null or an object");if((arguments.length<2?[]:e).length>0)throw new a("es-abstract does not yet support internal slots");if(null===t&&!N)throw new a("native Object.create support is required to create null objects");return N(t)},AdvanceStringIndex:function(t,e,n){if("String"!==this.Type(t))throw new s("S must be a String");if(!this.IsInteger(e)||e<0||e>m)throw new s("Assertion failed: length must be an integer >= 0 and <= 2**53");if("Boolean"!==this.Type(n))throw new s("Assertion failed: unicode must be a Boolean");if(!n)return e+1;if(e+1>=t.length)return e+1;var r=j(t,e);if(r<55296||r>56319)return e+1;var i=j(t,e+1);return i<56320||i>57343?e+1:e+2}});delete $.CheckObjectCoercible,t.exports=$},function(t,e,n){"use strict";t.exports=n(104)},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=n(47),o=n(32),s=n(105),a=n(106);t.exports=function(t){if(i(t))return t;var e,n="default";if(arguments.length>1&&(arguments[1]===String?n="string":arguments[1]===Number&&(n="number")),r&&(Symbol.toPrimitive?e=function(t,e){var n=t[e];if(null!=n){if(!o(n))throw new TypeError(n+" returned for property "+e+" of object "+t+" is not a function");return n}}(t,Symbol.toPrimitive):a(t)&&(e=Symbol.prototype.valueOf)),void 0!==e){var c=e.call(t,n);if(i(c))return c;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(s(t)||a(t))&&(n="string"),function(t,e){if(null==t)throw new TypeError("Cannot call method on "+t);if("string"!=typeof e||"number"!==e&&"string"!==e)throw new TypeError('hint must be "string" or "number"');var n,r,s,a="string"===e?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(n=t[a[s]],o(n)&&(r=n.call(t),i(r)))return r;throw new TypeError("No default value")}(t,"default"===n?"number":n)}},function(t){"use strict";var e=Date.prototype.getDay,n=Object.prototype.toString,r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(r?function(t){try{return e.call(t),!0}catch(t){return!1}}(t):"[object Date]"===n.call(t))}},function(t,e,n){"use strict";var r=Object.prototype.toString;if(n(107)()){var i=Symbol.prototype.toString,o=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==r.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&o.test(i.call(t))}(t)}catch(t){return!1}}}else t.exports=function(){return!1}},function(t,e,n){"use strict";(function(e){var r=e.Symbol,i=n(44);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}}).call(this,n(17))},function(t,e,n){var r=n(24).call(Function.call,Object.prototype.hasOwnProperty),i=Object.assign;t.exports=function(t,e){if(i)return i(t,e);for(var n in e)r(e,n)&&(t[n]=e[n]);return t}},function(t){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,n){"use strict";var r=n(48),i=r("%Object%"),o=r("%TypeError%"),s=r("%String%"),a=n(49),c=n(50),u=n(51),l=n(52),f=n(32),p=n(111),h=n(31),d={ToPrimitive:p,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return a(e)?0:0!==e&&c(e)?u(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(a(e)||0===e||!c(e))return 0;var n=u(e)*Math.floor(Math.abs(e));return l(n,65536)},ToString:function(t){return s(t)},ToObject:function(t){return this.CheckObjectCoercible(t),i(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new o(e||"Cannot call method on "+t);return t},IsCallable:f,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:a(t)&&a(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(h(t,n)&&!e[n])return!1;var r=h(t,"[[Value]]"),i=h(t,"[[Get]]")||h(t,"[[Set]]");if(r&&i)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!h(t,"[[Get]]")&&!h(t,"[[Set]]"))},IsDataDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!(!h(t,"[[Value]]")&&!h(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(!this.IsPropertyDescriptor(t))throw new o("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(h(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),h(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),h(t,"value")&&(e["[[Value]]"]=t.value),h(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),h(t,"get")){var n=t.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");e["[[Get]]"]=n}if(h(t,"set")){var r=t.set;if(void 0!==r&&!this.IsCallable(r))throw new o("setter must be a function");e["[[Set]]"]=r}if((h(e,"[[Get]]")||h(e,"[[Set]]"))&&(h(e,"[[Value]]")||h(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=d},function(t,e,n){"use strict";var r=Object.prototype.toString,i=n(47),o=n(32),s=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===r.call(t)?String:Number)===String||e===Number){var n,s,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(o(t[a[s]])&&(n=t[a[s]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t){return i(t)?t:arguments.length>1?s(t,arguments[1]):s(t)}},function(t,e,n){"use strict";var r=n(31),i=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!a)return"[object RegExp]"===s.call(t);var e=o(t,"lastIndex");return!(!e||!r(e,"value"))&&function(t){try{var e=t.lastIndex;return t.lastIndex=0,i.call(t),!0}catch(t){return!1}finally{t.lastIndex=e}}(t)}},function(t,e,n){"use strict";var r=n(23),i=n(54);t.exports=function(){var t=i();return r(Array.prototype,{find:t},{find:function(){return Array.prototype.find!==t}}),t}},function(){"use strict";Array.prototype.includes||(Array.prototype.includes=function(t){var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1])||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(t===(i=e[r])||t!=t&&i!=i)return!0;r++}return!1})},function(t,e,n){(function(e,n){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */
var r;r=function(){"use strict";function t(t){return"function"==typeof t}function r(){var t=setTimeout;return function(){return t(i,1)}}function i(){for(var t=0;t<x;t+=2)(0,j[t])(j[t+1]),j[t]=void 0,j[t+1]=void 0;x=0}function o(t,e){var n=this,r=new this.constructor(a);void 0===r[L]&&m(r);var i=n._state;if(i){var o=arguments[i-1];T(function(){return y(i,r,o,n._result)})}else d(n,r,t,e);return r}function s(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(a);return l(e,t),e}function a(){}function c(t){try{return t.then}catch(t){return U.error=t,U}}function u(e,n,r){n.constructor===e.constructor&&r===o&&n.constructor.resolve===s?function(t,e){e._state===N?p(t,e._result):e._state===P?h(t,e._result):d(e,void 0,function(e){return l(t,e)},function(e){return h(t,e)})}(e,n):r===U?(h(e,U.error),U.error=null):void 0===r?p(e,n):t(r)?function(t,e,n){T(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?l(t,n):p(t,n))},function(e){r||(r=!0,h(t,e))},t._label);!r&&i&&(r=!0,h(t,i))},t)}(e,n,r):p(e,n)}function l(t,e){var n,r;t===e?h(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?p(t,e):u(t,e,c(e)))}function f(t){t._onerror&&t._onerror(t._result),v(t)}function p(t,e){t._state===M&&(t._result=e,t._state=N,0!==t._subscribers.length&&T(v,t))}function h(t,e){t._state===M&&(t._state=P,t._result=e,T(f,t))}function d(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+N]=n,i[o+P]=r,0===o&&t._state&&T(v,t)}function v(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?y(n,r,i,o):i(o);t._subscribers.length=0}}function y(e,n,r,i){var o=t(r),s=void 0,a=void 0,c=void 0,u=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return U.error=t,U}}(r,i))===U?(u=!0,a=s.error,s.error=null):c=!0,n===s)return void h(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,c=!0;n._state!==M||(o&&c?l(n,s):u?h(n,a):e===N?p(n,s):e===P&&h(n,s))}function m(t){t[L]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var g,b,_,w,k=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},x=0,E=void 0,S=void 0,T=function(t,e){j[x]=t,j[x+1]=e,2===(x+=2)&&(S?S(i):D())},C="undefined"!=typeof window?window:void 0,A=C||{},I=A.MutationObserver||A.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),B="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,j=new Array(1e3),D=void 0;O?D=function(){return e.nextTick(i)}:I?(b=0,_=new I(i),w=document.createTextNode(""),_.observe(w,{characterData:!0}),D=function(){w.data=b=++b%2}):B?((g=new MessageChannel).port1.onmessage=i,D=function(){return g.port2.postMessage(0)}):D=void 0===C?function(){try{var t=Function("return this")().require("vertx");return void 0!==(E=t.runOnLoop||t.runOnContext)?function(){E(i)}:r()}catch(t){return r()}}():r();var L=Math.random().toString(36).substring(2),M=void 0,N=1,P=2,U={error:null},R=0,F=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[L]||m(this.promise),k(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&p(this.promise,this._result))):h(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===M&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===s){var i=c(t);if(i===o&&t._state!==M)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===q){var l=new n(a);u(l,t,i),this._willSettleAt(l,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===M&&(this._remaining--,t===P?h(r,n):this._result[e]=n),0===this._remaining&&p(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;d(t,void 0,function(t){return n._settledAt(N,e,t)},function(t){return n._settledAt(P,e,t)})},t}(),q=function(){function e(t){this[L]=R++,this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){l(t,e)},function(e){h(t,e)})}catch(e){h(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype["catch"]=function(t){return this.then(null,t)},e.prototype["finally"]=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return q.prototype.then=o,q.all=function(t){return new F(this,t).promise},q.race=function(t){var e=this;return new e(k(t)?function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},q.resolve=s,q.reject=function(t){var e=new this(a);return h(e,t),e},q._setScheduler=function(t){S=t},q._setAsap=function(t){T=t},q._asap=T,q.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=q},q.Promise=q,q},t.exports=r()}).call(this,n(55),n(17))},function(){!function(){"use strict";function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}if("function"==typeof window.CustomEvent)return!1;t.prototype=window.Event.prototype,window.CustomEvent=t}()},function(){!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}()},function(){!function(){"use strict";/Trident/.test(navigator.userAgent)&&Object.defineProperty(HTMLElement.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!(!t||this!==t&&!(this.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY))}}),"function"!=typeof Document.prototype.contains&&Object.defineProperty(Document.prototype,"contains",{writable:!0,enumerable:!1,configurable:!0,value:function(t){return!!t&&this.documentElement.contains(t)}}),"function"!=typeof Range.prototype.intersectsNode&&Object.defineProperty(Range.prototype,"intersectsNode",{writable:!0,enumerable:!1,configurable:!0,value:function(t){if(!t)throw new TypeError("Failed to execute 'intersectsNode' on 'Range': 1 argument required, but only 0 present.");if(this.startContainer.ownerDocument!==t.ownerDocument)return!1;if(!t.parentNode)return!0;var e=document.createRange();e.selectNode(t);var n=this.compareBoundaryPoints(Range.START_TO_END,e),r=this.compareBoundaryPoints(Range.END_TO_START,e);return 1===n&&-1===r}})}()},function(t,e,n){var r=n(120),i=n(28),o=Object.prototype.toString;t.exports=function(t){var e=!0;if(!t)return e;var n=o.call(t),s=t.length;return"[object Array]"==n||"[object String]"==n||"[object Arguments]"==n||"[object Object]"==n&&"number"==typeof s&&i(t.splice)?!s:(r(t,function(){return e=!1}),e)}},function(t,e,n){var r=n(121),i=n(12),o=n(26);t.exports=function(t,e,n){var s,a=t,c=a;if(!a)return c;if(!o[typeof a])return c;e=e&&void 0===n?e:r(e,n,3);for(var u=-1,l=o[typeof a]&&i(a),f=l?l.length:0;++u<f;)if(!1===e(a[s=l[u]],s,t))return c;return c}},function(t,e,n){var r=n(122),i=n(126),o=n(33),s=n(127),a=/^\s*function[ \n\r\t]+\w/,c=/\bthis\b/,u=Function.prototype.toString;t.exports=function(t,e,n){if("function"!=typeof t)return i;if(void 0===e||!("prototype"in t))return t;var l=t.__bindData__;if(void 0===l&&(s.funcNames&&(l=!t.name),!(l=l||!s.funcDecomp))){var f=u.call(t);s.funcNames||(l=!a.test(f)),l||(l=c.test(f),o(t,l))}if(!1===l||!0!==l&&1&l[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return r(t,e)}},function(t,e,n){var r=n(123),i=n(27);t.exports=function(t,e){return arguments.length>2?r(t,17,i(arguments,2),null,e):r(t,1,null,null,e)}},function(t,e,n){var r=n(124),i=n(125),o=n(28),s=n(27),a=[],c=a.push,u=a.unshift;t.exports=function t(e,n,a,l,f,p){var h=1&n,d=4&n,v=16&n,y=32&n;if(!(2&n||o(e)))throw new TypeError;v&&!a.length&&(n&=-17,v=a=!1),y&&!l.length&&(n&=-33,y=l=!1);var m=e&&e.__bindData__;return m&&!0!==m?((m=s(m))[2]&&(m[2]=s(m[2])),m[3]&&(m[3]=s(m[3])),!h||1&m[1]||(m[4]=f),!h&&1&m[1]&&(n|=8),!d||4&m[1]||(m[5]=p),v&&c.apply(m[2]||(m[2]=[]),a),y&&u.apply(m[3]||(m[3]=[]),l),m[1]|=n,t.apply(null,m)):(1==n||17===n?r:i)([e,n,a,l,f,p])}},function(t,e,n){var r=n(56),i=n(18),o=n(33),s=n(27),a=[].push;t.exports=function(t){function e(){if(c){var t=s(c);a.apply(t,arguments)}if(this instanceof e){var o=r(n.prototype),l=n.apply(o,t||arguments);return i(l)?l:o}return n.apply(u,t||arguments)}var n=t[0],c=t[2],u=t[4];return o(e,t),e}},function(t,e,n){var r=n(56),i=n(18),o=n(33),s=n(27),a=[].push;t.exports=function t(e){function n(){var e=d?p:this;if(l){var o=s(l);a.apply(o,arguments)}if((f||y)&&(o||(o=s(arguments)),f&&a.apply(o,f),y&&o.length<h))return u|=16,t([c,m?u:-4&u,o,null,p,h]);if(o||(o=arguments),v&&(c=e[g]),this instanceof n){e=r(c.prototype);var b=c.apply(e,o);return i(b)?b:e}return c.apply(e,o)}var c=e[0],u=e[1],l=e[2],f=e[3],p=e[4],h=e[5],d=1&u,v=2&u,y=4&u,m=8&u,g=c;return o(n,e),n}},function(t){t.exports=function(t){return t}},function(t,e,n){(function(e){var r=n(25),i={};i.funcDecomp=!r(e.WinRTError)&&/\bthis\b/.test(function(){return this}),i.funcNames="string"==typeof Function.name,t.exports=i}).call(this,n(17))},function(t,e,n){var r=n(26),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e,n=t,o=[];if(!n)return o;if(!r[typeof t])return o;for(e in n)i.call(n,e)&&o.push(e);return o}},function(t){var e=Object.prototype.toString;t.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&"[object String]"==e.call(t)||!1}},function(t){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(28);t.exports=function(t,e){if(t){var n=t[e];return r(n)?t[e]():n}}},function(t,e,n){var r=n(133),i=(n(58),n(136)),o=n(12),s=n(60),a=n(137),c=n(138),u=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,f=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,h=/($^)/,d=/['\n\r\t\u2028\u2029\\]/g;t.exports=function(t,e,n){var v=a.imports._.templateSettings||a;t=String(t||""),n=r({},n,v);var y,m=r({},n.imports,v.imports),g=o(m),b=c(m),_=0,w=n.interpolate||h,k="__p += '",x=RegExp((n.escape||h).source+"|"+w.source+"|"+(w===s?p:h).source+"|"+(n.evaluate||h).source+"|$","g");t.replace(x,function(e,n,r,o,s,a){return r||(r=o),k+=t.slice(_,a).replace(d,i),n&&(k+="' +\n__e("+n+") +\n'"),s&&(y=!0,k+="';\n"+s+";\n__p += '"),r&&(k+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),_=a+e.length,e}),k+="';\n";var E=n.variable,S=E;S||(k="with ("+(E="obj")+") {\n"+k+"\n}\n"),k=(y?k.replace(u,""):k).replace(l,"$1").replace(f,"$1;"),k="function("+E+") {\n"+(S?"":E+" || ("+E+" = {});\n")+"var __t, __p = '', __e = _.escape"+(y?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+k+"return __p\n}";try{var T=Function(g,"return "+k).apply(void 0,b)}catch(t){throw t.source=k,t}return e?T(e):(T.source=k,T)}},function(t,e,n){var r=n(12),i=n(26);t.exports=function(t,e,n){var o,s=t,a=s;if(!s)return a;for(var c=arguments,u=0,l="number"==typeof n?2:c.length;++u<l;)if((s=c[u])&&i[typeof s])for(var f=-1,p=i[typeof s]&&r(s),h=p?p.length:0;++f<h;)void 0===a[o=p[f]]&&(a[o]=s[o]);return a}},function(t,e,n){var r=n(59);t.exports=function(t){return r[t]}},function(t,e,n){var r=n(59),i=n(12),o=RegExp("["+i(r).join("")+"]","g");t.exports=o},function(t){var e={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+e[t]}},function(t,e,n){var r=n(58),i={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:n(60),variable:"",imports:{_:{escape:r}}};t.exports=i},function(t,e,n){var r=n(12);t.exports=function(t){for(var e=-1,n=r(t),i=n.length,o=Array(i);++e<i;)o[e]=t[n[e]];return o}},function(t){var e=0;t.exports=function(t){var n=++e;return String(null==t?"":t)+n}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s={en:{general:{"delete":"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link",yes:"Yes",no:"No"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(o.log("Using i18n stub"),window.i18n={t:function(t,e){var n,o,a,c,u=t.split(":");for(o=s[i.language],c=0;c<u.length;c++)a=u[c],r.isUndefined(o[a])||(o=o[a]);return n=o,r.isString(n)?(n.indexOf("__")>=0&&Object.keys(e).forEach(function(t){n=n.replace("__"+t+"__",e[t])}),n):""}}):(o.log("Using i18next"),i18n.init({resStore:s,fallbackLng:i.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),t.exports=s},function(t,e,n){var r,i;i=this,void 0===(r=function(){return i.Eventable=function(){function t(t,e){n[t]=function(t,n,r){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=(new Date).getTime())]=t,"object"==typeof n&&(r=this),t[e](n,r,this),this}}var e=[].slice,n={on:function(t,e,n){return i(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,n){if(!i(this,"once",t,[e,n])||!e)return this;var r=this,o=function(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}(function(){r.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var r,o,s,a,c,u,l,f;if(!this._events||!i(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:Object.keys(this._events),c=0,u=a.length;c<u;c++)if(t=a[c],s=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,f=s.length;l<f;l++)o=s[l],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var n=e.call(arguments,1);if(!i(this,"trigger",t,n))return this;var r=this._events[t],s=this._events.all;return r&&o(r,n),s&&o(s,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;for(var o in"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t),r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},r=/\s+/,i=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(r.test(n)){for(var s=n.split(r),a=0,c=s.length;a<c;a++)t[e].apply(t,[s[a]].concat(i));return!1}return!0},o=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}};return t("listenTo","on"),t("listenToOnce","once"),n.bind=n.on,n.unbind=n.off,n}()}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y.iterable&&(e[Symbol.iterator]=function(){return e}),e}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function a(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=c(e);return e.readAsArrayBuffer(t),n}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:y.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:y.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():y.arrayBuffer&&y.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||g(t))?this._bodyArrayBuffer=l(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t,e,n,r=a(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=c(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var n,r,i=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function d(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}function v(t,e){return new Promise(function(n,r){function i(){a.abort()}var o=new p(t,e);if(o.signal&&o.signal.aborted)return r(new w("Aborted","AbortError"));var a=new XMLHttpRequest;a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new s,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new d(i,r))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.onabort=function(){r(new w("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&y.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",i),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",i)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}n.r(e),n.d(e,"Headers",function(){return s}),n.d(e,"Request",function(){return p}),n.d(e,"Response",function(){return d}),n.d(e,"DOMException",function(){return w}),n.d(e,"fetch",function(){return v});var y={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(y.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},s.prototype["delete"]=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),o(t)},s.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},s.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),o(t)},y.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];d.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})};var w=self.DOMException;try{new w}catch(t){(w=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}v.polyfill=!0,self.fetch||(self.fetch=v,self.Headers=s,self.Request=p,self.Response=d)},function(t){var e=0;t.exports=function(t,n){var r,i,o,s,a=(n=n||{}).prefix||"__jp",c=n.param||"callback",u=n.timeout?n.timeout:15e3,l=document.getElementsByTagName("script")[0]||document.head,f=function(){},p=a+e++;return o=function(){r&&r.parentNode&&r.parentNode.removeChild(r),window[p]=f,i&&clearTimeout(i)},{promise:new Promise(function(e,n){u&&(i=setTimeout(function(){o(),n(new Error("Timeout"))},u)),window[p]=function(t){o(),e(t)},t=(t+=(~t.indexOf("?")?"&":"?")+c+"="+encodeURIComponent(p)).replace("?&","?"),(r=document.createElement("script")).src=t,l.parentNode.insertBefore(r,l),s=function(){window[p]&&(o(),n(new Error("Canceled")))}}),cancel:s}}},function(t){"use strict";t.exports=function(t){var e,n,r=new Promise(function(t,r){e=t,n=r});return t.then(function(t){r.cancelled||e(t)},function(t){r.cancelled||n(t)}),r.cancel=function(){this.cancelled=!0},r}},function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(3),s=n(10);t.exports={mixinName:"Controllable",initializeControllable:function(){r.log("Adding controllable to block "+this.blockID),this.inner.classList.add("st-block__inner--controllable"),this.control_ui=o.createElement("div",{"class":"st-block__control-ui"}),Object.keys(this.controls).forEach(function(t){this.addUiControl(t,this.controls[t].bind(this))},this),this.inner.appendChild(this.control_ui)},getControlTemplate:function(t){return o.createElement("a",{"data-icon":t,"class":"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t,html:'<svg role="img" class="st-icon">\n                  <use xlink:href="'.concat(i.defaults.iconUrl,"#").concat(t,'"/>\n                </svg>')})},addUiControl:function(t,e){var n=this;this.control_ui.appendChild(this.getControlTemplate(t)),s.delegate(this.control_ui,".st-block-control-ui-btn--"+t,"click",function(r){n.selectUiControl(t),e(r)})},selectUiControl:function(t){var e=this;Object.keys(this.controls).forEach(function(t){e.getControlUiBtn(t).classList.remove("st-block-control-ui-btn--selected")}),this.getControlUiBtn(t).classList.add("st-block-control-ui-btn--selected")},getControlUiBtn:function(t){return this.control_ui.querySelector(".st-block-control-ui-btn--"+t)}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(35),c=n(4);t.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){o.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},i.defaults.Block.drop_options,this.drop_options),s.hide(this.editor),this.inputs.insertAdjacentHTML("beforeend",r.template(this.drop_options.html,{block:this,_:r,config:i})),a.dropArea(this.inputs.lastElementChild).addEventListener("drop",this._handleDrop.bind(this)),this.el.classList.add("st-block--droppable"),this.inner.classList.add("st-block__inner--droppable"),this._setupKeyEvents()},_handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.target,n=[].slice.call(t.dataTransfer.types);e.classList.remove("st-dropzone--dragover"),n&&n.some(function(t){return this.valid_drop_file_types.includes(t)},this)&&this.onDrop(t.dataTransfer),c.trigger("block:content:dropped",this.blockID)},focus:function(){this.inner.focus()},_setupKeyEvents:function(){var t=this;this.inner.setAttribute("tabindex",0),this.inner.addEventListener("keyup",function(e){if(e.target===t.inner)switch(e.keyCode){case 13:t.mediator.trigger("block:create","Text",null,t.el,{autoFocus:!0});break;case 8:return void t.onDeleteClick.call(t,new CustomEvent("click"))}})}}},function(t,e,n){"use strict";var r=n(0),i=n(64);t.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(n(34))},fetch:function(t,e,n,o){function s(t,e){t.call(this,e),this.removeQueuedItem(a)}var a=r.uniqueId(this.blockID+"_fetch"),c=i.fetch(t,e);return this.resetMessages(),this.addQueuedItem(a,c),r.isUndefined(n)||c.then(s.bind(this,n)),r.isUndefined(o)||c["catch"](s.bind(this,o)),c}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1);t.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){var t=this;o.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},i.defaults.Block.paste_options,this.paste_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.paste_options.html,this)),Array.prototype.forEach.call(this.$(".st-paste-block"),function(e){e.addEventListener("click",function(){var t=document.createEvent("HTMLEvents");t.initEvent("select",!0,!1),this.dispatchEvent(t)}),e.addEventListener("paste",t._handleContentPaste),e.addEventListener("submit",t._handleContentPaste)})}}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(63);t.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){o.log("Adding uploadable to block "+this.blockID),this.withMixin(n(34)),this.upload_options=Object.assign({},i.defaults.Block.upload_options,this.upload_options),this.inputs.insertAdjacentHTML("beforeend",r.template(this.upload_options.html,this)),Array.prototype.forEach.call(this.inputs.querySelectorAll("button"),function(t){t.addEventListener("click",function(t){t.preventDefault()})}),Array.prototype.forEach.call(this.inputs.querySelectorAll("input"),function(t){t.addEventListener("change",function(t){this.onDrop(t.currentTarget)}.bind(this))}.bind(this))},uploader:function(t,e,n){return s(this,t,e,n)}}},function(t,e,n){"use strict";var r=n(13),i=n(0),o=n(68),s=n(16).trimScribeContent;t.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(t,e){var n,r,s;(r=void 0===t.tagName)?((s=document.createElement("div")).innerHTML=t,n=s.querySelector(".st-block__editor")):n=t;var a=i.uniqueId("editor-");n.setAttribute("data-editorId",a),n.addEventListener("keyup",this.getSelectionForFormatter),n.addEventListener("mouseup",this.getSelectionForFormatter);var c=i.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,u=o.initScribeInstance(n,this.scribeOptions,c);u.setContent(e);var l={node:r?s.removeChild(s.firstChild):n,el:n,scribe:u,id:a};return this.editors[a]=l,l},getCurrentTextEditor:function(){var t=document.activeElement.getAttribute("data-editorId"),e=this.getTextEditor(t);return e&&(this.currentEditor=e),this.currentEditor},appendToTextEditor:function(t,e){var n=this.getTextEditor(t).scribe;s(n);var i=document.createRange();i.selectNodeContents(n.el),i.collapse(!1);var o=new n.api.Selection;o.selection.removeAllRanges(),o.selection.addRange(i);var a=r(n.el);e&&n.insertHTML(e),r(n.el,{start:a.start,end:a.end})},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(t){return this.editors[t]},removeTextEditor:function(t){delete this.editors[t]},execTextBlockCommand:function(t){return o.execTextBlockCommand(this.getCurrentScribeInstance(),t)},queryTextBlockCommandState:function(t){return o.queryTextBlockCommandState(this.getCurrentScribeInstance(),t)}}},function(t,e,n){function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.node=this.start=this.peeked=t,this.root=e,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],t&&this.higher(t))throw new Error("root must be a parent or ancestor to node")}function i(t,e){var n="nextSibling"==t;return function(r,i,s){r=this.compile(r),i=i&&i>0?i:1;for(var a=this.node,c=this.closingTag,u=this._revisit;a;){if(o(n,c)&&a[e])a=a[e],c=!n;else if(1==a.nodeType&&!a[e]&&o(n,c)){if(c=n,!u)continue}else if(a[t])a=a[t],c=!n;else if(a=a.parentNode,c=n,!u)continue;if(!a||this.higher(a,this.root))break;if(r(a)&&this.selects(a,s)&&this.rejects(a,s)){if(--i)continue;return s||(this.node=a),this.closingTag=c,a}}return null}}var o,s;try{o=n(66)}catch(t){o=n(66)}try{s=n(67)}catch(t){
s=n(67)}t.exports=r,r.prototype.reset=function(t){return this.node=t||this.start,this},r.prototype.revisit=function(t){return this._revisit=null==t||t,this},r.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},r.prototype.atOpening=function(){return!this.closingTag},r.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},r.prototype.atClosing=function(){return this.closingTag},r.prototype.next=i("nextSibling","firstChild"),r.prototype.previous=r.prototype.prev=i("previousSibling","lastChild"),r.prototype.select=function(t){return t=this.compile(t),this._selects.push(t),this},r.prototype.selects=function(t,e){var n=this._selects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!0;return!1},r.prototype.reject=function(t){return t=this.compile(t),this._rejects.push(t),this},r.prototype.rejects=function(t,e){var n=this._rejects,r=n.length;if(!r)return!0;for(var i=0;i<r;i++)if(n[i].call(this,t,e))return!1;return!0},r.prototype.higher=function(t){var e=this.root;if(!e)return!1;for(t=t.parentNode;t&&t!=e;)t=t.parentNode;return t!=e},r.prototype.compile=function(t){switch(typeof t){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+s(t,"node."));case"function":return t;default:return function(){return!0}}},r.prototype.peak=r.prototype.peek=function(t,e){return 1==arguments.length&&(e=t,t=!0),(e=null==e?1:e)?e>0?this.next(t,e,!0):this.prev(t,Math.abs(e),!0):this.node},r.prototype.use=function(t){return t(this),this}},function(t,e,n){var r,i;r=[n(153),n(160),n(168),n(171),n(174),n(182),n(187),n(188),n(189),n(29),n(5),n(190),n(70)],void 0===(i=function(t,e,n,r,i,o,s,a,c,u,l,f,p){"use strict";function h(u,p){c.call(this),this.el=u,this.commands={},this.options=f.checkOptions(p),this.commandPatches={},this._plainTextFormatterFactory=new d,this._htmlFormatterFactory=new v,this.api=new o(this),this.Immutable=l;var h=s(this);this.transactionManager=new h,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new a(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),function(){var t=!1,e=this,n={handleEvent:function(n){t||("compositionstart"!==n.type?"compositionend"===n.type?(t=!1,e.transactionManager.run()):e.transactionManager.run():t=!0)}};["compositionstart","compositionend","keydown","cut","paste"].forEach(function(t){this.el.addEventListener(t,n,!1)}.bind(this))}.call(this);var y=l.OrderedSet(this.options.defaultPlugins).sort(f.sortByPlugin("setRootPElement")).filter(f.filterByBlockLevelMode(this.allowsBlockElements())).map(function(e){return t[e]}),m=l.List(this.options.defaultFormatters).filter(function(t){return!!n[t]}).map(function(t){return n[t]}),g=l.List.of(i.events),b=l.List(this.options.defaultCommandPatches).map(function(t){return i.commands[t]}),_=l.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]});l.List().concat(y,m,g,b,_).forEach(function(t){this.use(t())}.bind(this)),this.use(r())}function d(){this.formatters=l.List()}function v(){this.formatters={sanitize:l.List(),normalize:l.List(),"export":l.List()}}return h.prototype=Object.create(c.prototype),h.prototype.node=u,h.prototype.element=h.prototype.node,h.prototype.use=function(t){return t(this),this},h.prototype.setHTML=function(t,e){this.options.undo.enabled&&(this._lastItem.content=t),e&&(this._skipFormatters=!0),this.el.innerHTML!==t&&(this.el.innerHTML=t)},h.prototype.getHTML=function(){return this.el.innerHTML},h.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},h.prototype.getTextContent=function(){return this.el.textContent},h.prototype.pushHistory=function(){var t=this;if(t.options.undo.enabled){var e=t._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(t.getHTML()!==e){var n=new t.api.Selection;n.placeMarkers();var r=t.getHTML();n.removeMarkers();var i=t.undoManager.item(t.undoManager.position);return(t._merge||t._forceMerge)&&i&&t._lastItem==i[0]?t._lastItem.content=r:(t._lastItem={previousItem:t._lastItem,content:r,scribe:t,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},t.undoManager.transact(t._lastItem,!1)),clearTimeout(t._mergeTimer),t._merge=!0,t._mergeTimer=setTimeout(function(){t._merge=!1},t.options.undo.interval),!0}}return!1},h.prototype.getCommand=function(t){return this.commands[t]||this.commandPatches[t]||new this.api.Command(t)},h.prototype.restoreFromHistory=function(t){this._lastItem=t,this.setHTML(t.content,!0),(new this.api.Selection).selectMarkers(),this.trigger(p.legacyContentChanged),this.trigger(p.contentChanged)},h.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},h.prototype.setContent=function(t){this.allowsBlockElements()||(t+="<br>"),this.setHTML(t),this.trigger(p.legacyContentChanged),this.trigger(p.contentChanged)},h.prototype.insertPlainText=function(t){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(t)+"</p>")},h.prototype.insertHTML=function(t){if(t=this._htmlFormatterFactory.format(t),Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject){var e=document.createElement("span");if(e.innerHTML=t,1===e.children.length&&"P"===e.children[0].tagName&&(t=e.children[0].innerHTML),""===this.getTextContent().trim())this.setContent(t);else{var n=document.getSelection().getRangeAt(0),r=document.createElement("span");n.surroundContents(r),r.innerHTML=t,n.collapse(!1),u.removeChromeArtifacts(this.el)}}else this.getCommand("insertHTML").execute(t)},h.prototype.isDebugModeEnabled=function(){return this.options.debug},h.prototype.registerHTMLFormatter=function(t,e){this._htmlFormatterFactory.formatters[t]=this._htmlFormatterFactory.formatters[t].push(e)},h.prototype.registerPlainTextFormatter=function(t){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(t)},h.prototype.destroy=function(){this.trigger(p.destroy)},d.prototype.format=function(t){return this.formatters.reduce(function(t,e){return e(t)},t)},v.prototype=Object.create(d.prototype),v.prototype.constructor=v,v.prototype.format=function(t){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(t,e){return e(t)},t)},v.prototype.formatForExport=function(t){return this.formatters["export"].reduce(function(t,e){return e(t)},t)},h}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(154),n(155),n(156),n(159)],void 0===(i=function(t,e,n,r){"use strict";return{setRootPElement:t,enforcePElements:e,ensureSelectableContainers:n,inlineElementsMode:r}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){""===t.getHTML().trim()&&(window.navigator.userAgent.match(/MSIE 10/)?t.setContent("<p></p>"):t.setContent("<p><br></p>"))}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";return function(){return function(e){function n(e){var n=0;t.List(e.childNodes).filterNot(function(t){return r.isWhitespaceOnlyTextNode(Node,t)}).filter(function(t){return t.nodeType===Node.TEXT_NODE||!r.isBlockElement(t)}).groupBy(function(t,e,r){return 0===e||t.previousSibling===r.get(e-1)?n:n+=1}).forEach(function(t){r.wrap(t.toArray(),document.createElement("p"))})}var r=e.node;e.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,n(e),function(t){for(var e,r=0;e=t.children[r++];)"BLOCKQUOTE"===e.tagName&&n(e)}(e),e.innerHTML})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29),n(5)],void 0===(i=function(t,e){"use strict";function n(e){function i(e){return!!(0===e.children.length&&t.isBlockElement(e)||1===e.children.length&&t.isSelectionMarkerNode(e.children[0]))||!t.isBlockElement(e)&&0===e.children.length&&function(e){return!!t.isCaretPositionNode(e)||""===e.parentNode.textContent.trim()}(e)}for(var o=e.firstElementChild;o;)t.isSelectionMarkerNode(o)||(i(o)&&""===o.textContent.trim()&&!r.includes(o.nodeName)&&-1===o.nodeName.indexOf("-")?o.appendChild(document.createElement("br")):o.children.length>0&&n(o)),o=o.nextElementSibling}var r=e.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(t){t.registerHTMLFormatter("normalize",function(t){var e=document.createElement("div");return e.innerHTML=t,n(e),e.innerHTML})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){return t.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA")}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){return t.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO")}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29)],void 0===(i=function(t){"use strict";return function(){return function(e){e.el.addEventListener("keydown",function(n){if(13===n.keyCode){var r=new e.api.Selection,i=r.range;r.getContaining(function(t){return"LI"===t.nodeName||/^(H[1-6])$/.test(t.nodeName)})||(n.preventDefault(),e.transactionManager.run(function(){i.collapsed||i.deleteContents(),e.el.lastChild&&"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var n=document.createElement("br");i.insertNode(n),i.setEndAfter(n),i.collapse(!1);var o=i.cloneRange();if(e.el.lastChild&&o.setEndAfter(e.el.lastChild),!function(e){for(var n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);n.nextNode();)if(n.currentNode&&(t.hasContent(n.currentNode)||t.isTextNodeWithContent(Node,n.currentNode)))return!0;return!1}(o.cloneContents())){var s=document.createElement("br");i.insertNode(s)}var a=i.cloneRange();a.setStartAfter(n),a.setEndAfter(n),r.selection.removeAllRanges(),r.selection.addRange(a)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(161),n(162),n(163),n(164),n(165),n(166),n(167)],void 0===(i=function(t,e,n,r,i,o,s){"use strict";return{indent:t,insertList:e,outdent:n,redo:r,subscript:i,superscript:o,undo:s}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("indent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.indent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=e.node,r=function(t){e.api.Command.call(this,t)};(r.prototype=Object.create(e.api.Command.prototype)).constructor=r,r.prototype.execute=function(r){function i(t){if(t.size){for(var e=document.createElement(a.nodeName);t.size;)e.appendChild(t.first()),t=t.shift();a.parentNode.insertBefore(e,a.nextElementSibling)}}if(this.queryState()){var o=new e.api.Selection,s=o.range,a=o.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName}),c=o.getContaining(function(t){return"LI"===t.nodeName});e.transactionManager.run(function(){if(c){i(n.nextSiblings(c)),o.placeMarkers();var e=document.createElement("p");e.innerHTML=c.innerHTML,a.parentNode.insertBefore(e,a.nextElementSibling),c.parentNode.removeChild(c)}else{var r=t.List(a.querySelectorAll("li")).filter(function(t){return s.intersectsNode(t)}),u=r.last();i(n.nextSiblings(u)),o.placeMarkers();var l=document.createDocumentFragment();r.forEach(function(t){var e=document.createElement("p");e.innerHTML=t.innerHTML,l.appendChild(e)}),a.parentNode.insertBefore(l,a.nextElementSibling),r.forEach(function(t){t.parentNode.removeChild(t)})}0===a.childNodes.length&&a.parentNode.removeChild(a),o.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,r)},r.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new r("insertOrderedList"),e.commands.insertUnorderedList=new r("insertUnorderedList")}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("outdent");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName});return t.api.Command.prototype.queryEnabled.call(this)&&t.allowsBlockElements()&&!e},t.commands.outdent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(69)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=new e.api.Command("redo");n.execute=function(){e.undoManager.redo()},n.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=n,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){t.isRedoKeyCombination(e)&&(e.preventDefault(),n.execute())})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("subscript");t.commands.subscript=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.Command("superscript");t.commands.superscript=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(69)],void 0===(i=function(t){"use strict";return function(){return function(e){var n=new e.api.Command("undo");n.execute=function(){e.undoManager.undo()},n.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=n,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){t.isUndoKeyCombination(e)&&(e.preventDefault(),n.execute())})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(169),n(170)],void 0===(i=function(t,e){"use strict";return{replaceNbspCharsFormatter:t,escapeHtmlCharactersFormatter:e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=/(\s|&nbsp;)+/g;t.registerHTMLFormatter("export",function(t){return t.replace(e," ")})}}}.call(e,n,e,t))||(t.exports=r)},function(t,e){var n,r,i,o;n=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]),r=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return function(e){return t[e]}}.apply(e,[]),i=function(t,e){var n=/[&<>"'`]/g,r=RegExp(n.source);return function(i){return(i=t(i))&&r.test(i)?i.replace(n,e):i}}.apply(e,[n,r]),void 0===(o=function(t){"use strict";return function(){return function(e){e.registerPlainTextFormatter(t)}}}.apply(e,[i]))||(t.exports=o)},function(t,e,n){var r,i;r=[n(172),n(5)],void 0===(i=function(t,e){"use strict";return function(){return function(n){var r=n.node;n.el.addEventListener("focus",function(){var t=new n.api.Selection;if(t.range&&n.allowsBlockElements()&&t.range.startContainer===n.el){var e=r.firstDeepestChild(n.el),i=t.range;i.setStart(e,0),i.setEnd(e,0),t.selection.removeAllRanges(),t.selection.addRange(i)}}.bind(n));var i=function(){if(!n._skipFormatters){var t=new n.api.Selection,e=t.range,r=function(){e&&t.placeMarkers(),n.setHTML(n._htmlFormatterFactory.format(n.getHTML())),t.selectMarkers()}.bind(n);n.transactionManager.run(r)}delete n._skipFormatters}.bind(n);t(n.el,i),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode){var e=new n.api.Selection,r=e.range,i=e.getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});if(i&&r.collapsed){var o=r.cloneRange();o.setEndAfter(i),""===o.cloneContents().firstChild.textContent&&(t.preventDefault(),n.transactionManager.run(function(){var t=document.createElement("p"),n=document.createElement("br");t.appendChild(n),i.parentNode.insertBefore(t,i.nextElementSibling),r.setStart(t,0),r.setEnd(t,0),e.selection.removeAllRanges(),e.selection.addRange(r)}))}}}),n.allowsBlockElements()&&n.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var e=new n.api.Selection;if(e.range.collapsed){var r=e.getContaining(function(t){return"LI"===t.nodeName});if(r&&""===r.textContent.trim()){t.preventDefault();var i=e.getContaining(function(t){return"UL"===t.nodeName||"OL"===t.nodeName}),o=n.getCommand("OL"===i.nodeName?"insertOrderedList":"insertUnorderedList");o.event=t,o.execute()}}}}),n.el.addEventListener("paste",function(t){if(t.clipboardData&&t.clipboardData.types.length>0)t.preventDefault(),e.List(t.clipboardData.types).includes("text/html")?n.insertHTML(t.clipboardData.getData("text/html")):n.insertPlainText(t.clipboardData.getData("text/plain"));else{var r=new n.api.Selection;r.placeMarkers();var i=document.createElement("div");i.style.height=0,i.style.opacity=0,i.style.overflow="hidden",document.body.appendChild(i),i.setAttribute("contenteditable",!0),i.focus(),setTimeout(function(){var t=i.innerHTML;i.parentNode.removeChild(i),r.selectMarkers(),n.el.focus(),n.insertHTML(t)},1)}})}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(29),n(173)],void 0===(i=function(t,e){function n(e){return!t.isEmptyTextNode(e)&&!t.isSelectionMarkerNode(e)}var r="object"==typeof window?window:void 0,i=e.determineMutationObserver(r);return function(t,e){var r=!1,o=new i(function(t){if(!r&&function(t){return t.some(function(t){return Array.prototype.some.call(t.addedNodes,n)||Array.prototype.some.call(t.removedNodes,n)})}(t)){r=!0;try{e()}catch(t){throw t}finally{setTimeout(function(){r=!1},0)}}});return o.observe(t,{childList:!0,subtree:!0}),o}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){return{determineMutationObserver:function(t){return void 0===t?function(){return{observe:function(){}}}:t.MutationObserver||t.WebKitMutationObserver||t.MozMutationObserver}}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(175),n(176),n(177),n(178),n(179),n(180),n(181)],void 0===(i=function(t,e,n,r,i,o,s){"use strict";return{commands:{bold:t,indent:e,insertHTML:n,insertList:r,outdent:i,createLink:o},events:s}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("bold");e.queryEnabled=function(){var e=(new t.api.Selection).getContaining(function(t){return/^(H[1-6])$/.test(t.nodeName)});return t.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!e},t.commandPatches.bold=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("indent");e.execute=function(e){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range;if("P"===r.commonAncestorContainer.nodeName&&"<br>"===r.commonAncestorContainer.innerHTML){var i=document.createTextNode("\ufeff");r.insertNode(i),r.setStart(i,0),r.setEnd(i,0),n.selection.removeAllRanges(),n.selection.addRange(r)}t.api.CommandPatch.prototype.execute.call(this,e);var o=(n=new t.api.Selection).getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});o&&o.removeAttribute("style")}.bind(this))},t.commandPatches.indent=e}}}.call(e,n,e,t))||(t.exports=r)},function(t,e){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("insertHTML"),n=t.node;e.execute=function(e){t.transactionManager.run(function(){t.api.CommandPatch.prototype.execute.call(this,e),n.removeChromeArtifacts(t.el)}.bind(this))},t.commandPatches.insertHTML=e}}}.apply(e,[]))||(t.exports=n)},function(t,e){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=t.node,n=function(e){t.api.CommandPatch.call(this,e)};(n.prototype=Object.create(t.api.CommandPatch.prototype)).constructor=n,n.prototype.execute=function(n){t.transactionManager.run(function(){if(t.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var r=new t.api.Selection,i=r.getContaining(function(t){return"OL"===t.nodeName||"UL"===t.nodeName});if(i){i.nextElementSibling&&0===i.nextElementSibling.childNodes.length&&e.removeNode(i.nextElementSibling);var o=i.parentNode;o&&/^(H[1-6]|P)$/.test(o.nodeName)&&(r.placeMarkers(),e.insertAfter(i,o),r.selectMarkers(),2===o.childNodes.length&&e.isEmptyTextNode(o.firstChild)&&e.removeNode(o),0===o.childNodes.length&&e.removeNode(o)),e.removeChromeArtifacts(i)}}}.bind(this))},n.prototype.queryState=function(){try{return t.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(t){if("NS_ERROR_UNEXPECTED"==t.name)return!1;throw t}},t.commandPatches.insertOrderedList=new n("insertOrderedList"),t.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=t.node,n=new t.api.CommandPatch("outdent");n.execute=function(){t.transactionManager.run(function(){var n=new t.api.Selection,r=n.range,i=n.getContaining(function(t){return"BLOCKQUOTE"===t.nodeName});if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){n.placeMarkers(),n.selectMarkers(!0);var o=r.cloneContents();i.parentNode.insertBefore(o,i),r.deleteContents(),n.selectMarkers(),""===i.textContent&&i.parentNode.removeChild(i)}else{var s=n.getContaining(function(t){return"P"===t.nodeName});if(s){var a=e.nextSiblings(s);if(a.size){for(var c=document.createElement(i.nodeName);a.size;)c.appendChild(a.first()),a=a.shift();i.parentNode.insertBefore(c,i.nextElementSibling)}n.placeMarkers(),i.parentNode.insertBefore(s,i.nextElementSibling),n.selectMarkers(),""===i.innerHTML&&i.parentNode.removeChild(i)}else t.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},t.commandPatches.outdent=n}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){var e=new t.api.CommandPatch("createLink");t.commandPatches.createLink=e,e.execute=function(e){var n=new t.api.Selection;if(n.isInScribe())if(n.range.collapsed){var r=document.createElement("a");r.setAttribute("href",e),r.textContent=e,n.range.insertNode(r);var i=document.createRange();i.setStartBefore(r),i.setEndAfter(r),n.selection.removeAllRanges(),n.selection.addRange(i)}else t.api.CommandPatch.prototype.execute.call(this,e)}}}}.call(e,n,e,t))||(t.exports=r)},function(t,e){var n;void 0===(n=function(){"use strict";return function(){return function(t){var e=t.node;t.allowsBlockElements()&&t.el.addEventListener("keyup",function(n){if(8===n.keyCode||46===n.keyCode){var r=new t.api.Selection,i=r.getContaining(function(t){return"P"===t.nodeName});i&&t.transactionManager.run(function(){r.placeMarkers(),e.removeChromeArtifacts(i),r.selectMarkers()},!0)}})}}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(183),n(184),n(185),n(186)],void 0===(i=function(t,e,n,r){"use strict";return function(i){this.CommandPatch=t(i),this.Command=e(i),this.Selection=n(i),this.SimpleCommand=r(this,i)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(t){this.commandName=t}return e.prototype.execute=function(e){t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(e){this.commandName=e,this.patch=t.commandPatches[this.commandName]}return e.prototype.execute=function(e){this.patch?this.patch.execute(e):t.transactionManager.run(function(){document.execCommand(this.commandName,!1,e||null)}.bind(this))},e.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},e.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},e}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t){function e(){var t=document.createElement("em");return t.style.display="none",t.classList.add("scribe-marker"),t}function n(t,e){t.insertNode(e),e.nextSibling&&o.isEmptyTextNode(e.nextSibling)&&o.removeNode(e.nextSibling),e.previousSibling&&o.isEmptyTextNode(e.previousSibling)&&o.removeNode(e.previousSibling)}function r(){if(this.selection=i.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var t=this.selection.anchorNode,e=this.selection.anchorOffset,n=this.selection.focusNode,r=this.selection.focusOffset;if(t===n&&r<e){var s=e;e=r,r=s}else if(o.isBefore(n,t)){var a=t,c=e;t=n,e=r,n=a,r=c}this.range=document.createRange(),this.range.setStart(t,e),this.range.setEnd(n,r)}}var i=t.el.ownerDocument,o=t.node;if(i.compareDocumentPosition(t.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var s=t.el.parentNode;s&&o.isFragment(s);)s=s.parentNode;s&&s.getSelection&&(i=s)}return r.prototype.getContaining=function(e){if(this.range){var n=this.range.commonAncestorContainer;return n&&t.el===n||!e(n)?o.getAncestor(n,t.el,e):n}},r.prototype.isInScribe=function(){var e=this.range;return e&&document.contains(t.el)&&t.el.contains(e.startContainer)&&t.el.contains(e.endContainer)},r.prototype.placeMarkers=function(){var t=this.range;if(this.isInScribe()){if(n(t.cloneRange(),e()),!t.collapsed){var r=t.cloneRange();r.collapse(!1),n(r,e())}this.selection.removeAllRanges(),this.selection.addRange(t)}},r.prototype.getMarkers=function(){return t.el.querySelectorAll("em.scribe-marker")},r.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(t){var e=t.parentNode;o.removeNode(t),window.navigator.userAgent.indexOf("MSIE ")||e.normalize()})},r.prototype.selectMarkers=function(t){var e=this.getMarkers();if(e.length){var n,r,i,o,s=document.createRange();n=s,r=e[0],i=r.previousSibling,o=r.nextSibling,i&&i.nodeType===Node.TEXT_NODE?n.setStart(i,i.data.length):o&&o.nodeType===Node.TEXT_NODE?n.setStart(o,0):n.setStartBefore(r),function(t,e){var n=e.previousSibling,r=e.nextSibling;n&&n.nodeType===Node.TEXT_NODE?t.setEnd(n,n.data.length):r&&r.nodeType===Node.TEXT_NODE?t.setEnd(r,0):t.setEndAfter(e)}(s,e.length>=2?e[1]:e[0]),t||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(s)}},r.prototype.isCaretOnNewLine=function(){var t=this.getContaining(function(t){return"P"===t.nodeName});return!!t&&o.isEmptyInlineElement(t)},r}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(t,e){function n(t,n){e.api.Command.call(this,t),this._nodeName=n}return n.prototype=Object.create(t.Command.prototype),n.prototype.constructor=n,n.prototype.queryState=function(){var t=new e.api.Selection;return e.api.Command.prototype.queryState.call(this)&&!!t.getContaining(function(t){return t.nodeName===this._nodeName}.bind(this))},n}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(70)],void 0===(i=function(t){"use strict";return function(e){function n(){this.history=[]}return Object.assign(n.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(e.pushHistory(),e.trigger(t.legacyContentChanged),e.trigger(t.contentChanged))},run:function(t,n){this.start();try{t&&t()}finally{e._forceMerge=!0===n,this.end(),e._forceMerge=!1}}}),n}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";function e(e,n){this._stack=t.List(),this._limit=e,this._fireEvent=n&&n.dispatchEvent,this._ush=n,this.position=0,this.length=0}return e.prototype.transact=function(e,n){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");var r;e.execute(),this.position>0&&this.clearRedo(),n&&this.length?(r=this._stack.first().push(e),this._stack=this._stack.shift().unshift(r)):(r=t.List.of(e),this._stack=this._stack.unshift(r),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",r)},e.prototype.undo=function(){if(!(this.position>=this.length)){for(var t=this._stack.get(this.position),e=t.size;e--;)t.get(e).undo();this.position++,this._dispatch("undo",t)}},e.prototype.redo=function(){if(0!==this.position){this.position--;for(var t=this._stack.get(this.position),e=0;e<t.size;e++)t.get(e).redo();this._dispatch("redo",t)}},e.prototype.item=function(t){return t>=0&&t<this.length?this._stack.get(t).toArray():null},e.prototype.clearUndo=function(t){this._stack=this._stack.take(void 0!==t?t:this.position),this.length=this._stack.size},e.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},e.prototype._dispatch=function(t,e){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(t,{detail:{transactions:e.toArray()},bubbles:!0,cancelable:!1}))},e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){"use strict";function e(){this._listeners={}}return e.prototype.on=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=r.add(n)},e.prototype.off=function(e,n){var r=this._listeners[e]||t.Set();this._listeners[e]=n?r["delete"](n):r.clear()},e.prototype.trigger=function(e,n){for(var r=e.split(":");r.length;){var i=r.join(":");(this._listeners[i]||t.Set()).forEach(function(t){t.apply(null,n)}),r.splice(r.length-1,1)}},e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(5)],void 0===(i=function(t){function e(t){return function(e){return-1!==t.indexOf(e)}}var n=["setRootPElement","enforcePElements","ensureSelectableContainers"],r=["inlineElementsMode"],i={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:n.concat(r),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:i,checkOptions:function(n){var r=n||{};return r.defaultPlugins&&(r.defaultPlugins=r.defaultPlugins.filter(e(i.defaultPlugins))),r.defaultFormatters&&(r.defaultFormatters=r.defaultFormatters.filter(e(i.defaultFormatters))),Object.freeze(function(e,n){var r=t.fromJS(e);return t.fromJS(n).merge(r).toJS()}(r,i))},sortByPlugin:function(t){return function(e,n){return e===t?-1:n===t?1:0}},filterByBlockLevelMode:function(t){return function(e){return-1!==(t?n:r).indexOf(e)}},filterByPluginExists:e}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;void 0===(r=function(){"use strict";return function(){return function(t){t.registerPlainTextFormatter(function(t){return t.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(e,n,e,t))||(t.exports=r)},function(t,e,n){var r,i;r=[n(193),n(194),n(195),n(196)],void 0===(i=function(t,e,n,r){"use strict";return function(i){return i=e.init(i),function(e){var o=new e.api.Command("createLink");o.nodeName="A",o.execute=function(o){var s,a=new e.api.Selection,c=a.range,u=a.getContaining(function(t){return t.nodeName===this.nodeName}.bind(this)),l=u?u.href:"";if(s=o||window.prompt("Enter a link.",l),s=r.run(i.transforms.pre,s),t.emptyLink(s)){if(i&&i.validation){var f=i.validation(s);if(!f.valid)return void window.alert(f.message||"The link is not valid")}u&&(c.selectNode(u),a.selection.removeAllRanges(),a.selection.addRange(c)),s&&(t.hasKnownProtocol(s)||(s=n.process(window,s)),s=r.run(i.transforms.post,s),e.api.SimpleCommand.prototype.execute.call(this,s))}else window.alert("This link appears empty")},o.queryState=function(){return!!(new e.api.Selection).getContaining(function(t){return t.nodeName===this.nodeName}.bind(this))},e.commands.linkPrompt=o}}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){"use strict";var t=[/^https?\:\/\//,/^mailto\:/,/^tel\:/];return{emptyLink:function(t){return/\w/.test(t)},hasKnownProtocol:function(e){return t.some(function(t){return t.test(e)})}}}.apply(e,[]))||(t.exports=n)},function(t,e){var n
;void 0===(n=function(){return{init:function(t){return(t=t||{}).transforms||(t.transforms={}),["pre","post"].forEach(function(e){t.transforms[e]||(t.transforms[e]=[])}),t}}}.apply(e,[]))||(t.exports=n)},function(t,e,n){(function(){var n;void 0===(n=function(){var t=[{regexp:/@/,message:"The URL you entered appears to be an email address. Do you want to add the required \u201cmailto:\u201d prefix?",action:function(t){return"mailto:"+t}},{regexp:/\+?\d+/,message:"The URL you entered appears to be a telephone number. Do you want to add the required \u201ctel:\u201d prefix?",action:function(t){return"tel:"+t}},{regexp:/.+/,message:"The URL you entered appears to be a link. Do you want to add the required \u201chttp://\u201d prefix?",action:function(t){return"http://"+t}}];return{process:function(e,n){for(var r=0;r<t.length;r++){var i=t[r];if(i.regexp.test(n)&&e.confirm(i.message))return i.action(n)}return n}}}.apply(e,[]))||(t.exports=n)}).call(this,n(55))},function(t,e){var n;void 0===(n=function(){return{run:function(t,e){return t.reduce(function(t,e){return e(t)},e)}}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(198),n(199),n(214)],void 0===(i=function(t,e,n){"use strict";return function(r){var i=e(n(r),{tags:{em:{"class":"scribe-marker",style:!0},br:{}}});return function(e){var n=new t(i);e.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){function t(t){var e=t.tags;if(!Object.keys(e).map(function(t){return typeof e[t]}).every(function(t){return"object"===t||"boolean"===t||"function"===t}))throw new Error("The configuration was invalid");this.config=t}function e(t){return-1!==a.indexOf(t.nodeName)}function n(t){return-1!==c.indexOf(t.nodeName)}function r(t){return"EM"===t.nodeName&&'<em class="scribe-marker" style=""></em>'===t.outerHTML}function i(t,e,n){return"function"==typeof t.tags[e]?t.tags[e](n):t.tags[e]}function o(t,e){return void 0===e||"boolean"==typeof e&&!e}function s(t,e,n){var r=t.name.toLowerCase();return!0!==e&&("function"==typeof e[r]?!e[r](t.value,n):void 0===e[r]||!1===e[r]||"string"==typeof e[r]&&e[r]!==t.value)}var a=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],c=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return t.prototype.clean=function(t){const e=document.implementation.createHTMLDocument(""),n=e.createElement("div");return n.innerHTML=t,this._sanitize(e,n),n.innerHTML},t.prototype._sanitize=function(t,a){var c=function(t,e){return t.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(t,a),u=c.firstChild();if(u)do{if(u.nodeType!==Node.TEXT_NODE){if(u.nodeType===Node.COMMENT_NODE){a.removeChild(u),this._sanitize(t,a);break}var l,f=n(u);f&&(l=Array.prototype.some.call(u.childNodes,e));var p=!!a.parentNode,h=e(a)&&e(u)&&p,d=u.nodeName.toLowerCase(),v=i(this.config,d,u);if(f&&l||o(0,v)||!this.config.keepNestedBlockElements&&h){if("SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName)for(;u.childNodes.length>0;)a.insertBefore(u.childNodes[0],u);a.removeChild(u),this._sanitize(t,a);break}if(!r(u))for(var y=0;y<u.attributes.length;y+=1){var m=u.attributes[y];s(m,v,u)&&(u.removeAttribute(m.name),y-=1)}this._sanitize(t,u)}else if(""===u.data.trim()&&(u.previousElementSibling&&e(u.previousElementSibling)||u.nextElementSibling&&e(u.nextElementSibling))){a.removeChild(u),this._sanitize(t,a);break}}while(u=c.nextSibling())},t})?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){var r,i;r=[n(200),n(211)],void 0===(i=function(t,e){return e(t)}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(71),n(72),n(206),n(20),n(7),n(14),n(15),n(78)],void 0===(i=function(t,e,n,r,i,o,s,a){var c;return function u(l,f,p,h,d){if(!o(l))return l;var v=i(f.length)&&(r(f)||a(f));return(v?t:e)(f,function(t,e,r){if(s(t))return h||(h=[]),d||(d=[]),n(l,r,e,u,p,h,d);var i=l[e],o=p?p(i,t,e,l,r):c,a=void 0===o;a&&(o=t),!v&&void 0===o||!a&&(o==o?o===i:i!=i)||(l[e]=o)}),l}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(14)],void 0===(i=function(t){return function(e){return t(e)?e:Object(e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(203)],void 0===(i=function(t){var e=/[.*+?^${}()|[\]\/\\]/g,n=RegExp(e.source);return function(r){return(r=t(r))&&n.test(r)?r.replace(e,"\\$&"):r}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){return function(t){return"string"==typeof t?t:null==t?"":t+""}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(36),n(20),n(37),n(7),n(38),n(75)],void 0===(i=function(t,e,n,r,i,o){var s=Object.prototype.hasOwnProperty;return function(a){for(var c=i(a),u=c.length,l=u&&a.length,f=l&&r(l)&&(e(a)||o.nonEnumArgs&&t(a)),p=-1,h=[];++p<u;){var d=c[p];(f&&n(d,l)||s.call(a,d))&&h.push(d)}return h}}.apply(e,r))||(t.exports=i)},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r,i;r=[n(77),n(36),n(20),n(7),n(207),n(78),n(210)],void 0===(i=function(t,e,n,r,i,o,s){var a;return function(c,u,l,f,p,h,d){for(var v=h.length,y=u[l];v--;)if(h[v]==y)return void(c[l]=d[v]);var m=c[l],g=p?p(m,y,l,c,u):a,b=void 0===g;b&&(g=y,r(y.length)&&(n(y)||o(y))?g=n(m)?m:m?t(m):[]:i(y)||e(y)?g=e(m)?s(m):i(m)?m:{}:b=!1),h.push(y),d.push(g),b?c[l]=f(g,y,p,h,d):(g==g?g!==m:m==m)&&(c[l]=g)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(19),n(208)],void 0===(i=function(t,e){var n=Object.prototype.toString,r=t(r=Object.getPrototypeOf)&&r;return r?function(i){if(!i||"[object Object]"!=n.call(i))return!1;var o=i.valueOf,s=t(o)&&(s=r(o))&&r(s);return s?i==s||r(i)==s:e(i)}:e}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(209),n(15)],void 0===(i=function(t,e){var n=Object.prototype,r=n.hasOwnProperty,i=n.toString;return function(n){var o,s;return!(!e(n)||"[object Object]"!=i.call(n)||!(r.call(n,"constructor")||"function"!=typeof(o=n.constructor)||o instanceof o))&&(t(n,function(t,e){s=e}),void 0===s||r.call(n,s))}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(73),n(38)],void 0===(i=function(t,e){return function(n,r){return t(n,r,e)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(79),n(38)],void 0===(i=function(t,e){return function(n){return t(n,e(n))}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(80),n(213)],void 0===(i=function(t,e){return function(n){return function(){var r=arguments,i=r.length,o=r[0];if(i<2||null==o)return o;var s=r[i-2],a=r[i-1],c=r[3];i>3&&"function"==typeof s?(s=t(s,a,5),i-=2):i-=(s=i>2&&"function"==typeof a?a:null)?1:0,c&&e(r[1],r[2],c)&&(s=3==i?null:s,i=2);for(var u=0;++u<i;){var l=r[u];l&&n(o,l,s)}return o}}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){return function(t){return t}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(37),n(7),n(14)],void 0===(i=function(t,e,n){return function(r,i,o){if(!n(o))return!1;var s=typeof i;if("number"==s)var a=o.length,c=e(a)&&t(i,a);else c="string"==s&&i in o;if(c){var u=o[i];return r==r?r===u:u!=u}return!1}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(215),n(80)],void 0===(i=function(t,e){return function(n,r,i){return r="function"==typeof r&&e(r,i,1),t(n,!0,r)}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(77),n(71),n(79),n(72),n(216),n(217),n(220),n(20),n(14),n(74)],void 0===(i=function(t,e,n,r,i,o,s,a,c,u){var l="[object Arguments]",f="[object Function]",p="[object Object]",h={};h[l]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object Date]"]=h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Number]"]=h[p]=h["[object RegExp]"]=h["[object String]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h["[object Error]"]=h[f]=h["[object Map]"]=h["[object Set]"]=h["[object WeakMap]"]=!1;var d=Object.prototype.toString;return function v(y,m,g,b,_,w,k){var x;if(g&&(x=_?g(y,b,_):g(y)),void 0!==x)return x;if(!c(y))return y;var E=a(y);if(E){if(x=i(y),!m)return t(y,x)}else{var S=d.call(y),T=S==f;if(S!=p&&S!=l&&(!T||_))return h[S]?o(y,S,m):_?y:{};if(x=s(T?{}:y),!m)return n(y,x,u(y))}w||(w=[]),k||(k=[]);for(var C=w.length;C--;)if(w[C]==y)return k[C];return w.push(y),k.push(x),(E?e:r)(y,function(t,e){x[e]=v(t,m,g,e,y,w,k)}),x}}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){var t=Object.prototype.hasOwnProperty;return function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}}.apply(e,[]))||(t.exports=n)},function(t,e,n){var r,i;r=[n(218)],void 0===(i=function(t){var e=/\w*$/;return function(n,r,i){var o=n.constructor;switch(r){case"[object ArrayBuffer]":return t(n);case"[object Boolean]":case"[object Date]":return new o(+n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":var s=n.buffer;return new o(i?t(s):s,n.byteOffset,n.length);case"[object Number]":case"[object String]":return new o(n);case"[object RegExp]":var a=new o(n.source,e.exec(n));a.lastIndex=n.lastIndex}return a}}.apply(e,r))||(t.exports=i)},function(t,e,n){var r,i;r=[n(219),n(19),n(76)],void 0===(i=function(t,e,n){function r(t){return o.call(t,0)}var i=e(i=n.ArrayBuffer)&&i,o=e(o=i&&new i(0).slice)&&o,s=Math.floor,a=e(a=n.Uint8Array)&&a,c=function(){try{var t=e(t=n.Float64Array)&&t,r=new t(new i(10),0,1)&&t}catch(t){}return r}(),u=c?c.BYTES_PER_ELEMENT:0;return o||(r=i&&a?function(t){var e=t.byteLength,n=c?s(e/u):0,r=n*u,o=new i(e);if(n){var l=new c(o,0,n);l.set(new c(t,0,n))}return e!=r&&(l=new a(o,r)).set(new a(t,r)),o}:t(null)),r}.apply(e,r))||(t.exports=i)},function(t,e){var n;void 0===(n=function(){return function(t){return function(){return t}}}.apply(e,[]))||(t.exports=n)},function(t,e){var n;void 0===(n=function(){return function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}}.apply(e,[]))||(t.exports=n)},function(t,e,n){"use strict";var r=n(13),i=n(16),o=i.createBlocksFromParagraphs,s=i.getTotalLength;t.exports={mixinName:"Textable",initializeTextable:function(){this.el.classList.add("st-block--textable")},focusAtEnd:function(){this.focus();var t=s(this._scribe);t>0&&r(this._scribe.el,{start:t})},selectText:function(){var t=document.createRange();this._scribe.allowsBlockElements()?t.setStartAfter(this._scribe.el.firstChild,0):t.selectNodeContents(this._scribe.el),t.collapse(!1);var e=new this._scribe.api.Selection;e.selection.removeAllRanges(),e.selection.addRange(t)},getScribeInnerContent:function(){var t="";if(""!==this._scribe.getTextContent()){var e=document.createElement("div");return e.innerHTML=this.getTextBlockHTML(),(t=e.children&&Array.prototype.slice.call(e.children).reduce(function(t,e){return t+e.innerHTML},"")||e.innerHTML).replace(/^[\s\uFEFF\xA0]+|$/g,"")}return t},getCaretPositionAtEnd:function(){return this.selectText(),r(this._scribe.el)},appendContent:function(t,e){e=e||{},this.focusAtEnd();var n=this.getCaretPositionAtEnd(),i=this.getScribeInnerContent();""!==i&&(t=i+t),""===t&&(window.navigator.userAgent.match(/MSIE 10/)||(t="<br>")),this.setTextBlockHTML(t),this.focus(),e.keepCaretPosition&&0!==n.start&&0!==n.end&&r(this._scribe.el,{start:n.start,end:n.end})},split:function(){o(this,this._scribe)}}},function(t,e,n){"use strict";var r=n(8),i=n(22),o=n(90),s=n(228),a=n(40),c=n(41);t.exports=r.extend({type:"text",editorHTML:'<div class="st-text-block" contenteditable="true"></div>',icon_name:"text",mergeable:!0,textable:!0,toolbarEnabled:!1,configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.use(new c(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},scribeOptions:{allowBlockElements:!0,tags:{p:!0}},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",this.isEmpty())},isEmpty:function(){return""===this._scribe.getTextContent()},asClipboardHTML:function(){var t=this.getBlockData();return"".concat(t.text)}})},function(t,e,n){"use strict";var r=n(224),i=n(88),o=n(225);t.exports=function(t){return"\n    <div class='st-block__inner'>\n      ".concat(t,"\n    </div>\n    ").concat(o(),"\n    ").concat(r(),"\n    ").concat(i(),"\n  ")}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <div class="st-block-addition-top">\n      <div class="st-block-addition-top__button" type="button"></div>\n      <div class="st-block-addition-top__icon">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </div>\n    </div>\n  ')}},function(t,e,n){"use strict";var r=n(2);t.exports=function(){return'\n    <button class="st-block-replacer" type="button">\n      <span class="st-block-replacer__button">\n        <svg role="img" class="st-icon">\n          <use xlink:href="'.concat(r.defaults.iconUrl,'#add-block"/>\n        </svg>\n      </span>\n    </button>\n  ')}},function(t,e,n){"use strict";function r(t,e){for(var n in e)t.style[n]=e[n];return t}function i(t,e){return"string"==typeof t?t:t[e%t.length]}function o(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],a=s(o.x,o.y,e);n.push(o.prefix+a[0]+o.xUnits+" "+a[1]+o.yUnits+o.end)}return n.join(", ")}function s(t,e,n){var r=n*Math.PI/180,i=Math.sin(r),o=Math.cos(r);return[Math.round(1e3*(t*o+e*i))/1e3,Math.round(1e3*(-t*i+e*o))/1e3]}n.r(e),n.d(e,"Spinner",function(){return u});var a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},c={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},u=function(){function t(t){void 0===t&&(t={}),this.opts=a({},c,t)}return t.prototype.spin=function(t){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),r(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),t&&t.insertBefore(this.el,t.firstChild||null),function(t,e){var n=Math.round(e.corners*e.width*500)/1e3+"px",s="none";!0===e.shadow?s="0 2px 4px #000":"string"==typeof e.shadow&&(s=e.shadow);for(var a=function(t){for(var e=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],r=0,i=t.split(",");r<i.length;r++){var o=i[r],s=o.match(e);if(null!==s){var a=+s[2],c=+s[5],u=s[4],l=s[7];0!==a||u||(u=l),0!==c||l||(l=u),u===l&&n.push({prefix:s[1]||"",x:a,y:c,xUnits:u,yUnits:l,end:s[8]})}}return n}(s),c=0;c<e.lines;c++){var u=~~(360/e.lines*c+e.rotate),l=r(document.createElement("div"),{position:"absolute",top:-e.width/2+"px",width:e.length+e.width+"px",height:e.width+"px",background:i(e.fadeColor,c),borderRadius:n,transformOrigin:"left",transform:"rotate("+u+"deg) translateX("+e.radius+"px)"}),f=c*e.direction/e.lines/e.speed;f-=1/e.speed;var p=r(document.createElement("div"),{width:"100%",height:"100%",background:i(e.color,c),borderRadius:n,boxShadow:o(a,u),animation:1/e.speed+"s linear "+f+"s infinite "+e.animation});l.appendChild(p),t.appendChild(l)}}(this.el,this.opts),this},t.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},t}()},function(t){"use strict";t.exports=function(){return'\n    <div class="st-block__ui-delete-controls">\n      <label class="st-block__delete-label">\n        '.concat(i18n.t("general:delete"),"\n      </label>\n      <button class='st-block-ui__confirm js-st-block-confirm-delete' type=\"button\">\n        ").concat(i18n.t("general:yes"),"\n      </button>\n      <button class='st-block-ui__confirm js-st-block-deny-delete' type=\"button\">\n        ").concat(i18n.t("general:no"),"\n      </button>\n    </div>\n  ")}},function(t){"use strict";function e(t,e){var n={format:"html",listItems:e.map(function(t){return{content:t.innerHTML.substr(2)}}).reverse()};t.mediator.trigger("block:create","List",n,t.el,{autoFocus:!0})}function n(t,n){return n.length>0&&e(t,n),[]}t.exports=function(t){function r(e){return-1!==t.editorOptions.blockTypes.indexOf("List")&&e.className.split(" ").filter(function(t){return t.startsWith("MsoListParagraph")}).length>0}return function(i){var o=new i.api.CommandPatch("insertHTML");o.execute=function(o){var s=this;i.transactionManager.run(function(){o=function(t){var e=document.createElement("div");if(e.innerHTML=t,1===e.childNodes.length){var n=[].slice.call(e.childNodes)[0];n&&"P"===n.nodeName&&(t=n.innerHTML)}return t}(o),i.api.CommandPatch.prototype.execute.call(s,o);var a=document.createElement("div");if(a.innerHTML=i.getContent(),a.childNodes.length>1){var c,u=[].slice.call(a.childNodes),l=[],f=!1;r(u[0])?(f=!0,i.setContent("")):i.setContent(u.shift().innerHTML),t.mediator.on("block:created",function e(n){c=n,t.mediator.off("block:created",e)}),u.reverse().forEach(function(e){if(r(e))l.push(e);else{l=n(t,l);var i={format:"html",text:e.innerHTML};t.mediator.trigger("block:create","Text",i,t.el,{autoFocus:!0})}}),l=n(t,l),f&&t.mediator.trigger("block:remove",t.blockID),c.focusAtEnd()}else{var p=a.firstChild;r(p)&&(i.setContent(""),e(t,[p]),t.mediator.trigger("block:remove",t.blockID))}})},i.commandPatches.insertHTML=o}}},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(22),s=n(40),a=n(41),c=r.template(['<blockquote class="st-required st-text-block st-text-block--quote" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string js-cite-input" type="text" />'].join("\n"));t.exports=i.extend({type:"quote",icon_name:"quote",mergeable:!0,textable:!0,toolbarEnabled:!1,editorHTML:function(){return c(this)},configureScribe:function(t){t.use(new s(this)),t.use(new a(this))},loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(o(t.text,this.type)):this.setTextBlockHTML(t.text),t.cite&&(this.$(".js-cite-input")[0].value=t.cite)},asClipboardHTML:function(){var t=this.getBlockData();return"<blockquote>".concat(t.text,"<cite>- ").concat(t.cite,"</cite></blockquote>")}})},function(t,e,n){"use strict";var r=n(3),i=n(8);t.exports=i.extend({type:"image",droppable:!0,uploadable:!0,icon_name:"image",loadData:function(t){this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:t.file.url}))},onDrop:function(t){var e=t.files[0],n="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(e.type)&&(this.loading(),r.hide(this.inputs),this.editor.innerHTML="",this.editor.appendChild(r.createElement("img",{src:n.createObjectURL(e)})),r.show(this.editor),this.uploader(e,function(t){this.setData(t),this.ready()},function(){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))},asClipboardHTML:function(){var t=this.getBlockData(),e=t.file&&t.file.url;if(e)return'<img src="'.concat(e,'" alt="').concat(e,'" />')}})},function(t,e,n){"use strict";var r=n(8),i=n(22),o=n(90),s=n(40),a=n(41);t.exports=r.extend({type:"heading",editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',configureScribe:function(t){t.use(new o(this)),t.use(new s(this)),t.use(new a(this)),t.on("content-changed",this.toggleEmptyClass.bind(this))},mergeable:!0,textable:!0,toolbarEnabled:!1,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(t){this.options.convertFromMarkdown&&"html"!==t.format?this.setTextBlockHTML(i(t.text,this.type)):this.setTextBlockHTML(t.text)},onBlockRender:function(){this.toggleEmptyClass()},toggleEmptyClass:function(){this.el.classList.toggle("st-block--empty",0===this._scribe.getTextContent().length)},asClipboardHTML:function(){var t=this.getBlockData();return"<h2>".concat(t.text,"</h2>")}})},function(t,e,n){"use strict";var r=n(13),i=n(8),o=n(22),s=n(233),a=n(16),c=a.getTotalLength,u=a.rangeToHTML,l=a.selectToEnd;t.exports=i.extend({type:"list",icon_name:"list",multi_editable:!0,mergeable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(t){t.use(new s(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.ul=this.inner.querySelector("ul")},loadData:function(t){var e=this;this.options.convertFromMarkdown&&"html"!==t.format&&(t=this.parseFromMarkdown(t.text)),t.listItems.length?t.listItems.forEach(function(t){e.addListItem(t.content)}):e.addListItem()},parseFromMarkdown:function(t){var e=t.replace(/^ - (.+)$/gm,"$1").split("\n");return{listItems:e=e.filter(function(t){return t.length}).map(function(t){return{content:o(t,this.type)}}.bind(this)),format:"html"}},_serializeData:function(){var t={format:"html",listItems:[]};return this.editorIds.forEach(function(e){var n={content:this.getTextEditor(e).scribe.getContent()};t.listItems.push(n)}.bind(this)),t},addListItemAfterCurrent:function(t){this.addListItem(t,this.getCurrentTextEditor())},addListItem:function(t,e){"<br>"===(t=(t=t||"").trim())&&(t="");var n=this.newTextEditor(this.listItemEditorHTML,t);if(e&&this.ul.lastchild!==e.node){var r=e.node.nextSibling;this.ul.insertBefore(n.node,r);var i=this.editorIds.indexOf(e.id)+1;this.editorIds.splice(i,0,n.id)}else this.ul.appendChild(n.node),this.editorIds.push(n.id);this.focusOn(n)},focus:function(){var t=this.getCurrentTextEditor();t||(t=this.getTextEditor(this.editorIds[0])),this.focusOn(t)},focusOnNeighbor:function(){var t=this.previousListItem()||this.nextListItem();t&&this.focusOn(t)},focusOn:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.scribe,o=new i.api.Selection,s=i.el.lastChild;if(o.range&&(e=o.range.cloneRange()),t.el.focus(),e&&(e.setStartAfter(s,1),e.collapse(!1)),n&&n.focusAtEnd){var a=c(i);a>0&&r(i.el,{start:a})}n&&n.caretPosition&&r(i.el,{start:n.caretPosition})},focusAtStart:function(){var t=this.getTextEditor(this.editorIds[0]);this.focusOn(t)},focusAtEnd:function(){var t=this.editorIds[this.editorIds.length-1];this.appendToTextEditor(t)},removeCurrentListItem:function(){if(1!==this.editorIds.length){var t=this.getCurrentTextEditor(),e=this.editorIds.indexOf(t.id);this.focusOnNeighbor(t),this.editorIds.splice(e,1),this.ul.removeChild(t.node),this.removeTextEditor(t.id)}},appendToCurrentItem:function(t){this.appendToTextEditor(this.getCurrentTextEditor().id,t)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t+1];return void 0!==e?this.getTextEditor(e):null},previousListItem:function(){var t=this.editorIds.indexOf(this.getCurrentTextEditor().id),e=this.editorIds[t-1];return void 0!==e?this.getTextEditor(e):null},asClipboardHTML:function(){var t=this.getBlockData().listItems.map(function(t){return"<li>".concat(t.content,"</li>")}).join("\n");return"<ul>".concat(t,"</ul>")},splitCurrentEditor:function(t){if(0===t.getTextContent().length)return!1;var e=u(l(t));return this.addListItemAfterCurrent(e),!0},split:function(){var t=this.getCurrentTextEditor();if(t){var e=t.scribe;this.splitCurrentEditor(e)&&(this.focusOnNeighbor(),this.addListItemAfterCurrent("")),this.splitListItem(this.getCurrentTextEditor().scribe)}},splitListItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Object.assign({createTextBlock:!1},e),!this.splitCurrentEditor(t)){var n=this.nextListItem();if(n){var r={format:"html",listItems:[]};for(this.removeCurrentListItem(),this.focusOn(n);n;)r.listItems.push({content:n.scribe.getContent()}),this.focusOn(n),this.removeCurrentListItem(),n=this.nextListItem();this.mediator.trigger("block:create","List",r,this.el,{autoFocus:!0})}else this.removeCurrentListItem();e.createTextBlock&&this.mediator.trigger("block:create","Text",null,this.el,{autoFocus:!0})}}})},function(t,e,n){"use strict";n(13);var r=n(16),i=(r.getTotalLength,r.isAtStart),o=r.isAtEnd,s=r.isSelectedFromStart,a=r.isSelectedToEnd;r.rangeToHTML,r.selectToEnd,t.exports=function(t){return function(e){e.el.addEventListener("keydown",function(n){var r;if(!t.supressKeyListeners)if("Enter"!==n.key||n.shiftKey){if(["Left","ArrowLeft","Up","ArrowUp"].indexOf(n.key)>-1){if(n.shiftKey&&s(e))n.preventDefault(),n.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t);else if(i(e)){n.preventDefault();var c=t.previousListItem();c?t.focusOn(c,{focusAtEnd:!0}):t.mediator.trigger("block:focusPrevious",t.blockID)}}else if(["Right","ArrowRight","Down","ArrowDown"].indexOf(n.key)>-1){if(n.shiftKey&&a(e))n.preventDefault(),n.stopPropagation(),document.activeElement&&document.activeElement.blur(),t.mediator.trigger("selection:block",t);else if(o(e)){n.preventDefault();var u=t.nextListItem();u?t.focusOn(u):t.mediator.trigger("block:focusNext",t.blockID)}}else if("Backspace"===n.key&&i(e))if(n.preventDefault(),t.previousListItem())r=e.getContent(),t.removeCurrentListItem(),t.appendToCurrentItem(r);else{var l={format:"html",text:e.getContent()};t.removeCurrentListItem(),t.mediator.trigger("block:createBefore","Text",l,t,{autoFocus:!0}),t.isLastListItem()&&t.mediator.trigger("block:remove",t.blockID)}}else n.preventDefault(),t.splitListItem(e,{createTextBlock:!0})})}}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),s=n(8),a=r.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>"].join("\n"));t.exports=s.extend({type:"tweet",icon_name:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},fetchUrl:function(t){return"/tweets/?tweet_id="+t},loadData:function(t){r.isUndefined(t.status_url)&&(t.status_url="");var e=this.inner.querySelector("twitterwidget");o.remove(e),this.inner.insertAdjacentHTML("afterbegin",a(t));var n=o.createElement("script",{src:"//platform.twitter.com/widgets.js"});this.inner.appendChild(n)},onContentPasted:function(t){var e=t.target.value;this.handleTwitterDropPaste(e)},handleTwitterDropPaste:function(t){if(this.validTweetUrl(t)){var e=t.match(/[^\/]+$/);r.isEmpty(e)||(this.loading(),e=e[0],this.fetch(this.fetchUrl(e),{dataType:"json"},this.onTweetSuccess,this.onTweetFail))}else i.log("Invalid Tweet URL")},validTweetUrl:function(t){return i.isURI(t)&&-1!==t.indexOf("twitter")&&-1!==t.indexOf("status")},onTweetSuccess:function(t){var e={user:{profile_image_url:t.user.profile_image_url,profile_image_url_https:t.user.profile_image_url_https,screen_name:t.user.screen_name,name:t.user.name},id:t.id_str,text:t.text,created_at:t.created_at,entities:t.entities,status_url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str};this.setAndLoadData(e),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(t){var e=t.getData("text/plain");this.handleTwitterDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData();if(t.status_url)return"<p>".concat(t.status_url,"</p>")}})},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(8);t.exports=o.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>',url:function(t){return"https://player.vimeo.com/video/".concat(t)}},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>',url:function(t){return"https://www.youtube.com/embed/".concat(t)}}},type:"video",droppable:!0,pastable:!0,icon_name:"video",loadData:function(t){if(this.providers.hasOwnProperty(t.source)){var e=this.providers[t.source],n="file:"===window.location.protocol?"http:":window.location.protocol,i=e.square?"with-square-media":"with-sixteen-by-nine-media";this.editor.classList.add("st-block__editor--"+i),this.editor.innerHTML=r.template(e.html,{protocol:n,remote_id:t.remote_id,width:this.editor.style.width})}},onContentPasted:function(t){this.handleDropPaste(t.target.value)},matchVideoProvider:function(t,e,n){var i=t.regex.exec(n);return null==i||r.isUndefined(i[1])?{}:{source:e,remote_id:i[1]}},handleDropPaste:function(t){if(i.isURI(t))for(var e in this.providers)this.providers.hasOwnProperty(e)&&this.setAndLoadData(this.matchVideoProvider(this.providers[e],e,t))},onDrop:function(t){var e=t.getData("text/plain");this.handleDropPaste(e)},asClipboardHTML:function(){var t=this.getBlockData(),e=this.providers[t.source].url(t.remote_id);return"<p>".concat(e,"</p>")}})},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){var e=t.name,n=(t.text,t.cmd),i=t.iconName;return'\n    <button type="button" class="st-format-btn st-format-btn--'.concat(e,'" data-cmd="').concat(n,'">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(r.defaults.iconUrl,"#").concat(i,'"/>\n      </svg>\n    </button>\n  ')}},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(1),s=n(3),a=n(9),c=n(4),u=n(92),l=n(238),f=n(240),p=n(242),h=n(86),d=n(91),v=n(61),y=n(243),m=n(82),g=n(244),b=function(t){this.initialize(t)};Object.assign(b.prototype,n(6),n(9),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","blockLimitReached","blockOrderUpdated","onBlockCountChange","renderBlockPositionerSelect"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(t){if(o.log("Init SirTrevor.Editor"),this.options=Object.assign({},i.defaults,t||{}),this.ID=r.uniqueId("st-editor-"),!this._ensureAndSetElements())return!1;!r.isUndefined(this.options.onEditorRender)&&r.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},a),this._bindFunctions(),i.instances.push(this),this.build(),u.bindFormSubmit(this.form)},build:function(){s.hide(this.el),this.errorHandler=new y(this.outer,this.mediator,this.options.errorsContainer),this.store=new v(this.el.value,this.mediator),this.blockManager=new h(this),this.blockAddition=f.create(this),this.BlockAdditionTop=p.create(this),this.blockControls=l.create(this),this.blockPositionerSelect=new m(this.mediator),this.selectionHandler=new g(this.outer,this.mediator,this),this.formatBar=new d(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:rerender",this.blockOrderUpdated),this.mediator.on("block:create",this.blockOrderUpdated),this.mediator.on("block:remove",this.blockOrderUpdated),this.mediator.on("block:replace",this.blockOrderUpdated),this.mediator.on("block:countUpdate",this.onBlockCountChange),this.mediator.on("block-positioner-select:render",this.renderBlockPositionerSelect),this.dataStore="Please use store.retrieve();",this._setEvents(),window.addEventListener("click",this.hideAllTheThings),document.body.addEventListener("keydown",this.disableBackButton),this.createBlocks(),
this.wrapper.classList.add("st-ready"),r.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var t=this.store.retrieve();if(t.data.length>0?t.data.forEach(function(t){this.mediator.trigger("block:create",t.type,t.data)},this):!1!==this.options.defaultType&&this.mediator.trigger("block:create",this.options.defaultType,{}),this.options.focusOnInit){var e=this.wrapper.querySelectorAll(".st-block")[0];e&&this.blockManager.findBlockById(e.getAttribute("id")).focus()}},destroy:function(){this.formatBar.destroy(),this.blockAddition.destroy(),this.blockControls.destroy(),this.blockManager.blocks.forEach(function(t){this.mediator.trigger("block:remove",t.blockID)},this),this.mediator.stopListening(),this.stopListening(),i.instances=i.instances.filter(function(t){return t.ID!==this.ID},this),window.removeEventListener("click",this.hideAllTheThings),document.body.removeEventListener("keydown",this.disableBackButton),this.store.reset(),s.replaceWith(this.outer,this.el)},getData:function(){return this.onFormSubmit(),this.store.retrieve()},reinitialize:function(t){this.destroy(),this.initialize(t||this.options)},restore:function(t){this.el.value=t,this.reinitialize()},blockLimitReached:function(t){this.wrapper.classList.toggle("st--block-limit-reached",t)},blockOrderUpdated:function(){var t=this.wrapper.querySelectorAll(".st-block")[0],e=!1;if(t){var n=this.blockManager.findBlockById(t.getAttribute("id"));e=n&&n.textable}this._toggleHideTopControls(e)},_toggleHideTopControls:function(t){this.wrapper.classList.toggle("st--hide-top-controls",t)},onBlockCountChange:function(t){this.blockPositionerSelect.onBlockCountChange(t)},renderBlockPositionerSelect:function(t){this.blockPositionerSelect.renderInBlock(t)},_setEvents:function(){Object.keys(this.events).forEach(function(t){c.on(t,this[this.events[t]],this)},this)},hideAllTheThings:function(){this.blockControls.hide(),this.blockAddition.hide(),null===document.activeElement.getAttribute("contenteditable")&&this.formatBar.hide(),Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block__ui-delete-controls"),function(t){t.classList.remove("active")})},store:function(t,e){return o.log("The store method has been removed, please call store[methodName]"),this.store[t].call(this,e||{})},removeBlockDragOver:function(){var t=this.outer.querySelector(".st-drag-over");t&&t.classList.remove("st-drag-over")},changeBlockPosition:function(t,e){e-=1;var n=this.blockManager.getBlockPosition(t),r=this.wrapper.querySelectorAll(".st-block")[e];r&&r.getAttribute("id")!==t.getAttribute("id")&&(this.hideAllTheThings(),n>e?r.parentNode.insertBefore(t,r):s.insertAfter(t,r))},onFormSubmit:function(t){return t=!1!==t,o.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(t),this.blockManager.validateBlockTypesExist(t),this.mediator.trigger("errors:render"),this.el.value=this.store.toString(),this.errorHandler.errors.length},validateBlocks:function(t){var e=this;Array.prototype.forEach.call(this.wrapper.querySelectorAll(".st-block"),function(n){var i=e.blockManager.findBlockById(n.getAttribute("id"));r.isUndefined(i)||e.validateAndSaveBlock(i,t)})},validateAndSaveBlock:function(t,e){if(!i.skipValidation&&e&&!t.valid())return this.mediator.trigger("errors:add",{text:r.result(t,"validationFailMsg")}),void o.log("Block "+t.blockID+" failed validation");if("text"!==t.type||!t.isEmpty()){var n=t.getData();o.log("Adding data for block "+t.blockID+" to block store:",n),this.store.addData(n)}},disableBackButton:function(t){var e=t.target||t.srcElement;if(8===t.keyCode){if(e.getAttribute("contenteditable")||"INPUT"===e.tagName||"TEXTAREA"===e.tagName)return;t.preventDefault()}},findBlockById:function(t){return this.blockManager.findBlockById(t)},getBlocksByType:function(t){return this.blockManager.getBlocksByType(t)},getBlocksByIDs:function(t){return this.blockManager.getBlocksByIDs(t)},getBlockPosition:function(t){return o.log("This method has been moved to blockManager.getBlockPosition()"),this.blockManager.getBlockPosition(t)},getBlocks:function(){var t=this;return[].map.call(this.wrapper.querySelectorAll(".st-block"),function(e){return t.findBlockById(e.getAttribute("id"))})},_ensureAndSetElements:function(){if(r.isUndefined(this.options.el))return o.log("You must provide an el"),!1;this.el=this.options.el,this.form=s.getClosest(this.el,"form");var t=s.createElement("div",{id:this.ID,"class":"st-outer notranslate",dropzone:"copy link move"}),e=s.createElement("div",{"class":"st-blocks"});return s.wrap(s.wrap(this.el,t),e),this.outer=this.form.querySelector("#"+this.ID),this.wrapper=this.outer.querySelector(".st-blocks"),!0}}),t.exports=b},function(t,e,n){"use strict";function r(){var t=document.createElement("div");t.className="st-block-controls__buttons",t.innerHTML=function(t,e){return e.reduce(function(e,n){return t.hasOwnProperty(n)&&t[n].prototype.toolbarEnabled?e+s(t[n].prototype):e},"")}.apply(null,arguments);var e=document.createElement("div");return e.className="st-block-controls",e.appendChild(t),e}var i=n(21),o=n(10),s=n(239);t.exports.create=function(t){function e(){var t=n.parentNode;if(t)return t.removeChild(n),t.classList.remove("st-block--controls-active"),t}var n=r(i,t.blockManager.blockTypes);return o.delegate(t.wrapper,".st-block-replacer","click",function(t){t.stopPropagation();var r=this.parentNode;r&&e()!==r&&(r.appendChild(n),r.classList.toggle("st-block--controls-active"))}),o.delegate(t.wrapper,".st-block-controls__button","click",function(){t.mediator.trigger("block:replace",n.parentNode,this.getAttribute("data-type"))}),{el:n,hide:e,destroy:function(){t=null,n=null}}}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){return'\n    <button class="st-block-controls__button" data-type="'.concat(t.type,'" type="button">\n      <svg role="img" class="st-icon">\n        <use xlink:href="').concat(r.defaults.iconUrl,"#").concat(t.icon_name,'"/>\n      </svg>\n      ').concat(t.title(),"\n    </button>\n  ")}},function(t,e,n){"use strict";var r=n(35),i=n(4),o=n(3),s=n(10),a=n(241);t.exports.create=function(t){t.wrapper.insertAdjacentHTML("beforeend",a());var e=t.wrapper.querySelector(".st-top-controls");return r.dropArea(e),e.addEventListener("drop",function(n){n.preventDefault();var r=e,s=n.dataTransfer.getData("text/plain"),a=document.querySelector("#"+s);r.id!==s&&o.insertAfter(a,r),t.mediator.trigger("block:rerender",s),i.trigger("block:reorder:dropped",s)}),s.delegate(t.wrapper,".st-block-addition","click",function(){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.id?this.parentNode.parentNode:this.parentNode)}),{destroy:function(){t=null},hide:function(){}}}},function(t,e,n){"use strict";var r=n(88);t.exports=function(){return'\n    <div id="st_top" class="st-top-controls">\n      '.concat(r(),"\n    </div>\n  ")}},function(t,e,n){"use strict";var r=n(10);t.exports.create=function(t){function e(){t.mediator.trigger("block:create","Text",null,this.parentNode.parentNode.previousSibling,{autoFocus:!0})}return r.delegate(t.wrapper,".st-block-addition-top__button","click",e),r.delegate(t.wrapper,".st-block-addition-top__icon","click",e),{destroy:function(){t=null},hide:function(){}}}},function(t,e,n){"use strict";var r=n(0),i=n(3),o=function(t,e,n){this.wrapper=t,this.mediator=e,this.el=n,r.isUndefined(this.el)&&(this._ensureElement(),this.wrapper.insertBefore(this.el,this.wrapper.firstChild)),i.hide(this.el),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,n(6),n(30),n(11),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var t=document.createElement("ul"),e=document.createElement("p");e.innerHTML=i18n.t("errors:title"),this.el.appendChild(e).appendChild(t),this.list=t},render:function(){if(0===this.errors.length)return!1;this.errors.forEach(this.createErrorItem,this),i.show(this.el)},createErrorItem:function(t){var e=document.createElement("li");e.classList.add("st-errors__msg"),e.innerHTML=t.text,this.list.appendChild(e)},addMessage:function(t){this.errors.push(t)},reset:function(){if(0===this.errors.length)return!1;this.errors=[],this.list.innerHTML="",i.hide(this.el)}}),t.exports=o},function(t,e,n){"use strict";n(0);var r=n(3),i="application/vnd.sirtrevor+json",o=function(t,e,n){this.wrapper=t,this.mediator=e,this.editor=n,this.options=n.options,this.startIndex=this.endIndex=0,this.selecting=!1,this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(o.prototype,n(6),n(30),{eventNamespace:"selection",bound:["onCopy","onCut","onKeyDown","onMouseUp","onMouseDown","onPaste"],mediatedEvents:{start:"start",render:"render",complete:"complete",all:"all",copy:"copy",update:"update","delete":"delete",cancel:"cancel",block:"block"},canSelect:function(){if(r.getClosest(document.activeElement,"input")!==document.body)return!1;var t=r.getClosest(document.activeElement,".st-outer");return!this.options.selectionLimitToEditor||t===this.wrapper},initialize:function(){if(!this.enabled())return!1;window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("mouseup",this.onMouseUp,!1),document.addEventListener("copy",this.onCopy,!1),this.options.selectionCut&&document.addEventListener("cut",this.onCut,!1),this.options.selectionPaste&&document.addEventListener("paste",this.onPaste,!0)},enabled:function(){return!!this.options.selectionCopy},start:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.enabled())return!1;e=Object.assign({mouseEnabled:!1,expand:!1},e),this.endIndex=t,e.expand||(this.startIndex=this.endIndex),this.selecting=!0,e.mouseEnabled&&(this.editor.mouseDown=!0,this.selecting=this.startIndex!==this.endIndex,this.selecting&&this.removeNativeSelection(),window.addEventListener("mousemove",this.onMouseMove)),this.mediator.trigger("selection:render")},startAtEnd:function(){this.start(this.editor.getBlocks().length-1)},move:function(t){this.start(this.endIndex+t)},onMouseMove:function(){},update:function(t){t<0||t>=this.editor.getBlocks().length||(this.endIndex=t,this.startIndex!==this.endIndex&&(this.selecting=!0),this.removeNativeSelection(),this.mediator.trigger("selection:render"))},expand:function(t){this.update(this.endIndex+t)},expandToStart:function(){this.update(0)},expandToEnd:function(){this.update(this.editor.getBlocks().length-1)},focusAtEnd:function(){this.editor.getBlocks()[this.endIndex].el.scrollIntoView({behavior:"smooth"})},complete:function(){window.removeEventListener("mousemove",this.onMouseMove)},all:function(){if(!this.enabled())return!1;this.removeNativeSelection();var t=this.editor.getBlocks();this.selecting=!0,this.startIndex=0,this.endIndex=t.length-1,this.mediator.trigger("selection:render")},cancel:function(){this.editor.mouseDown=!1,this.selecting=!1,this.render()},removeNativeSelection:function(){var t=window.getSelection?window.getSelection():document.selection;t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty()),document.activeElement&&document.activeElement.blur()},render:function(){var t=this,e=this.selecting;this.editor.getBlocks().forEach(function(n,r){n.select(e&&t.indexSelected(r))})},getClipboardData:function(){var t=this;this.editor.getData();var e=[],n=[],r=[];return this.editor.getBlocks().forEach(function(i,o){if(t.indexSelected(o)){var s=i.asClipboardHTML(),a=s;e.push(s),n.push(a),r.push(i.getData())}}),{html:e.join(""),text:n.join("\n\n"),data:r}},copy:function(){var t=this.createFakeCopyArea();t.innerHTML=this.getClipboardData().html;var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n);try{document.execCommand("copy"),t.blur()}catch(t){console.log("Copy could not be performed")}},createFakeCopyArea:function(){var t=document.body.querySelector(".st-copy-area");return t||(t=r.createElement("div",{contenteditable:!0,"class":"st-copy-area st-utils__hidden"}),document.body.appendChild(t)),t},"delete":function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({createNextBlock:!0},e),this.editor.getBlocks().forEach(function(n,r){t.indexSelected(r)&&t.mediator.trigger("block:remove",n.blockID,{focusOnNext:!0,createNextBlock:e.createNextBlock})}),this.cancel()},indexSelected:function(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()},block:function(t){var e=this.editor.blockManager.getBlockPosition(t.el);this.mediator.trigger("formatter:hide"),this.removeNativeSelection(),this.start(e)},getStartIndex:function(){return Math.min(this.startIndex,this.endIndex)},getEndIndex:function(){return Math.max(this.startIndex,this.endIndex)},getStartBlock:function(){return this.editor.getBlocks()[this.getStartIndex()]},getEndBlock:function(){return this.editor.getBlocks()[this.getEndIndex()]},onKeyDown:function(t){var e=(t=t||window.event).ctrlKey||t.metaKey,n=t.key;if(this.selecting&&"Backspace"===n)t.preventDefault(),this["delete"]();else if(e&&"a"===n){if(!this.selecting&&!this.canSelect())return;t.preventDefault(),this.mediator.trigger("selection:all")}else if(this.selecting)if(["Down","ArrowDown"].indexOf(n)>-1){if(t.preventDefault(),t.shiftKey&&e)this.expandToEnd();else if(t.shiftKey)this.expand(1);else{if(!e)return this.cancel(),void this.mediator.trigger("block:focusNext",this.getEndBlock().blockID,{force:!0});this.startAtEnd()}this.focusAtEnd()}else if(["Up","ArrowUp"].indexOf(n)>-1){if(t.preventDefault(),t.shiftKey&&e)this.expandToStart();else if(t.shiftKey)this.expand(-1);else{if(!e)return this.cancel(),void this.mediator.trigger("block:focusPrevious",this.getStartBlock().blockID,{force:!0});this.start(0)}this.focusAtEnd()}},onMouseUp:function(){if(!this.editor.mouseDown)return window.addEventListener("mousedown",this.onMouseDown),this.mediator.trigger("selection:complete"),void this.mediator.trigger("selection:cancel");this.editor.mouseDown=!1,this.mediator.trigger("selection:complete"),this.mediator.trigger("selection:render")},onMouseDown:function(){if(!this.editor.mouseDown)return window.removeEventListener("mousedown",this.onMouseDown),this.mediator.trigger("selection:complete"),void this.mediator.trigger("selection:cancel")},copySelection:function(t){var e=this.getClipboardData();t.clipboardData.setData(i,JSON.stringify(e.data)),t.clipboardData.setData("text/html",e.html),t.clipboardData.setData("text/plain",e.text),t.preventDefault()},onCopy:function(t){this.selecting&&this.copySelection(t)},onCut:function(t){this.selecting&&(this.copySelection(t),this["delete"]())},onPaste:function(t){if([].slice.call(t.clipboardData.types).includes(i)){if(!this.selecting&&!this.canSelect())return;t.preventDefault(),t.stopPropagation();var e=JSON.parse(t.clipboardData.getData(i));if(this.selecting){var n=this.editor.getBlocks()[this.getEndIndex()+1];this["delete"]({createNextBlock:!1}),n&&!n.isEmpty()?this.mediator.trigger("block:createBefore","text","",n,{autoFocus:!0}):this.mediator.trigger("block:create","text","",null,{autoFocus:!0})}this.mediator.trigger("block:paste",e)}}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports=function(t,e){function o(t,e,n){return r.isUndefined(n)&&(n=""),"**"+e.replace(/<(.)?br(.)?>/g,"")+"**"+n}function s(t,e,n){return r.isUndefined(n)&&(n=""),"_"+e.replace(/<(.)?br(.)?>/g,"")+"_"+n}var a=n(21);e=i.classify(e);var c=t;c=(c=c.replace(/&nbsp;/g," ")).replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var u,l,f=["style","script","applet","embed","noframes","noscript"];for(l=0;l<f.length;l++)u=new RegExp("<"+f[l]+".*?"+f[l]+"(.*?)>","gi"),c=c.replace(u,"");c=c.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var p,h=["em","i","strong","b"];for(l=0;l<h.length;l++)u=new RegExp("<"+h[l]+"><br></"+h[l]+">","gi"),c=c.replace(u,"<br>");return c=(c=c.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(t,e,n){return"["+n.trim().replace(/<(.)?br(.)?>/g,"")+"]("+e+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,o).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,o).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,s).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,s)).replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">"),a.hasOwnProperty(e)&&(p=a[e],!r.isUndefined(p.prototype.toMarkdown)&&r.isFunction(p.prototype.toMarkdown)&&(c=p.prototype.toMarkdown(c))),c=c.replace(/<\/?[^>]+(>|$)/g,"")}},function(){}])},t.exports=e()},function(t,e,n){var r=n(9);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(0)(r,i),r.locals&&(t.exports=r.locals)},function(){}]);